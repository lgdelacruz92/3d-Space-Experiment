(function(n){var t=window.AmazonUIPageJS||window.P,u=t._namespace||t.attributeErrors,a=u?u("DetailPageTwisterViewAsset",""):t;a.guardFatal?a.guardFatal(n)(a,window):a.execute(function(){n(a,window)})})(function(n,t,u){n.when("A","dp-refresh-handler","view-util","twister-string-constants","twister-dimension-subview-promise-handler").register("page-refresh-view",function(a,F,g,p,f){function e(f,e,u){function m(c){return{chunk:function(d){var c=d.ASIN,h=d.Value;d=d.FeatureName;if("twister-slot-price_feature_div"==
d){var h=h?h.content:null,b=r(".swatchSelect .twisterSwatchPrice").html(),l=r(".swatchSelect .price_slot_ppu").html();b&&h&&h.priceToSet&&(b=a.trim(b),h.priceToSet!==b&&(r(".swatchSelect .twisterSwatchPrice").html(h.priceToSet),w("twisterUpdatePriceMismatch")));l&&h&&h.hasPricePerUnit&&h.pricePerUnitDisplay&&(l=a.trim(l),h.pricePerUnitDisplay!==l&&(r(".swatchSelect .price_slot_ppu").html(h.pricePerUnitDisplay),w("twisterUpdatePricePerUnitMismatch")))}k.twisterRefreshHandler.stampFeature(d,c)},success:function(d,
c,h){w("twisterUpdateSuccess")},error:function(d,c,h){Twister.$("#variations-overlay").hide();w("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(d){A.logFatal("Ajax aborted: "+d)},timeout:4E4}}function x(c,d,q,h,b){var l=[];"parent"===c?(d=z(d,h,"parent",b),l.parent=d,d=z(q,h,"partial",b),l.partial=d):(d=z(q,h,c,b),l[c]=d);return l}function B(c,d,q,h,b){for(var l in c)if(c.hasOwnProperty(l)){if("full"===l){var f=q.dimensionType,
m=k.twisterUtil.getDimensionInfo().length,p=q.dimensionDisplayType,e=q.newAsin,g=b&&(a.state("dp-twister-csm")||{}).updateCSMPageTypeId;k.twisterRefreshHandler.startMeasurement(e,f,m,p,g?e:void 0,g?["is-twister","parentAsin-"+C]:void 0)}f=c[l].twisterRefreshParams;m=c[l].notifyClientParams;b&&(k.twisterRefreshHandler.fadeInFeatures(k.config[l].affectedFeatures),k.twisterRefreshHandler.doPageRefresh(f,d,h));v(m.asin,m.id,l,b)}}function I(){r.each(e.contextMetaData,function(c,d){var q={};d=d.elementList||
[];var h=d.length,b=[];q.click={};q.mouseOver={};for(var l=0;l<h;l++){var a=r("#"+d[l].divToUpdate);b.push(d[l].divToUpdate);a.length&&d[l].customClientFunction&&(d[l].updateOnHover&&(q.mouseOver[d[l].divToUpdate]=a.attr("customfunctionname")),q.click[d[l].divToUpdate]=a.attr("customfunctionname"))}k.config[c].affectedFeatures=b;k.config[c].clientFeatures=q})}function v(c,d,q,h){var b="",b=h?p.EVENT_TYPE_CLICK:p.EVENT_TYPE_MOUSEOVER;r.each(k.config[q].clientFeatures[b],function(b,h){try{var q=function(){k.twisterRefreshHandler.stampImageLoad(c)};
(function(){var b={};b.P=n;(function(){eval("var P \x3d this.P;");eval("0, "+h)(d,DetailPage.StateController,q)}).call(b)})()}catch(a){A.logFatal("Client feature - "+b+", threw and exception :- "+a)}})}function z(c,d,q,h){var b={},l={},a={};h="parent"===q?c:"partial"===h?d:c;b.isFlushing=2;b.dpEnvironment=Twister.dpEnvironment;n.now("abPricingFfqp_utils","abPricingFfqp_quantityManager").execute("setQuantityForTwister",function(d,c){void 0!==d&&void 0!==c&&"T1"===d.getPageState().weblab_DP_PAGE_REFRESH_B2B_QTY_202073&&
(b.qty=c.singleton.getCurrentQuantity())});b.asinList=c;b.id=h;b.mType=q;J();b=K(q,b);(q=L())&&(l.isTryState=q);l.triggerEvent=k.twisterFeatureName;l=k.twisterRefreshHandler.createCustomParamsMap(b,l);a.asin=c;a.id=d;return{twisterRefreshParams:l,notifyClientParams:a}}function L(){var c=!1,d=a.state("pwState");d&&(c=d.isTryState);return c}function J(){var c=[];r.each(["full","parent","partial","master"],function(d,a){r.each(e.contextMetaData[a].mTypeSpecificURLParams,function(d,b){c.push(d)})});k.twisterRefreshHandler.removeParams(c)}
function K(c,d){r.each(e.contextMetaData[c].mTypeSpecificURLParams,function(c,h){d[c]=h});return d}function M(c){c=k.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(c.selected_variation_values);k.twisterUtil.isFullySelected(c)?k.currentPageSelectionState="full":k.currentPageSelectionState="partial"}function N(c){var d={};d.config=c.measurement;d.dimensionDisplayType=c.dimensionsDisplayType;d.storeID=c.storeID;d.productGroupID=c.productGroupID;d.triggerEvent="Twister";return d}function D(c,
d){var a;"partial"===c&&"partial"===d&&(a="partial");"partial"===c&&"full"===d&&(a="full");"full"===c&&"partial"===d&&(a="parent");"full"===c&&"full"===d&&(a="full");return a}var k=this,C=e.parent_asin,y=t.ue,E="",A=new u("dpTwisterPageRefreshView");this.twisterUtil=f.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};k.viewUtil=new g(f);k.subType;var w=
function(c){y&&y.count&&y.count(c,(y.count(c)||0)+1)};(function(){M(e);I();var c={featureName:k.twisterFeatureName},d=N(e);k.twisterRefreshHandler=new F(c,d,null);f.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(d,c){var b={};if(d!==p.METADATA){var b={},a;a=void 0;if(c)switch(d){case p.VARIATION_CHANGE:a=c.selected().selInfo;break;case p.VARIATION_PEEK:a=c.peek().selInfo}b.selectionInfo=a;b.dimensionCombination=k.viewUtil.getCurrDimCombId(b.selectionInfo,
"_","X");a=k.twisterUtil.isFullySelected(b.dimensionCombination);b.childAsin=k.twisterUtil.getAsinFromSelectionInfo(b.selectionInfo,a);b.newPageSelectionState=a?"full":"partial";b.mTypeForRefresh=D(k.currentPageSelectionState,b.newPageSelectionState);b.newAsin="parent"===b.mTypeForRefresh?C:b.childAsin;b.doNotAbort="parent"===b.mTypeForRefresh?!0:!1;b.twisterCallListParams=x(b.mTypeForRefresh,b.newAsin,b.childAsin,b.dimensionCombination,b.newPageSelectionState);b.optionsForTwisterRefresh=m(c);b.pageRefreshMeasure=
{newAsin:b.newAsin,dimensionType:E,dimensionDisplayType:e.dimensionsDisplayType}}switch(d){case p.VARIATION_CHANGE:k.subType!==p.PRODUCTIZED_VIEW_SUBTYPE&&(B(b.twisterCallListParams,b.optionsForTwisterRefresh,b.pageRefreshMeasure,b.doNotAbort,!0),k.currentPageSelectionState=b.newPageSelectionState,k.subType=void 0);break;case p.METADATA:switch(c.subType){case p.DP_STATE_VIEW_SUBTYPE:E=c.divMetadata.dimDisplayType;break;case p.PRODUCTIZED_VIEW_SUBTYPE:k.subType=c.subType,b.dimensionCombination=c.newDimCombID,
b.childAsin=c.childAsin,b.newAsin=c.newAsin,b.newPageSelectionState=k.twisterUtil.isFullySelected(b.dimensionCombination)?"full":"partial",b.mTypeForRefresh=D(k.currentPageSelectionState,b.newPageSelectionState),b.doNotAbort="parent"===b.mTypeForRefresh?!0:!1,b.twisterCallListParams=x(b.mTypeForRefresh,b.newAsin,b.childAsin,b.dimensionCombination,b.newPageSelectionState),b.optionsForTwisterRefresh=m(c),b.pageRefreshMeasure={newAsin:b.newAsin,dimensionType:c.divMetaData?c.divMetaData.dimDisplayType:
void 0,dimensionDisplayType:e.dimensionsDisplayType},B(b.twisterCallListParams,b.optionsForTwisterRefresh,b.pageRefreshMeasure,b.doNotAbort,!0),k.currentPageSelectionState=b.newPageSelectionState}}}})})()}var r=a.$;f.registerDimensionSubView("page-refresh-view",e);return e});n.when("A").register("twister-common-constants",function(a){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",
BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",
PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",
ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",
ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});"use strict";n.when("A","twister-util","ready").execute(function(a,n){var g=t.ue;if(void 0!==a.state("dimensionKeyList"))for(var p in a.state("dimensionKeyList").dimensionKeys)void 0!==p&&(a.on("a:popover:beforeShow:mobile-twister_"+p,function(f){void 0===a.state("twisterInteractability")&&g&&"function"===typeof g.count&&g.count("Twister:blankTwisterSecView",(g.count("Twister:blankTwisterSecView")||0)+1)}),a.on("a:popover:beforeHide:mobile-twister_"+
p,function(a){if(a&&a.popover){a=a.popover.getContent();var e=0<a.find(".aw-twister-row:first").length;a&&!e&&g&&"function"===typeof g.count&&g.count("blankTwisterSecondaryView",(g.count("blankTwisterSecondaryView")||0)+1)}}))});"use strict";n.when("A").register("twister-bottom-sheet-container",function(a){return{getInstance:function(){return this.sheetViewInstance},saveInstance:function(n){this.sheetViewInstance=n;a.trigger("dp:sheet:twister:initialized")}}});"use strict";n.when("A","a-sheet","jQuery",
"ready").execute(function(a,n,g){a.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var a=g("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),f=a.find("#selected-format"),e=f.offset().left,n=Math.abs(f.width()),f=Math.max(document.documentElement.clientWidth,t.innerWidth||0),n=f-n,u=a.scrollLeft();(e>n||0>=e)&&a.scrollLeft(u+e-f/3)})});n.when("A","view-util","twister-string-constants").register("hover-refresh-view",function(a,t,g){var p=a.$;return function(f,e,r){function u(){a.each(e.contextMetaData,
function(a,e){var v={};a=a.elementList||[];var g=a.length;v.mouseOver=[];for(var n=0;n<g;n++)a[n].customClientFunction&&a[n].updateOnHover&&v.mouseOver.push(a[n].divToUpdate);m.clientFeatures[e]=v})}function G(e,f){a.each(m.clientFeatures[f][g.EVENT_TYPE_MOUSEOVER],function(a){try{var m=p("#"+a),g;m.length&&(g=m.attr("customfunctionname"),function(){var a={};a.P=n;(function(){eval("var P \x3d this.P;");eval("0, "+g)(e,DetailPage.StateController)}).call(a)}())}catch(f){x.logFatal("Client feature - "+
feature+", threw and exception :- "+f)}})}function H(a){a=m.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(a.selected_variation_values);m.twisterUtil.isFullySelected(a)?m.currentPageSelectionState="full":m.currentPageSelectionState="partial"}var m=this,x=new r("dpTwisterHoverRefreshView");this.twisterUtil=f.util;this.twisterFeatureName="TwisterHover";this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};m.viewUtil=new t(f);m.subType=void 0;(function(){function n(a){a=
m.viewUtil.getCurrDimCombId(a,"_","X");var g=m.twisterUtil.isFullySelected(a)?"full":"partial",e,f=m.currentPageSelectionState;"partial"===f&&"partial"===g&&(e="partial");"partial"===f&&"full"===g&&(e="full");"full"===f&&"partial"===g&&(e="parent");"full"===f&&"full"===g&&(e="full");g=[e];"parent"===e&&(g=["parent","partial"]);return{clientFeatureToRefresh:g,dimensionCombination:a}}H(e);u();f.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(e,
f){switch(e){case g.VARIATION_PEEK:var p={};e=f.peek().selInfo;p=n(e);a.each(p.clientFeatureToRefresh,function(a){G(p.dimensionCombination,a)});case g.VARIATION_CHANGE:m.subType!==g.PRODUCTIZED_VIEW_SUBTYPE&&(e=f.selected().selInfo,f=m.viewUtil.getCurrDimCombId(e,"_","X"),m.currentPageSelectionState=m.twisterUtil.isFullySelected(f)?"full":"partial",m.subType=void 0);break;case g.METADATA:switch(f.subType){case g.PRODUCTIZED_VIEW_SUBTYPE:m.subType=f.subType,m.currentPageSelectionState=m.twisterUtil.isFullySelected(f.newDimCombID)?
"full":"partial"}}}})})()}})});