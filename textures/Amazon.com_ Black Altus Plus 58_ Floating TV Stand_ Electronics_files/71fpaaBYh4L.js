(function(y){var x=window.AmazonUIPageJS||window.P,Z=x._namespace||x.attributeErrors,t=Z?Z("DetailPageTwisterAssets",""):x;t.guardFatal?t.guardFatal(y)(t,window):t.execute(function(){y(t,window)})})(function(y,x,Z){y.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(t,g,a,b){function m(a,c,d,h,n,e){this.scope=a;this.uniqueId=c;this.url=d;this.options=h;this.context=n;this.status=0;this.selected=!1;this.error=this.successData=this.xhr=this._status=void 0;
this.chunks=[];this.doNotAbort=e||!1;this.prefetchMetrics=b.getInstance(this.scope)}var n=new a("dpAjaxPrefetch");m.prototype._callback=function(a,c,d,b,n){"function"===typeof a&&a.call(self,c,d,b,n)};m.prototype._canAbort=function(){return!this.doNotAbort&&1===this.status};m.prototype._isAborted=function(){return 3===this.status};m.prototype._getUniqueId=function(){return this.uniqueId};m.prototype._abort=function(){if(1===this.status)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){n.logFatal(a,
{message:" Could not abort ajax request."})}};m.prototype._flushChunkData=function(){var a=this;a.chunks.length&&g.map(a.chunks,function(c){a._callback(a.options.chunk,c,a.context)})};m.prototype._request=function(){var a=this;a.ajaxRequestRefence=t.get(a.url,{params:a.options.params,success:function(c,d,b){a.status=4;a.successData=c;a._status=d;a.xhr=b;a.selected&&a._callback(a.options.success,c,d,b,a.context)},error:function(c,d,b){a.status=2;a.xhr=c;a._status=d;a.error=b;a.selected&&a._callback(a.options.error,
c,d,b,a.context)},abort:function(c){a.status=3;a.xhr=c;a.selected&&a._callback(a.options.abort,c,a.context)},chunk:function(c){c&&(a.chunks.push(c),a.selected&&a._callback(a.options.chunk,c,a.context))},timeout:a.options.timeout||4E4})};m.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);0===this.status&&(this.status=1,this._request())};m.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);m._abortPrefetchesExcept(this);this.selected=!0;
0===this.status?(this.status=1,this._request()):1===this.status?this._flushChunkData():4===this.status&&(this._flushChunkData(),this._callback(this.options.success,this.successData,this._status,this.xhr,this.context),t.trigger("a:pageUpdate"))};m._objects={};m._abortPrefetchesExcept=function(a){g.each(m._objects[a.scope],function(c,b){b._canAbort()&&c!==a._getUniqueId()&&b._abort()})};m.getInstance=function(a,c,b,n,l,e){if(!a||!c||!b||"object"!==typeof n)throw"Incorrect parameter passed.";m._objects[a]=
m._objects[a]||{};var g=m._objects[a][c];g&&g._isAborted()&&(delete m._objects[a][c],g=void 0);g||(m._objects[a][c]=new m(a,c,b,n,l,e,this));return m._objects[a][c]};return m});y.when("A","jQuery","dp-ajax-prefetch","twister-utils","dp-js-logger").register("dimensional-summary-module",function(t,g,a,b,m){var n=new m("dpDimensionalSummary");return function(a){function c(a){e.initData.fnToDetermineSelectedVariations?"function"===typeof e.initData.fnToDetermineSelectedVariations&&(e.currentDimCombOnGlance=
e.initData.fnToDetermineSelectedVariations.call(e)):(e.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,e.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);return a?e.currentDimCombOnGlance.split("_"):e.currentDimCombOnGlance}function d(a,c){for(var f="",d,u,n=0,h=a.length;n<h;n++)f=f+(0<n?",":"")+a[n];var k=m.extend(k,b.getQueryParams({psc:1})),k=m.extend(k,{parentAsin:DetailPage.StateController.getState().parent_asin,productGroupId:DetailPage.StateController.getState().productGroupID});
e.initData.globalAjaxParameters&&(k=m.extend(k,e.initData.globalAjaxParameters));Twister.isPWBadgeEnabled&&(k.isPWBadgeEnabled=1);k&&(u=m.param(k));f&&(a=!Twister.multiDimensionWeblabEnabled||"dropdown"!==c.dimType.toLowerCase()&&"swatch"!==c.dimType.toLowerCase()?c.dimType:"Dropdown",d="/gp/twister/dimension?asinList\x3d"+f+"\x26isDimensionSlotsAjax\x3d1\x26dimSubType\x3d"+c.dimSubType+"\x26dimType\x3d"+a+(u?"\x26"+u:""));return d}function h(a){for(var c,f=0,b=a.length;f<b;f++)c=c+(0<f?",":"")+a[f];
return c}function l(a,c,f){Twister.isPWBadgeEnabled&&x.ue&&x.ue.count&&x.ue.count("Twister:DimensionSlotsAjax",(x.ue.count("Twister:DimensionSlotsAjax")||0)+1);h(a);a=d(a,f);var p={};f.params&&(p.params=f.params);p.chunk=function(a,c){var b;(b=(b=(b=(b=a&&"JSON"==a.Type)&&typeof("undefined"!==a.Value))&&typeof("undefined"!==a.Value.content))&&typeof("undefined"!==a.Value.content.twisterSlotDiv))?(void 0===f.executeChunk?f.chunk(a,c):f.executeChunk()&&f.chunk(a,c),e.asinDimSumCache[a.ASIN]=a):n.logFatal("The received data does not contain required properties.",
{message:"[Twister]Invalid data received."})};p.success=function(a,c,d,k){f.success&&b.typeChecker.isFunction(f.success)&&f.success(a,c,d,k)};p.error=function(a,c,d){f.error&&b.typeChecker.isFunction(f.error)&&f.error(a,c,d)};p.abort=function(a){f.abort&&b.typeChecker.isFunction(f.abort)&&f.abort(a)};p.timeout=6E4;t.get(a,{success:function(a,f,b){p.success(a,f,b,c)},chunk:function(a){p.chunk(a,c)},error:function(a,c,f){p.error(a,c,f)},abort:function(a){p.abort(a)}})}var e=this,m=t.$;e.initData=a;
e.scopePrefix="dpDimSum";e.symbolForTriggeringDim="*";e.uniqueID="";e.urlPrefix="";e.asinDataCache={};e.glanceViewSelectedDims="";e.currentDimCombOnGlance="";e.mapOfDimToAsinMaps={};e.mapOfAsinToDimMaps={};e.asinDimSumCache={};e.scope=e.scopePrefix+"_"+e.initData.scopeSuffix;e.dimensionsList=e.initData.dimensionsList;e.dimensionValuesList=e.initData.dimensionValuesList;e.dimensionCombinationToASINMap=e.initData.dimensionCombinationToASINMap;c();e.fetchDimSumData=function(a){if(a.dimTriggeringDimSum&&
b.typeChecker.isString(a.dimTriggeringDimSum))var f=a.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+e.scope;var d=t.indexOfArray(e.dimensionsList,f);if(a){if(!a.asinList||!b.typeChecker.isArray(a.asinList))throw"Wrong parameter passed to DimSumModule "+e.scope;if(!a.chunk||!b.typeChecker.isFunction(a.chunk))throw"Wrong parameter passed to DimSumModule "+e.scope;}else throw error("No options for dimSum");f={dimIndexTriggeringDimSum:d};f.dimCombOnPage=c();var n=c(!0).slice(0);
n[d]=e.symbolForTriggeringDim;d=n.join("_");f.hashKey=d;for(var u=a.asinList,d=[],n=[],h=0,w=u.length;h<w;h++){var k=u[h];k&&(e.asinDimSumCache&&e.asinDimSumCache[k]?n.push(k):d.push(k))}u=[];u.asinListForServer=d;u.asinListForCache=n;0<u.asinListForServer.length&&l(u.asinListForServer,f,a);if(0<u.asinListForCache.length){d=u.asinListForCache;u=0;for(h=d.length;u<h;u++)n=d[u],a.chunk(e.asinDimSumCache[n],f);d.length===a.asinList.length&&a.success(void 0,void 0,void 0,f)}}}});y.when("A","twister-string-constants").register("twister-modal-resize-helper",
function(t,g){return function(){function a(a,c){a.each(function(a,f){a=n(f);-1==f.className.indexOf(c)&&(a.outerWidth()>b.width&&(b.width=a.outerWidth()),a.outerHeight()>b.height&&(b.height=a.outerHeight()))});return b}var b={width:0,height:0},m=this,n=t.$;m.getGlanceSwatchesInRow=function(a,c){c&&c.fixModalSwatchesForThinWidths();a=n("#twister_feature_div "+a);var b=0,h=0;0<a.length&&(h=a.get(0).getBoundingClientRect().top,b++);for(var l=1,e=a.length;l<e;l++){var m=a.get(l).getBoundingClientRect();
if(5<Math.abs(h-m.top))break;else b++}c&&c.resizeSwatchesForThinWidths();return b};m.fixSize=function(f,c,b,h,l){f.removeClass("twisterSwatchWrapper");var e=a(f,h),g=x.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(void 0!=l){var v=l.twisterModalDiv.outerWidth(),B=m.getGlanceSwatchesInRow(c,l),r=f.first().width(),r=B*(e.width-r);0<r&&0<B&&(newModalWidth=v+r,l.setModalWidth(newModalWidth))}f.addClass("twisterSwatchWrapper");Twister.isIE8()?(f.each(function(a,c){n(c).css({"min-height":e.height+
"px","min-width":e.width+"px"})}),1100<g&&n("."+h).css({height:e.height+"px"})):n("#"+b).html(c+" { min-height:"+e.height+"px; min-width:"+e.width+"px; } ."+h+" { height: "+e.height+"px;}");m.resetBestSize()};m.resetBestSize=function(){b={width:0,height:0}}}});y.when("A").register("evdd-utils",function(t){return function(){this.PopulateEVDD=function(g,a,b,m){var n={},f,c;for(f in g)c=b[f],"undefined"!=typeof c&&(masterDimValIndex=c[0],slaveDimValIndex=c[1],m==masterDimValIndex&&(n[slaveDimValIndex]=
g[f]));"function"===typeof a.dimensionViewHandlersMap[1].updateViewWithPriceInfo&&a.dimensionViewHandlersMap[1].updateViewWithPriceInfo(n)}}});y.when("A").register("scroll-event-handler",function(t){return function(g,a,b){if(a){var m=t.$,n,f=(new Date).getTime();m(a).bind("scroll",function(a){var d=Date.now();n&&d-f<g&&clearTimeout(n);f=d;n=setTimeout(function(){b(a)},g)})}}});y.when("A").register("twister-data-translator",function(t){function g(b){var m=[],n=b.selected_variation_values;a.each(b.dimensions,
function(a,c){n.hasOwnProperty(c)&&m.push({dimKey:c,val:n[c]})});return m}var a=t.$;return{getTranslatedData:function(a){var m={},n={},f=a.deviceType,c=a.ajaxTimeout;n.ajaxUrlParams=a.ajaxUrlParams;n.deviceType=f;n.ajaxTimeout=c;m.config=n;var n={},f=a.dimToAsinMapData,d;for(d in f)if(f.hasOwnProperty(d)){var c=f[d],h=d.split("_").join(":");n[h]=c}m.dimCombinations=n;m.dimensionDisplayText=a.variationDisplayLabels;d=[];n=a.dimensions;f=a.dimensionSelectionData;c=a.variation_values;for(h=0;h<n.length;h++){var l=
{},e=n[h];l.dimKey=e;l.isRequired=f[h].isRequired?!0:!1;l.size=c[e].length;d.push(l)}m.dimensionInfo=d;m.dimensionList=a.dimensions;m.dimtoValueMap=a.variation_values;m.initDimCombination=g(a);return m}}});y.when("A").register("twister-availabilty-cache",function(t){return function(g,a){function b(a,c){var d=a+":"+c,h=a.split("_"),l=h.length,e=-1,m;if(null!==n.asinToRenderCache[d]&&void 0!==n.asinToRenderCache[d])return n.asinToRenderCache[d];n.intermediateAsinToRenderCache[d]=!0;for(d=0;d<l;d++)if("X"===
h[d]){e=d;break}if(-1===e)return m=null,null!=n.twisterVariationsData.dimToAsinMapData[a]&&(m=n.twisterVariationsData.dimToAsinMapData[a]),m;a=n.twisterVariationsData.dimensionValuesData[e].length;for(var v=0;v<a&&(h[e]=v,l=h.join("_"),d=l+":"+c,n.intermediateAsinToRenderCache.hasOwnProperty(d)||(m=b(l,c),null===m||void 0===m));v++);return m}function m(a){for(var c in n.intermediateAsinToRenderCache)n.asinToRenderCache[c]=a,delete n.intermediateAsinToRenderCache[c];n.intermediateAsinToRenderCache=
{}}var n=this;n.twisterVariationsData=g;n.dimensionHierarchyData=a.dimensionHierarchyData;n.isHierarchicalPivoting=a.hierarchicalPivoting;n.dimAvailabilityCache={};n.asinToRenderCache={};n.intermediateAsinToRenderCache={};n.isUpdateCacheReq=!1;n.isDimCombinationAvailable=function(a){var c=a.split("_"),b,h=-1,l,e;b=c.length;if(null!==n.dimAvailabilityCache[a]&&void 0!==n.dimAvailabilityCache[a])return n.dimAvailabilityCache[a];for(e=0;e<b;e++)if("X"===c[e]){h=e;break}if(-1===h)return l=!1,null!==n.twisterVariationsData.dimToAsinMapData[a]&&
void 0!==n.twisterVariationsData.dimToAsinMapData[a]&&(l=!0),n.dimAvailabilityCache[a]=l;b=n.twisterVariationsData.dimensionValuesData[h].length;for(var m=0;m<b&&(c[h]=m,e=c.join("_"),null!==n.dimAvailabilityCache[e]&&void 0!==n.dimAvailabilityCache[e]?l=n.dimAvailabilityCache[e]:(l=n.isDimCombinationAvailable(e),n.dimAvailabilityCache[e]=l),!l);m++);return n.dimAvailabilityCache[a]=l};n.gAsinToRender=function(a,c){var d=null,h,l,e=a.split("_"),g=e.length;h=a+":"+c;if(null!==n.asinToRenderCache[h]&&
void 0!==n.asinToRenderCache[h])return n.isUpdateCacheReq&&(m(n.asinToRenderCache[h]),n.isUpdateCacheReq=!1),n.asinToRenderCache[h];n.isUpdateCacheReq||(n.isUpdateCacheReq=!0);n.intermediateAsinToRenderCache.hasOwnProperty(h)||(d=b(a,c));if(null!==d&&void 0!==d)return n.isUpdateCacheReq&&("X"===e[c]?(n.asinToRenderCache[h]=d,n.intermediateAsinToRenderCache={}):m(d),n.isUpdateCacheReq=!1),d;for(a=0;a<g;a++)if(h=n.isHierarchicalPivoting&&n.dimensionHierarchyData&&n.dimensionHierarchyData[a]<n.dimensionHierarchyData[c],
a!=c&&"X"!=e[a]&&!h&&(d=e[a],e[a]="X",h=e.join("_"),l=h+":"+c,e[a]=d,!n.intermediateAsinToRenderCache.hasOwnProperty(l)&&(d=b(h,c),null!==d&&void 0!==d)))return n.isUpdateCacheReq&&(m(d),n.isUpdateCacheReq=!1),d;d=-1;for(a=0;a<g;a++)if(h=n.isHierarchicalPivoting&&n.dimensionHierarchyData&&n.dimensionHierarchyData[a]<n.dimensionHierarchyData[c],"X"!==e[a]&&a!==c&&!h){d=a;break}if(-1===d)return"";e[d]="X";h=e.join("_");return n.gAsinToRender(h,c)}}});y.when("A","twister-string-constants").register("twister-utils",
function(t,g){var a=t.$,b=this,m={};b.windowWidth=x.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;b.immersiveTwisterOverlay=a("#"+g.TWISTER_FEATURE_DIV_ID+" #"+g.IMMERSIVE_TWISTER_OVERLAY);b.twisterFeatureDiv=a("#"+g.TWISTER_FEATURE_DIV_ID);(function(){for(var a="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),b=0,c=a.length;b<c;b++)m["is"+a[b]]=function(a){return function(c){return Object.prototype.toString.call(c).slice(8,-1)===a}}(a[b])})();
return{enableTwisterDiv:function(){b.immersiveTwisterOverlay.css({opacity:"0",position:"absolute",width:"0px",height:"0px"})},disableTwisterDiv:function(){var a=b.twisterFeatureDiv.get(0).clientWidth,f=b.twisterFeatureDiv.get(0).clientHeight;b.immersiveTwisterOverlay.css({opacity:"0.8",position:"absolute",width:a,height:f,"background-color":"white","z-index":10})},isSwatchSelected:function(a,b){var c=Twister.isImmersiveExperience?"."+g.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[g.STRING_DIM_INDEX]]+
"_"+a[g.STRING_DIM_VALUE_INDEX]:"#"+b.dimensionsMap[a[g.STRING_DIM_INDEX]]+"_"+a[g.STRING_DIM_VALUE_INDEX],d;if(t.$(c).is("li")){c=t.$(c);!Twister.isImmersiveExperience||0<c.length||(c=t.$("."+g.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[g.STRING_DIM_INDEX]]+"_"+a[g.STRING_DIM_VALUE_INDEX]));a=c.get(0).className.split(" ");b=0;for(c=a.length;b<c;b++){var h=a[b];if(0===h.indexOf("swatch")){d=h;break}}d!==g.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER&&d!==g.CLASS_FOR_SWATCH_UNAVAILABLE||t.$("#twisterPopover.twisterPopoverSkin").hide();
return d===g.CLASS_FOR_SWATCH_SELECT}return!1},isPartialState:function(a){for(var b=DetailPage.StateController.getState().currentDimCombID.split("_"),c=!1,d=0;d<a;d++)if("X"===b[d]){c=!0;break}return c},getProductizedTwisterSelectionFromDivMetaData:function(a,b){var c=[],d=a.dimIndex,h=a.dimValueIndex;for(a=0;a<b.length;a++)if(d===parseInt(a,10)){d={};d.dimKey=b[a];d.val=parseInt(h,10);c.push(d);break}return c},getProductizedTwisterSelectionFromDimComb:function(a,b){var c=[];a=a.replace(/X/g,"-1").split("_");
for(var d=0;d<b.length;d++){var h={},l=a[d];h.dimKey=b[d];h.val=parseInt(l,10);c.push(h)}return c},getImmersivePartialStateBannerContent:function(a,b){var c="",d=Twister.immersivePartialStateMessage,h=a.dimensionSelectionData;a=a.dimensionsDisplay;for(var l=0;l<h.length;l++)l!==b&&0===h[l][g.STRING_IS_SELECTED]&&(c=c?c+", "+a[l]:a[l]);Twister.isPWBadgeEnabled&&(c=c.toLowerCase());return d.replace("dimName",c)},getImmersiveFullStateBannerContent:function(a,b){var c="",d=Twister.immersiveFullySelectedStateMessage,
h=a.dimensionSelectionData,l=a.dimensions;a=a.dimensionsDisplay;for(var e=DetailPage.StateController.getState().selected_variations,m=0;m<h.length;m++)m!==b&&1===h[m][g.STRING_IS_SELECTED]&&(c=c?c+", "+a[m]+" "+e[l[m]]:a[m]+" "+e[l[m]]);return d.replace("dimName",c)},isSmallerWidthScreen:function(){return 1100>b.windowWidth?1:0},getAttachedClass:function(b,f){b=b[g.STRING_DIM_VALUE_INDEX];var c="#"+f+"_"+b;if(t.$(c).is("li")){var d,c=t.$(c);!Twister.isImmersiveExperience||0<c.length||(c=a("."+g.TWISTER_SWATCH_CLASS_PREFIX+
f+"_"+b));f=c.get(0).className.split(" ");b=0;for(c=f.length;b<c;b++){var h=f[b];if(0===h.indexOf("swatch")){d=h;break}}return d}c=Twister.isImmersiveExperience?g.IMMERSIVE_DROPDOWN_ROW_PREFIX+f+"_"+b:g.NATIVE_DROPDOWN_DIV_PREFIX+f+"_"+b;return t.$(c).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&amp;/g,"\x26")},getDimStyleData:function(a,b,c,d,h){a=a.split("_");for(var l=[],e=a.slice(0),
m,v,B=0;B<b;B++)v={},a[c]===B.toString()?m=g.STYLE_CLASS_TYPE_FOR_SELECTED:(e[c]=B,m=e.join("_"),m=(m=d.isDimCombinationAvailable(m))?g.STYLE_CLASS_TYPE_FOR_AVAILABLE:g.STYLE_CLASS_TYPE_FOR_INAVLID),m=h[m],v.style=m,l[B]=v;return l},getVisibleTableRows:function(b,f){var c=[],d=b.getBoundingClientRect();f||(f=a(b).find("tr"));if(f.length)for(b=0;b<f.length;b++){var h=f.get(b),l=h.getBoundingClientRect(),e=(l.bottom-l.top)/2,m=d.bottom+e;d.top-e<l.top&&m>l.bottom&&c.push(h);if(d.bottom<l.top)break}return c},
reconstructCombinationWithDimValue:function(a,b,c){if(!a)return a;var d=a.split(g.CHAR_UNDERSCORE);if(b>=d.length)return a;d[b]=c;return d.join(g.CHAR_UNDERSCORE)},isTouchDevice:function(){return t.capabilities.touch},isTouchOnlyDevice:function(){return"undefined"!=typeof touchDeviceDetected&&touchDeviceDetected},typeChecker:m,getQueryParams:function(b){b=void 0===b?{}:b;var f={},c=decodeURIComponent(x.location.href).match(/^.*?\?(.*?)(#.*)?$/);if(null===c||2>c.length||void 0===c[1])return{};c=c[1].split("\x26");
a.each(c,function(a,c){a=c.split("\x3d");2>a.length||b.hasOwnProperty(a[0])||(f[a[0]]=a[1])});return f},stringTrim:function(a){var b=/^\s+/,c=/\s+$/;return String.prototype.trim?String.prototype.trim.call(a):a.replace(b,"").replace(c,"")},checkPWBadge:function(b,f){if(!f||void 0!==b){var c=!1,d=t.state("pwState");d&&(c=d.isTryState);var h,l,e,m;f?(e=b.find(".pwTryBadge"),m=b.find(".pwBuyBadge"),d=b.find(".pwPrice")):(e=a(".pwTryBadge"),m=a(".pwBuyBadge"),d=a(".pwPrice"));c&&e.length?(h=e,l=m,d.length&&
d.removeClass("aok-hidden"),b=e.parent(),d=b.find(".pwPrimeBadge"),d.length&&d.addClass("aok-hidden"),f=b.find(".buyBoxPrice"),b=b.find(".deal-price"),f.length&&f.addClass("aok-hidden"),b.length&&b.addClass("aok-hidden")):e.length&&(l=e,h=m,f?(c=b.find(".pwPrimeBadge"),f=b.find(".buyBoxPrice"),b=b.find(".deal-price")):(c=a(".pwPrimeBadge"),f=a(".buyBoxPrice"),b=a(".deal-price")),c.length&&c.removeClass("aok-hidden"),f.length&&f.removeClass("aok-hidden"),b.length&&b.removeClass("aok-hidden"),d.length&&
d.addClass("aok-hidden"));h&&h.length&&h.removeClass("aok-hidden");l&&l.length&&l.addClass("aok-hidden")}}}});y.when("A").register("aui-style-override",function(t){return{doOverride:function(){},ingressOverride:function(){}}});y.when("A").register("twister-thumbnailModule",function(t){var g=t.$;return{attach:function(a){var b=g("#dropdown_selected_thumbnail_"+a);a=g("#dropdown_selected_"+a+" .a-button-inner");0<b.length&&0<a.length&&(b.detach(),a.append(b),"#"!==b.attr("src")&&b.show())},update:function(a){var b=
g("#native_dropdown_selected_"+a).val().split(",")[0];"undefined"!==typeof b&&"-1"!==b&&(b=g("#native_"+a+"_"+b),b=0<b.length?b.attr("data-a-image-source"):"",a=g("#dropdown_selected_thumbnail_"+a),0<a.length&&""!==b?(a.attr("src",b),a.show()):a.hide())},preloadAllThumbnails:function(a){if(a){var b=g("#native_dropdown_selected_"+a+" option");a=g("#dropdown_selected_"+a).attr("data-a-class");b&&a&&-1!==a.indexOf("twister-image-dropdown")&&g.each(b,function(a,b){if(a=b.getAttribute("data-a-image-source"))(new Image).src=
a})}}}});y.when("A","twister-string-constants","scroll-event-handler").execute(function(t,g,a){(function(b){function m(a){function d(c,f){c=b(f).get(0).getBoundingClientRect();f=a.$window.get(0).getBoundingClientRect();var e=f.right-f.left,u=f.bottom-f.top;return f.top<c.top&&c.top<f.top+u&&f.left<c.left&&c.left<f.left+e}c=!1;for(var e=0,m=a.selector.length;e<m;e++){var v=[];void 0!==a.blockIsAppear&&a.blockIsAppear()||(v=b(a.selector[e]).filter(function(){return b(this).is(d)}).not(f));0<v.length&&
(t.trigger(a.eventToBeTriggered,[v.clone()]),f=f.add(v))}}var n=[],f=b(),c=!1,d={interval:250,force_process:!1};b.fn.extend({appearedInTwisterImmersiveView:function(f){var l=b.extend({},d,f||{}),e=this.selector||this;l.selector=[];l.selector[0]=e;var g=function(){c||(c=!0,setTimeout(function(){m(l)},l.interval))};new a(200,f.$scrollHandlerDiv,g);f.$window.resize(g);l.force_process&&setTimeout(function(){m(l)},l.interval);n.push(e);return b(e)},forceAppear:function(a){var c=b.extend({},d,a||{});a=
this.selector||this;c.selector=[];c.selector[0]=a;setTimeout(function(){m(c)},c.interval)},invalidateAppearedAlreadyCache:function(a){f=f.not(this.selector)}})})(t.$)});y.when("A","twister-js-init-mason-data").register("accessibility-helper",function(t,g){function a(){clearTimeout(m.timeout);m.innerHTML="";m.timeout=setTimeout(function(){m.innerHTML=m.textString},10)}var b=t.$,m=(t=g.isTablet)?null:{};!t&&b(document).ready(function(){m=document.createElement("div");null!=m&&(m.className="twisterAccess",
b(m).attr("aria-live","polite"),b(m).attr("aria-atomic","true"),document.body.appendChild(m))});return{announceText:function(b){null!=m&&(m.textString=b,setTimeout(a,0))}}});y.when("A").register("twister-expander",function(t){return function(g){function a(){"function"===typeof p.synchronousPreCollapseCallback&&p.synchronousPreCollapseCallback();p.logger.logImpression(p.logger.eventTypes.COLLAPSE_BUTTON_CLICK,r);p.expanderSection.height();p.expanderSection.animate({height:p.minHeightForExpandedSection},
{duration:p.scrollAnimationDuration,queue:!1,complete:function(){p.expanderSection.css("overflow-y","hidden");p.expanderSection.css("overflow","hidden");p.expanderHidesVariation&&!p.expanderButtonPostCollapse||p.expanderButton.removeClass("aok-hidden");"function"===typeof p.synchronousPostCollapseCallback&&p.synchronousPostCollapseCallback()}});p.expanderSection.animate({scrollTop:0},{duration:p.scrollAnimationDuration,queue:!1});c.isCollapsed=!0;p.expanderHidesVariation?m():p.collapseButton.addClass("aok-hidden");
c.handleVariationSwap()}function b(){v.hasClass("aok-hidden")&&(v.removeClass("aok-hidden"),p.expanderButton.prev().insertAfter(l))}function m(){c.isCollapsed?(p.collapseButton.addClass("aok-hidden"),p.expanderHidesVariation&&z.addClass("aok-hidden"),p.expanderButtonPostCollapse||p.expanderButton.removeClass("aok-hidden")):(p.expanderButton.addClass("aok-hidden"),z.removeClass("aok-hidden"),p.collapseButton.removeClass("aok-hidden"))}function n(){B.bind("click",function(b){p.expanderButton[0].id==
b.currentTarget.id||c.isCollapsed||a()})}var f=t.$,c=this,d,h,l,e,z,v,B=f(".expanderButton"),r,p={minHeightForExpandedSection:50,maxHeightForExpandedSection:100,maxHeightForExpandedSectionInView:null,scrollAnimationDuration:500,expanderSection:null,useExpanderScrollView:!0,minAsinsForExpandedView:null,expanderButtonReplacementIndex:null,dimValuePrefix:null,initSelectedID:null,swatchImageSize:null,swatchImageMargin:null,expanderButton:null,collapseButton:null,expanderHidesVariation:!0,expanderButtonPostCollapse:!1,
synchronousPreExpanderCallback:null,synchronousPostExpanderCallback:null,synchronousPreCollapseCallback:null,synchronousPostCollapseCallback:null,dimDisplayType:null,logger:null,dimOrder:null};c.handleExpand=function(){"function"===typeof p.synchronousPreExpanderCallback&&p.synchronousPreExpanderCallback();p.logger.logImpression(p.logger.eventTypes.EXPAND_BUTTON_CLICK,r);var a=p.expanderSection.height();c.isCollapsed=!1;c.handleVariationSwap();p.expanderHidesVariation?m():p.expanderButton.addClass("aok-hidden");
if(p.useExpanderScrollView)p.expanderSection.height(a).animate({height:p.maxHeightForExpandedSection},{duration:p.scrollAnimationDuration,queue:!1,complete:function(){p.expanderSection.css("overflow-y","auto");c.scrollVariationIntoView();p.expanderHidesVariation||p.collapseButton.removeClass("aok-hidden");"function"===typeof p.synchronousPostExpanderCallback&&p.synchronousPostExpanderCallback()}});else{var b=p.expanderSection.css("height","auto").height();p.expanderSection.height(a).animate({height:b},
{duration:p.scrollAnimationDuration,queue:!1,complete:function(){p.expanderHidesVariation||p.collapseButton.removeClass("aok-hidden");"function"===typeof p.synchronousPostExpanderCallback&&p.synchronousPostExpanderCallback()}})}};c.handleVariationSwap=function(a){c.isCollapsed&&(d>=e||p.expanderHidesVariation&&v.hasClass("aok-hidden")&&h.is(v))?(a&&b(),a=v,d==e&&p.expanderHidesVariation?(z.removeClass("aok-hidden"),l=v):d==e+1&&p.expanderHidesVariation?(z.addClass("aok-hidden"),l=p.expanderButton):
d==e-1&&p.expanderHidesVariation?(v.removeClass("aok-hidden"),a=z,l=f(p.dimValuePrefix+(d-1))):p.expanderHidesVariation?(z.addClass("aok-hidden"),l=f(p.dimValuePrefix+(d-1))):l=d==e?p.expanderButton:f(p.dimValuePrefix+(d-1)),h.insertBefore(p.expanderButton),a.addClass("aok-hidden")):c.isCollapsed||b()};c.scrollVariationIntoView=function(){var a=h.offset().top,b=p.expanderSection.offset().top,c=p.expanderSection.scrollTop(),a=a-b,c=c+a;0>a?p.expanderSection.animate({scrollTop:c},{duration:p.scrollAnimationDuration,
queue:!1}):a>p.maxHeightForExpandedSectionInView&&(c-=p.swatchImageSize+p.swatchImageMargin,p.expanderSection.animate({scrollTop:c},{duration:p.scrollAnimationDuration,queue:!1}))};c.updateSelectedVariation=function(a,c){null!=c&&(h=c);null!=a&&(d=a.split("_")[p.dimOrder])};(function(){g&&f.extend(p,g);if(!p.collapseButton)throw"Expander collapseButton should not be null";if(!p.expanderButton)throw"Expander expanderButton should not be null";if(!p.expanderSection)throw"Expander expanderSection should not be null";
if(!p.initSelectedID)throw"Expander initSelectedID should not be null";if(!p.minAsinsForExpandedView)throw"Expander minAsinsForExpandedView should not be null";if(!p.dimValuePrefix)throw"Expander dimValuePrefix should not be null";if(!p.swatchImageSize)throw"Expander swatchImageSize should not be null";if(!p.swatchImageMargin)throw"Expander swatchImageMargin should not be null";if(!p.expanderButtonReplacementIndex)throw"Expander expanderButtonReplacementIndex should not be null";if(!p.dimDisplayType)throw"Expander dimDisplayType should not be null";
if(!p.logger)throw"Expander Logger should not be null";p.dimOrder||(p.dimOrder=0);r={dimDisplayType:p.dimDisplayType};p.logger.logImpression(p.logger.eventTypes.EXPANDER,r);e=p.expanderButtonReplacementIndex;z=f(p.dimValuePrefix+e);v=f(p.dimValuePrefix+(e-1));d=p.initSelectedID.split("_")[p.dimOrder];h=f(p.dimValuePrefix+p.initSelectedID.split("_")[p.dimOrder]);c.isCollapsed=!0;p.expanderButton.click(function(){c.handleExpand()});p.collapseButton.click(function(){a()});n();c.handleVariationSwap()})()}});
y.when("A","twister-string-constants","migrated-views").register("view-util",function(t,g,a){function b(a){n.tvm=a.tvm;n.util=a.util}var m=t.$,n=this;b.isViewsEligibleForMigration=function(b){for(var c=!0,d=a.getMigratedViews(),h=0,l=b[g.INIT_DATA_DIMENSIONS_MAP].length;h<l;h++){var e="undefined"!==typeof b[g.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP]?b[g.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][h]:void 0;if(!0===c&&void 0!==e)c=-1!=t.indexOfArray(d,e);else{c=!1;break}}return c};b.prototype={variationData:{getAsinToDimIndexMapData:function(){var a=
{},c=n.tvm.dimCombinations,b,h,l;for(b in c)c.hasOwnProperty(b)&&(l=b.split(g.CHAR_COLON),h=c[b],l=m.map(l,function(a){return parseInt(a)}),a[h]=l);return a},getDimToAsinMapData:function(){var a={},b=n.tvm.dimCombinations,d,h,l;for(d in b)b.hasOwnProperty(d)&&(l=d.split(g.CHAR_COLON).join(g.CHAR_UNDERSCORE),h=b[d],a[l]=h);return a},getDimensionValuesData:function(){var a=[],b=n.tvm.dimtoValueMap;m.each(n.tvm.dimensionList,function(d,h){a.push(b[h])});return a},getDimensionValuesDisplay:function(){var a=
this,b={},d=this.getAsinToDimIndexMapData();m.each(d,function(d,l){var e=[];m.each(l,function(b,c){b=a.getDimValueByDimIndex(b,c);e.push(b)});b[d]=e});return b},getDimValueByDimIndex:function(a,b){var d=void 0,h=n.tvm.dimInfoMap,l=n.tvm.dimtoValueMap;m.each(h,function(e,m){h.hasOwnProperty(e)&&m.dimOrder==a&&void 0!==l[e]&&(d=l[e][b])});return d}},getTwisterState:function(a){for(var b=[],d={dimKey:void 0,val:void 0},h=0;h<n.tvm.dimensionList.length;h++)if(a&&(d.dimKey=n.tvm.dimensionList[h],parseInt(a.dimIndex,
10)===h)){d.val=a.dimValueIndex;b.push(d);break}return b},getCurrDimCombId:function(a,b,d){for(var h=[],l=0;l<n.tvm.dimensionList.length;l++){var e=a[l].val;-1===e&&(e=d?d:g.CHAR_ASTERISK);h.push(String(e))}return b?h.join(b):h},getDimensionSelectionData:function(a,b){for(var d=[],h=0;h<n.tvm.dimensionList.length;h++){var l={},e=0,m=0;-1!=b[h].val&&(m=1);a[b[h].dimKey].isRequired&&(e=1);l[g.STRING_IS_REQUIRED]=e;l[g.STRING_IS_SELECTED]=m;d[h]=l}return d},getDimDisplayMap:function(){var a=[],b=n.tvm.dimensionList,
d=n.tvm.dimensionDisplayText,h;if("undefined"!==typeof d&&"undefined"!==typeof b)for(var l in b)h=b[l],a[l]=d[h];return a},getDimensionValuesData:function(a,b){var d={},h=void 0;if(b){var l=b[g.TWISTER_CURRENT_ASIN];(b=b[g.INIT_DATA_DELETED_LANDING_ASIN_INFO])&&l===b.asin&&(h=b.dimValues)}for(l=0;l<n.tvm.dimensionList.length;l++)b=n.tvm.dimtoValueMap[a[l].dimKey][a[l].val],!b&&h&&h[l]&&(b=h[l]),d[l]=b;return d},getDimNameByOrder:function(a){a=Number(a);var b=void 0;m.each(n.tvm.dimInfoMap,function(d,
h){if(h.dimOrder===a)return b=d,!1});return b},isAlreadySelected:function(a,b){var d=!1,h=parseInt(b.dimValueIndex,10),l=this.getDimNameByOrder(parseInt(b.dimIndex,10));if(l)m.each(a,function(a,b){b.dimKey===l&&(d=b.val==h?!0:!1)});else return!1;return d},initializeTwisterInteractionStartTime:function(){x.newTwisterInteractionStartTime=new Date},isDimensionSelected:function(a,b){return(a=n.tvm.dimensionList[a])&&(b=n.util.getUnselectedDims(b))&&0<b.length?-1===m.inArray(a,b):!1},createAccessibilityText:function(a,
b){var d=b[g.STRING_ACCESSIBILITY_CURRENT_SELECTION],h=this.getDimensionValuesData(a,b);a=n.tvm.dimensionList;var l=this.getDimDisplayMap(n.tvm),e=[];m.each(a,function(a,b){e.push(l[a]+" \x3d "+h[a])});return d+e.join(" , ")},getDimensionValuesDisplayData:function(a,b){var d;if(b){var h=b[g.INIT_DATA_DELETED_LANDING_ASIN_INFO];(d=b[g.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA][a])||a!==h.asin||(d=h.dimValues)}return d||[]}};return b});y.when("A","3p-promise","dp-time-to-interactive").register("log-twister-execution-metrics",
function(t,g,a){function b(a){return new g(function(b,d){y.when(a+"StartTime",a+"EndTime").execute(function(a,d){b({startTime:a,endTime:d,execTime:d-a})})})}function m(a,b){void 0!=b&&x.ue&&t.$.isFunction(x.ue.count)&&x.ue.count(a,b)}var n=function(){var f=[];["twisterPhase1","twisterPhase2"].forEach(function(a,d){f.push(b(a))});f.push(a.getClickToCIPromise());return f}();g.all(n).then(function(a){var b=a[0].startTime,d,h;(d=a[2].features)&&d.imageblock&&(h=d.imageblock);d=b<h.interactiveTime?"TF":
"IF";a[1].startTime>h.interactiveTime&&(d+="_TL");var l=a[0].execTime;x.ue&&x.ue.tag&&x.ue.tag(d+"_"+("E"+(50>=l?1:100>=l?2:200>=l?3:4)));m("DPTwisterExecutionTime1",l);m("DPTwisterExecutionTime2",a[1].execTime);m("DP_twister_ib_timediff",Math.abs(h.interactiveTime-b))})});y.when("A").register("dp-js-logger-service",function(t){return function(g,a,b,m){function n(a,b,h){b=b||{};"string"===typeof a&&(b.message+=a,a=void 0);b.logLevel=h;x.ueLogError&&x.ueLogError(a,b)}var f=void 0!==b&&null!==b?b:"";
m=m||!1;this.logFatal=function(a,b){n(a,b,"FATAL")};this.logError=function(a,b){n(a,b,"ERROR")};this.logCounter=function(a,b){a=""===f?a:f+":"+a;x.ue&&x.ue.count&&ue.count(a,b)};this.logCounters=function(a){g.each(a,function(a,b){a=f+":"+b.name;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Logging metric: "+a+" -\x3e "+b.value);x.ue&&x.ue.count&&ue.count(a,b.value)})};this.consoleLog=function(a){x.console&&"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log(a)};
this.init=function(){var b=this;if(m){var d=function(){var d=a.getDataToUploadOnUnload();b.logCounters(d);return null};if("undefined"!==typeof x.ue.onunload)x.ue.onunload(d);else g(x).bind("beforeunload",d)}}}});y.when("A","dp-js-logger-service","twister-string-constants").register("dp-js-logger",function(t,g,a){return function(b,m,n){function f(b){if(!b)return null;var c=m?m.jsInteractionEnabledTime:Date.now();return(b[a.TWISTER_EVENT_DATA_TIME]||Date.now())-c}function c(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();
var b=a.stringVal;a=a.hasOwnProperty("getUploadValue")?a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:b}}var d=this,h=t.$,l;this.createFunctionTimer=function(a){return{eventType:a,start:function(){this.startTime=Date.now()},stop:function(){d.logImpression(this.eventType,{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT","M_FIRST_CLICK","M_VARIANTS_CLICKED"]},UNAVAILABLE_SWATCH_HOVER:{metricList:["UNAVAILABLE_SWATCH_HOVER_COUNT"]},
UNAVAILABLE_SWATCH_TABLET_CLICK:{metricList:["UNAVAILABLE_SWATCH_TABLET_CLICK_COUNT"]},UNAVAILABLE_SWATCH_PC_CLICK:{metricList:["UNAVAILABLE_SWATCH_PC_CLICK_COUNT"]},TWISTER_UNAVAILABILITY_NOTIFIER:{metricList:["UNAVAILABILE_VARIATIONS_COUNT","IS_UNAVAILABLITY_PRESENT"]},HOVER:{metricList:["M_HOVER_COUNT","M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT","M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS","M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO",
"M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT","M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]},EXPAND_BUTTON_CLICK:{metricList:["EXPAND_BUTTON_CLICK_COUNT"]},COLLAPSE_BUTTON_CLICK:{metricList:["COLLAPSE_BUTTON_CLICK_COUNT"]},EXPANDER:{metricList:["EXPANDER_COUNT"]},
HISTORY_API_SUPPORTED:{metricList:["M_HISTORY_API_SUPPORTED"]},HISTORY_API_NOT_SUPPORTED:{metricList:["M_HISTORY_API_NOT_SUPPORTED"]}};var e=function(b,c){this.stringVal=c;this.initValue=NaN;this.deferLogging=!0;this.pagenationCountName=b;this.updateFunction=function(b){var c;c=25*Math.ceil(b[a.TWISTER_EVENT_DATA_PERCENTAGE]/25);var u=b[a.TWISTER_EVENT_DATA_DIV_METADATA][a.STRING_DIM_INDEX];this.metrics||(this.metrics={});this.metrics[u]||(this.metrics[u]={});(this.metrics[u].percentage||0)<c&&(this.metrics[u].percentage=
c);this.metrics[u].pageCount=b[a.TWISTER_EVENT_DATA_COUNT];this.metrics[u].dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log(this.stringVal+": index - "+u+" page - "+this.metrics[u].pageCount+" percentage - "+this.metrics[u].percentage)};this.getMetricData=function(){if(this.metrics){var a=[],b=this;h.each(this.metrics,function(c,d){c=b.pagenationCountName+d.pageCount;d.dimDisplayType&&(c=d.dimDisplayType+":"+c);a.push({name:c+
"_"+(b.stringVal+d.percentage),value:1})});return a}}},z={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",
initValue:NaN,deferLogging:!0,updateFunction:function(a){a=d.getMetricCurrentValue("M_CACHE_HIT");var b=d.getMetricCurrentValue("M_CACHE_MISS");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue||(this.currentValue=this.initValue,this.usedIdCache={});a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,
deferLogging:!0,updateFunction:function(a){if(m)a=m.twisterModel.pageRefresh.getModelCacheSize("full")-d.getMetricCurrentValue("M_CACHE_USED"),this.currentValue=0>a?0:a;else throw"EventController undefined";}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",initValue:NaN,deferLogging:!0,updateFunction:function(a){a=d.getMetricCurrentValue("M_CACHE_USED");var b=d.getMetricCurrentValue("M_CACHE_UNUSED");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",initValue:NaN,
deferLogging:!0,updateFunction:function(a){this.firstClickLogged||(this.currentValue=f(a),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("first click \x3d "+this.currentValue),this.firstClickLogged=!0)}},M_CLICK_COUNT:{stringVal:"ClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_VARIANTS_CLICKED:{stringVal:"VariantsClicked",
initValue:0,deferLogging:!0,updateFunction:function(a){a=a.divMetaData;this.lastClickedDivMetaData&&a&&this.lastClickedDivMetaData.dimIndex===a.dimIndex&&this.lastClickedDivMetaData.dimValueIndex===a.dimValueIndex||(this.lastClickedDivMetaData=a,this.currentValue=0<this.currentValue?this.currentValue+1:1,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing variants click count to "+this.currentValue))}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,
updateFunction:function(a){a=a.divMetaData;this.lastHoveredDivMetaData&&a&&this.lastHoveredDivMetaData.dimIndex===a.dimIndex&&this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex||(this.lastHoveredDivMetaData=a,this.currentValue=0<this.currentValue?this.currentValue+1:1,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing hover count to "+this.currentValue))}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstHoverLogged||
(this.currentValue=f(a),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("first hover \x3d "+this.currentValue),this.firstHoverLogged=!0)}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){var b=a.newReqDimValueIndex;a=a.oldReqDimValueIndex;"X"===b?this.currentValue||(this.lastReqDimValueIndex=a,this.currentValue=0):this.lastReqDimValueIndex!==b&&(this.lastReqDimValueIndex=b,this.currentValue||0===this.currentValue?
this.currentValue++:"X"===a?this.currentValue=0:this.currentValue=1,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue))}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",
initValue:NaN,deferLogging:!1,updateFunction:function(b){this.currentValue=b[a.TWISTER_EVENT_DATA_DURATION];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",
initValue:1,deferLogging:!1,updateFunction:function(b){this.pageCount=b[a.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:1}}},M_VIEWED_DIM_COUNT:new e("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new e("DimPageCount",
"ViewedVariationCountBeforeClick"),EXPAND_BUTTON_CLICK_COUNT:{stringVal:"ExpandButtonClickCount",initValue:0,deferLogging:!0,updateFunction:function(b){this.dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Expand Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,
value:this.currentValue}}},COLLAPSE_BUTTON_CLICK_COUNT:{stringVal:"CollapseButtonClickCount",initValue:0,deferLogging:!0,updateFunction:function(b){this.dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Collapse Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,
value:this.currentValue}}},EXPANDER_COUNT:{stringVal:"ExpanderCount",initValue:0,deferLogging:!0,updateFunction:function(b){this.dimDisplayType=b[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Expander Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},
IS_UNAVAILABLITY_PRESENT:{stringVal:"UnavailabilityPresent",initValue:NaN,deferLogging:!0,updateFunction:function(a){"undefined"===typeof this.currentValue&&(this.currentValue=0,0<a.noOfUnavailableVariations&&(this.currentValue=1),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("IsUnavailabilityPresent : "+this.currentValue))}},UNAVAILABILE_VARIATIONS_COUNT:{stringVal:"UnavailableVariations",initValue:NaN,deferLogging:!0,updateFunction:function(a){"undefined"==typeof this.currentValue&&
(this.currentValue=a.noOfUnavailableVariations,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Possible unavailable variations present are : "+this.currentValue))}},UNAVAILABLE_SWATCH_HOVER_COUNT:{stringVal:"UnavailableSwatchHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchHoverCount is incremented to : "+this.currentValue)}},UNAVAILABLE_SWATCH_PC_CLICK_COUNT:{stringVal:"UnavailableSwatchPCClick",
initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchPCClickCount is incremented to : "+this.currentValue)}},UNAVAILABLE_SWATCH_TABLET_CLICK_COUNT:{stringVal:"UnavailableSwatchTabletClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchTabletClickCount is incremented to : "+
this.currentValue)}},M_HISTORY_API_SUPPORTED:{stringVal:"HistoryAPISupported",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("History API is supported in the browser : "+this.currentValue)}},M_HISTORY_API_NOT_SUPPORTED:{stringVal:"HistoryAPINotSupported",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&
Twister.printConsoleLogs&&console.log("History API is not supported in the browser : "+this.currentValue)}}};this.logImpression=function(a,b){try{h.each(a.metricList,function(a,d){try{var u=z[d];u.updateFunction(b);z[d].deferLogging||l.logCounters(Array(c(u)))}catch(e){"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("metricUpdate failing for metric \x3d "+d)}})}catch(d){"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("logImpression failed")}};this.logFatal=
function(a,b){l&&l.logFatal(a,b)};this.logError=function(a,b){l&&l.logFatal(a,b)};this.logCounter=function(a,b){l.logCounter(a,b)};this.addCSMTag=function(a){x.ue&&x.ue.tag&&x.ue.tag(a)};this.consoleLog=function(a){l&&l.logFatal(a)};this.logPresenceOfUnavailability=function(a,b){a=a.num_total_variations;b=b.dimensionValuesData;for(var c=1,d=b.length,u=0;u<d;u++)c*=b[u].length;this.logImpression(this.eventTypes.TWISTER_UNAVAILABILITY_NOTIFIER,{noOfUnavailableVariations:c-a})};this.logUnavailableSwatchClick=
function(){this.logImpression(this.eventTypes.CLICK_NA,null);var a=this.eventTypes.UNAVAILABLE_SWATCH_PC_CLICK;Twister.isTabletWeb&&(a=this.eventTypes.UNAVAILABLE_SWATCH_TABLET_CLICK);this.logImpression(a,null)};this.getDataToUploadOnUnload=function(a){this.logImpression(this.eventTypes.PAGE_UNLOAD);var b=[];h.each(z,function(a,d){try{if(d.deferLogging){var u=c(d);u&&(h.isArray(u)?b=h.merge(u,b):b.push(u))}}catch(e){}});return b};this.getMetricCurrentValue=function(a){try{return z[a].hasOwnProperty("currentValue")?
z[a].currentValue:z[a].initValue}catch(b){return z[a].initValue}};l=new g(h,d,b,n);l.init()}});y.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state={};this.getState=function(){return this.state};this.setState=function(t,g){t&&g&&(this.state[t]=g)}}});y.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(t,g,a){"after_redraw"!=t&&"asin_select"!=t||"sims-widget"!=g&&"session-similarities"!=g&&"purchase-similarities"!=
g&&"buyxgety"!=g||(this.callbacks[g+"_feature_div"]=a)},registerFeature:function(){},registerFeatureConfig:function(){}}});y.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",function(t,g,a){function b(a){this.scope="dpPre"+a;this.data={}}new a("PrefetchMetrics");b.prototype._count=function(a,b){a=this.scope+a;var f;x.ue&&x.ue.count&&(f="undefined"!==typeof b?(f=ue.count(a,b))||b:(f=ue.count(a))||0);return f};b.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||
0)+1)};b.prototype._record=function(a,b,f){this.data[b]=this.data[b]||{};this.data[b][a]||(this.data[b][a]=f||(new Date).getTime(),"predicted"==a?this._incrementCounter("Predicted"):"selected"==a&&this.data[b].predicted?(a=this.data[b].selected-this.data[b].predicted,this.data[b].lookahead=a,this._incrementCounter("PredictedSelect"),this._count("LookAhead"+this._count("PredictedSelect"),a),this._count("LookAhead",a)):"selected"!=a||this.data[b].predicted||this._incrementCounter("UnpredictedSelect"))};
b.prototype.setCounter=function(a,b){this._count(a,b)};b.prototype.predicted=function(a,b){this._record("predicted",a,b)};b.prototype.selected=function(a,b){this._record("selected",a,b)};b._allInstances={};b.getInstance=function(a){if(!a)throw"Undefind scope. scope is a required parameter";b._allInstances[a]||(b._allInstances[a]=new b(a));return b._allInstances[a]};return b});y.when("A","twister-string-constants","twister-variations-data","parent-view","twister-view","twister-model","twister-model-new",
"twister-state","twister-availabilty-cache","twister-utils","evdd-utils","dp-js-logger","TwisterCore","twister-data-translator","twister-productization-view","view-util","detail-page-state-controller-view","hover-refresh-view","twister-dimension-subview-promise-handler").register("twister-controller",function(t,g,a,b,m,n,f,c,d,h,l,e,z,v,B,r,p,u,F){return function(w,k){var q=this;q.logger=new e(null,this);var C=v.getTranslatedData(k);q.twisterCore=function(a){var b=void 0;k[g.PRODUCTIZATION_ENABLED]&&
void 0!==a&&(b=new z(a));return b}(C);(function(){void 0!==q.twisterCore&&(q.productizationView=new B(q.twisterCore),q.hoverRefreshView=new u(q.twisterCore,k,e),F.getDimensionSubViewPromise("page-refresh-view").then(function(a){q.pageRefreshView=new a(q.twisterCore,k,e)}))})();k[g.IS_PAGE_ELIGIBLE_FOR_PRODUCTIZATION]=r.isViewsEligibleForMigration(k);q.twisterJSInitData=k;q.pageRefreshRefactor=k.pageRefreshRefactor;q.twisterVariationsData=new a(k,q.twisterCore);q.twisterAvailabilityCache=new d(q.twisterVariationsData,
k);q.initTwisterState=new c(k,q.twisterVariationsData,q.twisterAvailabilityCache);void 0!==q.twisterCore&&k[g.IS_PAGE_ELIGIBLE_FOR_PRODUCTIZATION]?(q.detailPageStateControllerView=new p(k,q.twisterCore),C=new b(q,k,q.twisterVariationsData,q.twisterAvailabilityCache,q.twisterCore)):C=new m(q,q.initTwisterState,k,q.twisterVariationsData,q.twisterAvailabilityCache);q.twisterView=C;y.register("desktop-twister",function(){return q.twisterCore});q.twisterModel=q.pageRefreshRefactor?new f(q,k,q.twisterVariationsData,
q.productizationView):new n(q,w,k,q.twisterVariationsData,q.twisterAvailabilityCache);q.jsInteractionEnabledTime=Date.now();q.logger.logPresenceOfUnavailability(k,q.twisterVariationsData);q.onInitializeTwister=function(){q.twisterView.onInitializeTwister()};q.populateEVDD=function(a){var b=q.twisterView,c=q.twisterVariationsData.asinToDimIndexMapData,k=q.twisterModel.twisterState.getMaster();a&&b.isAllViewsInitialized().then(function(){(new l).PopulateEVDD(a,b,c,k)})};q.handleClick=function(a){q.divMetaData=
a;q.logger.logImpression(q.logger.eventTypes.CLICK,{divMetaData:a});var b=q.initTwisterState.getCurrentDimCombID(),c=h.reconstructCombinationWithDimValue(b,a.dimIndex,a.dimValueIndex);x.newTwisterInteractionStartTime=new Date;h.isSwatchSelected(a,q.twisterVariationsData)||b===c||(q.enableMouseOut=0,q.twisterModel.handleClick(a),q.twisterAvailabilityCache.isDimCombinationAvailable(c)||q.logger.logUnavailableSwatchClick())};q.handleExternalViewClick=function(a,b){try{q.handleClick(a)}catch(c){(new e(b,
this)).logFatal(c,{message:"[Failed to hand over click event of external view]"})}};q.handleMouseOver=function(a){if("undefined"!=typeof touchDeviceDetected&&touchDeviceDetected)return q.handleClick(a),!0;q.logger.logImpression(q.logger.eventTypes.HOVER,{divMetaData:a});q.enableMouseOut=1;q.twisterModel.handleMouseOver(a);return!0};q.handleExternalViewMouseOver=function(a,b){try{q.handleMouseOver(a)}catch(c){(new e(b,this)).logFatal(c,{message:"[Failed to hand over mouse over event of external view]"})}};
q.handleMouseOut=function(a,b,c){1===q.enableMouseOut&&q.twisterModel.handleMouseOut(a,b,c)};q.handleExternalViewMouseOut=function(a,b,c,k){try{q.handleMouseOut(a,b,c)}catch(u){(new e(k,this)).logFatal(u,{message:"[Failed to hand over mouse out event of external view]"})}};q.handleDropdownOnChange=function(a,b){x.newTwisterInteractionStartTime=new Date;q.logger.logImpression(q.logger.eventTypes.CLICK,{divMetaData:b});q.twisterModel.twisterState.setPreHoverData(b);q.twisterModel.handleDropdownChange(b)};
q.registerExternalView=function(a,b){q.twisterModel.registerExternalView(a,b)}}});y.when("3p-promise").register("twister-dimension-subview-promise-handler",function(t){var g={};return{getDimensionSubViewPromise:function(a){if(g[a])return g[a].viewConstructor;g[a]={viewConstructor:null};var b=new t(function(b,n){g[a].resolve=b});return g[a].viewConstructor=b},registerDimensionSubView:function(a,b){g[a]?g[a].resolve(b):g[a]={viewConstructor:t.resolve(b)}}}});y.when("twister-dimension-subview-promise-handler",
"twister-string-constants").register("twister-dimension-view-promise-factory",function(t,g){function a(a,m,n){this.dimCount=n;this.dimensionDisplayType=a[g.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][n];this.dimensionDisplaySubType=a[g.INIT_DATA_DIMENSIONS_DISPLAY_SUB_TYPE_MAP][n];this.dimName=a[g.INIT_DATA_DIMENSIONS_MAP][n];this.dimensionsMap=a[g.INIT_DATA_DIMENSIONS_MAP];this.dimensionDisplayString=a[g.INIT_DATA_DIMENSIONS_DISPLAY][n];this.dimensionValuesData=m.dimensionValuesData[n];this.displayConfigStylesData=
m.displayConfigStylesData[this.dimensionDisplayType];this.twisterVariationsData=m;this.isIconPresentForDimensionValue=function(){var f=[];if("undefined"!==typeof a[g.DIMENSION_VALUE_HAS_ICON])f=a[g.DIMENSION_VALUE_HAS_ICON][n];else for(i=0;i<m.dimensionValuesData[n].length;i++)f.push(0);return f}}return{registerDimensionSubView:function(a,m){t.registerDimensionSubView(a,m)},getDimensionSubViewPromise:function(b,m,n,f,c,d){return t.getDimensionSubViewPromise(b[g.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][n]).then(function(h){var l=
new a(b,m,n),e={};e[g.STRING_DIM_ORDER]=l.dimCount;e[g.STRING_DIM_NAME]=l.dimName;e[g.STRING_DIMENSIONS_MAP]=l.dimensionsMap;e[g.STRING_DIMENSION_DISPLAY_STRING]=l.dimensionDisplayString;e[g.STRING_DIMENSION_VALUES_DATA]=l.dimensionValuesData;e[g.STRING_DISPLAY_CONFIG_STYLES_DATA]=l.displayConfigStylesData;e[g.STRING_TWISTER_CONTROLLER_HANDLE]=f;e[g.STRING_TWISTER_INITIAL_STATE_KEY]=c;e[g.STRING_TWISTER_AVAILABILITY_CACHE]=void 0!=c?c.twisterAvailabilityCache:void 0!=d?d.twisterAvailabilityCache:
void 0;e[g.STRING_TWISTER_VARIATION_DATA]=l.twisterVariationsData;e[g.STRING_IS_SLOTS_ENABLED]=Twister[g.STRING_IS_SLOTS_ENABLED]&&Twister[g.STRING_IS_SLOTS_ENABLED][l.dimCount];e[g.DIMENSION_VALUE_HAS_ICON]=l.isIconPresentForDimensionValue();e[g.DIMENSION_SUB_TYPE]=l.dimensionDisplaySubType;e[g.PRODUCTIZED_PARENT_VIEW]=d;e[g.PRODUCTIZED_VIEW_UTIL]=d?d.viewUtil:void 0;return new h(b,e)})}}});y.when("A","twister-shelf","twister-counter","twister-vodd","twister-beaconized-evdd","twister-native-evdd",
"twister-dimension-views-swatch","twister-dimension-views-dropdown","twister-dimension-views-singleton","twister-string-constants","view-util").register("twister-dimension-view-factory",function(t,g,a,b,m,n,f,c,d,h,l){function e(a,b,c){this.dimCount=c;this.dimensionDisplayType=a.dimensionsDisplayType[c];this.dimensionDisplaySubType=a.dimensionsDisplaySubType[c];this.dimName=a.dimensions[c];this.dimensionsMap=a.dimensions;this.dimensionDisplayString=a.dimensionsDisplay[c];this.dimensionValuesData=
b.dimensionValuesData[c];this.displayConfigStylesData=b.displayConfigStylesData[this.dimensionDisplayType];this.twisterVariationsData=b;this.isIconPresentForDimensionValue=function(){var d=[];if("undefined"!==typeof a.isIconPresentForDimensionValue)d=a.isIconPresentForDimensionValue[c];else for(i=0;i<b.dimensionValuesData[c].length;i++)d.push(0);return d}}var z=t.$;return{getDimensionSubViewObject:function(l,B,r,p,u,F){r=new e(l,B,r);B={};B[h.STRING_DIM_ORDER]=r.dimCount;B[h.STRING_DIM_NAME]=r.dimName;
B[h.STRING_DIMENSIONS_MAP]=r.dimensionsMap;B[h.STRING_DIMENSION_DISPLAY_STRING]=r.dimensionDisplayString;B[h.STRING_DIMENSION_VALUES_DATA]=r.dimensionValuesData;B[h.STRING_DISPLAY_CONFIG_STYLES_DATA]=r.displayConfigStylesData;B[h.STRING_TWISTER_CONTROLLER_HANDLE]=p;B[h.STRING_TWISTER_INITIAL_STATE_KEY]=u;B[h.STRING_TWISTER_AVAILABILITY_CACHE]=void 0!=u?u.twisterAvailabilityCache:void 0!=F?F.twisterAvailabilityCache:void 0;B[h.STRING_TWISTER_VARIATION_DATA]=r.twisterVariationsData;B.isSlotsEnabled=
z.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[r.dimCount]:void 0;B.isIconPresentForDimensionValue=r.isIconPresentForDimensionValue();B.dimensionDisplaySubType=r.dimensionDisplaySubType;B[h.PRODUCTIZED_PARENT_VIEW]=F;B[h.PRODUCTIZED_VIEW_UTIL]=F?F.viewUtil:void 0;a:switch(r.dimensionDisplayType){case h.TWISTER_DIMENSION_VIEW_SWATCH:p=f;break;case h.TWISTER_DIMENSION_VIEW_DROPDOWN:p=c;break;case h.TWISTER_DIMENSION_VIEW_SINGLETON:p=d;break;case h.TWISTER_DIMENSION_VIEW_EVDD:p=z("html").hasClass("a-lt-ie8")?
n:m;break;case h.TWISTER_DIMENSION_VIEW_VODD:p=b;break;case h.TWISTER_DIMENSION_VIEW_COUNTER:p=a;break;case h.TWISTER_DIMENSION_VIEW_SHELF:p=g;break;default:p=void 0;break a}return new p(l,B)}}});y.when("A").execute(function(){"function"===typeof uet&&uet("bb","clickToTwister",{wb:1})});y.when("twisterModule").execute(function(t){"function"===typeof uex&&"function"===typeof uet&&(uet("be","clickToTwister",{wb:1}),uet("be","TwisterAUIWait",{wb:1}),uex("ld","clickToTwister",{wb:1}),uex("ld","TwisterAUIWait",
{wb:1}))});y.when("A","twister-string-constants","twister-js-init-mason-data","twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module","dp-js-logger","twister-common-constants").execute("twister-init",function(t,g,a,b,m,n,f,c,d){function h(){"undefined"!=typeof amznJQ?amznJQ.declareAvailable("newTwister"):y.register("newTwister",function(){return x.newTwister});y.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});
"undefined"!=typeof amznJQ?(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf")):(y.register("pageRefreshJS",function(){return x.pageRefreshJS}),y.register("dpf",function(){return x.pageRefreshJS}))}function l(a){var b={};a.extend(b,{ajaxReadyState:{NONE:-1,UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,OK:200,
TIMEOUT:408},shouldReload:function(a){return!1}});x.AJAXFlushUtils=b}function e(a){function b(a,c,k){var u=[];if(c==k)u.push(""),a=a[c],t.$.isArray(a)?t.each(a,function(a,b){u.push(a)}):u.push(a);else{var d=Math.floor((c+k)/2);c=b(a,c,d);var q=b(a,d+1,k);t.each(c,function(a,b){t.each(q,function(b,c){u.push(""===a?b:""===b?a:a+":"+b)})})}return u}var c=[],u=d.FAMILY_SIZE_BUCKET_LIMITS,e=d.DEFAULT_SELECTION_TAG,w=[],k=!0,q,h;a.dimensions&&(q="variation_dimension:"+a.dimensions.length,t.each(a.dimensions,
function(a,b){v.addCSMTag(a)}));if(a.dimToAsinMapData){var f=0,l;for(l in a.dimToAsinMapData)a.dimToAsinMapData.hasOwnProperty(l)&&f++;v.logCounter("numberOfChildAsins",f);for(l=1;l<u.length;l++)if(f<=u[l]){h="family_size_bucket:"+u[l-1]+"-"+u[l];break}else l==u.length-1&&(h="family_size_bucket:gt"+u[l])}a.dimensionsDisplayType&&t.each(a.dimensionsDisplayType,function(b,c){-1===w.indexOf(b)&&w.push(b);b===g.TWISTER_DIMENSION_VIEW_SWATCH&&a.dimensionsDisplaySubType&&(b="s"+a.dimensionsDisplaySubType[c],
-1===w.indexOf(b)&&w.push(b))});a.dimensionSelectionData&&t.each(a.dimensionSelectionData,function(a,b){a.isSelected||(k=!1)});q&&c.push(q);h&&c.push(h);w&&c.push(w);k&&e&&c.push(e);(function(a){t.each(a,function(a,b){a&&v.addCSMTag(a)})})(b(c,0,c.length-1))}y.declare("twisterPhase1StartTime",+new Date);x.Twister={};var z=x.Twister;z.$=t.$;z.DimensionViews={};var v=new c("dpTwister");z.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};z.isIE8=function(){var a=
z.A.$;return a("html").hasClass("a-lt-ie9")};(function(){z.A=t;if(!t.$.isEmptyObject(b)){var c=b.updateDivLists;z.dpEnvironment=b.dpEnvironment;z.isInstaTwisterEnabled=!0;z.productTypeName=a.productTypeName;z.isImmersiveViewEnabled=b.isImmersiveViewEnabledOnDim?b.isImmersiveViewEnabledOnDim:b.isImmersiveViewEnabled;z.isSlotsEnabled=b.isSlotsEnabled;z.isPWBadgeEnabled=b.isPWBadgeEnabled?b.isPWBadgeEnabled:!1;z.isImmersiveViewEnabledOnPage=b.isImmersiveViewEnabled;z.isImmersiveExperience=b.isImmersiveExperience?
b.isImmersiveExperience:b.isImmersiveViewEnabled;z.multiDimensionWeblabEnabled=b.multiDimensionWeblabEnabled?b.multiDimensionWeblabEnabled:!1;z.immersivePartialStateMessage=b.immersivePartialStateMessage?b.immersivePartialStateMessage:"";z.immersiveFullySelectedStateMessage=b.immersiveFullySelectedStateMessage?b.immersiveFullySelectedStateMessage:"";z.immersiveBannersPresent=b.immersiveBannersPresent?b.immersiveBannersPresent:!1;z.globalAjaxParameters={};z.isTabletWeb=b.isTabletWeb;z.isAssemblyVariationsEnabled=
b.isAssemblyVariationsEnabled?b.isAssemblyVariationsEnabled:!1;var d=a.contextMetaData,p=d.full,u=d.master,F=d.parent,d=d.partial;a.dimensionSelectionData=b.dimensionSelectionData;b.dimensionsDisplayType?a.dimensionsDisplayType=b.dimensionsDisplayType:(v.logCounter("dpxDisplayTypePropertyUndefined",1),a.dimensionsDisplayType||v.logCounter("masonDisplayTypePropertyUndefined",1));a.dimensionsDisplaySubType=b.dimensionsDisplaySubType?b.dimensionsDisplaySubType:[];a.ajaxUrlParams=b.ajaxUrlParams;a.displayTypeProperties=
b.displayTypeProperties?b.displayTypeProperties:[];a.maxSwatchesForImmersiveView=b.maxSwatchesForImmersiveView?b.maxSwatchesForImmersiveView:[];a[g.INIT_DATA_PW_ENABLED_DIMENSION_MAP]=b[g.INIT_DATA_PW_ENABLED_DIMENSION_MAP]?b[g.INIT_DATA_PW_ENABLED_DIMENSION_MAP]:[];a.dimensionsDisplayType&&"counter"===a.dimensionsDisplayType[0]&&"undefined"===typeof b.displayTypeProperties[0].expandedViewEnabled&&(a.useCounterConfig=!0,a.expandedViewEnabled=b.expandedViewEnabled?b.expandedViewEnabled:[],a.minAsinForExpandedView=
b.minAsinForExpandedView?b.minAsinForExpandedView:[],a.minAsinForExpandedScroll=b.minAsinForExpandedScroll?b.minAsinForExpandedScroll:[]);if("undefined"!==typeof b.twisterUpdateURLAppend){var w=a.twisterUpdateURLInfo,k=w.immutableURLPrefix,q=w.immutableParams,C=b.twisterUpdateURLAppend.immutableParams,D;for(D in C)if("function"!==typeof C.hasOwnProperty||C.hasOwnProperty(D))k+=(-1==k.indexOf("?")?"?":"\x26")+D+"\x3d"+C[D],q[D]=C[D];w.immutableURLPrefix=k;z.globalAjaxParameters=C}a[g.PRODUCTIZATION_ENABLED]=
a[g.PRODUCTIZATION_ENABLED]&&"1"==a[g.PRODUCTIZATION_ENABLED]?!0:!1;a.dimToAsinMapData=b.dimensionToAsinMap;a.asinToDimIndexMapData=b.asinToDimensionIndexMap;a.dimensionValuesData=b.dimensionValuesData;a.variation_values=b.variationValues;a.asin_variation_values=b.asinVariationValues;a.reactId=b.reactId;a.currentDimCombID=b.currentDimensionCombinationId;a.selected_variation_values=b.selectedVariationValues;a.dimensionHierarchyData=b.dimensionHierarchyData;a.dimensionDisplayMap=a.dimensionDisplayMap;
a.topHierarchicalDimensionIndex=b.topHierarchicalDimensionIndex;a.hierarchicalPivoting=b.hierarchicalPivoting;a.isIconPresentForDimensionValue=b.isIconPresentForDimensionValue;a.singletonDimensionKeys=b.singletonDimensionKeys;a["use-early-twister-init"]&&(a.current_asin=b.currentAsin,a.parent_asin=b.parentAsin,a.deletedLandingAsinInfo=b.deletedLandingAsinInfo,a.num_total_variations=b.num_total_variations,a.dimensions=b.dimensions,a.unselectedDimCount=b.unselectedDimCount,a.selected_variations=b.selected_variations,
a.dimensionValuesDisplayData=b.dimensionValuesDisplayData,a.prirotizeReqPrefetch=b.prioritizeReqPrefetch,a.num_variation_dimensions=b.num_variation_dimensions,a.num_total_variations=b.num_total_variations,a.dimensionsDisplay=b.dimensionsDisplay,a.variationDisplayLabels=b.variationDisplayLabels);null!=c.full&&(p.elementList=null!=p.elementList?c.full.concat(p.elementList):c.full);null!=c.master&&(u.elementList=null!=u.elementList?c.master.concat(u.elementList):c.master);null!=c.parent&&(F.elementList=
null!=F.elementList?c.parent.concat(F.elementList):c.parent);null!=c.partial&&(d.elementList=null!=d.elementList?c.partial.concat(d.elementList):c.partial)}c=a.isTablet;x.twisterInitPrefetchMode=a.twisterInitPrefetchMode;x.jqupgrade=a.jqupgrade;z.useDropdownThumbnail=c;z.useVariationsOverlay=c;z.showErrorMessageOnFailure=c;z.remainingAjaxCalls=0;z.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";z.isLoggingEnabled=a.isLoggingEnabled;z.printConsoleLogs=a.printConsoleLogs;
z.deviceType=a.deviceType;z.useAui=1;z.useAuiAjax=1;c=a.measurement.atf.marker;z.atfMarkerCount=a.measurement.atf.count;p=a.measurement.cf.marker;z.cfMarkerCount=a.measurement.cf.count;z.disableJsInteractions=a.disableJsInteractions?a.disableJsInteractions:!1;z.cfImageLongPollTag=a.measurement.cf.longPollImageTag;z.cfHtmlLongPollTag=a.measurement.cf.longPollHtmlTag;c=new n(t.$,a.contextMetaData,{atfMarker:c,cfMarker:p,logChannel:"twister"},a.loadingBarHtml,a.loadingBarHtml2);x.twisterController=new m(c,
a);c={};c.dimensionsList=a.dimensions;c.dimensionValuesList=a.dimensionValuesData;c.dimensionCombinationToASINMap=a.dimToAsinMapData;c.scopeSuffix="twister";c.globalAjaxParameters=z.globalAjaxParameters;z.dimensionalSummaryModule=new f(c);e(a);l(t.$);h();if("function"===typeof x.twisterController.onInitializeTwister)x.twisterController.onInitializeTwister()})();return z});y.when("A","twister-state","twister-utils","detail-page-framework","twister-string-constants","dp-js-logger").register("twister-model",
function(t,g,a,b,m,n){return function(f,c,d,h,l){function e(a,b,c){b=0;try{for(;b<p.externalViews.length;)p.externalViews[b].updateView(a,p.twisterState,c),b++}catch(k){(new n(externalViewNames[b])).logFatal(k,{message:"[Failed to update external view from TwisterModel]"})}}function m(a){var b,c,k,d,e,h=p.twisterState.parentASIN,f;a?(b=p.twisterState.reactId,c=p.twisterState.hoveredReactId,k=p.twisterState.unselectedDimCount,d=0<=p.twisterState.hoveredDimCombID.search(/X/)?1:0,e=p.twisterState.hoveredAsin):
(b=p.twisterState.previousReactId,c=p.twisterState.reactId,k=p.twisterState.previousPartialState,d=p.twisterState.partialState,e=p.twisterState.getCurrentASIN());f=p.twisterVariationsData.asinToDimIndexMapData[e];p.twisterVariationsData.useMS&&f&&e&&g(p.fetchMasterIDList,"m"+f[0],e,0,a);0===d?(g(p.fetchFullIDList,e,e,0,a),p.prioritizeReqPrefetch=0):0===k?(g(p.fetchPartialIDList,c,e,0,a),g(p.fetchParentIDList,h,h,0,a),p.prioritizeReqPrefetch=1):b!==c&&g(p.fetchPartialIDList,c,e,0,a)}function g(a,b,
c,k,d){d||(d=0);1!=p.idsList[b]&&b&&c&&(!p.prefetchFixWeblab||c!==p.twisterState.parentASIN||"full"!==a.type)&&a&&(p.idsList[b]=1,a.data.push({id:b,asin:c,isPrefetch:k,isHover:d}))}function B(a){a||(a=0);var b=[];0<p.fetchParentIDList.data.length&&b.push({type:"parent",idList:p.fetchParentIDList.data});0<p.fetchPartialIDList.data.length&&b.push({type:"partial",idList:p.fetchPartialIDList.data});0<p.fetchFullIDList.data.length&&b.push({type:"full",idList:p.fetchFullIDList.data});0<p.fetchMasterIDList.data.length&&
b.push({type:"master",idList:p.fetchMasterIDList.data});0<b.length&&(a||p.pageRefresh.measurement.stampCustomMetrics("ns",p.twisterState.currentASIN),p.pageRefresh.react(b,a));p.fetchParentIDList.data=[];p.fetchPartialIDList.data=[];p.fetchFullIDList.data=[];p.fetchMasterIDList.data=[];p.idsList={};p.prefetchCount=0}function r(b,c){for(var d={},k,e=0;e<c.length;e++)k=null,p.twisterState.isDimSelected(e)&&(k=c[e],"(Please Select)"===k&&(k=null)),null!==k&&(k=a.htmlUnescape(k)),d[p.viewHandle.dimensionsMap[e]]=
k;DetailPage.StateController.setState(b+"_variations",d)}var p=this;p.twisterControllerHandle=f;p.pageRefresh=c;p.twisterJSInitData=d;p.twisterVariationsData=h;p.twisterAvailabilityCache=l;p.twisterState;p.prefetchCount=0;p.preHoverClass="";p.fetchParentIDList={type:"parent",data:[]};p.fetchPartialIDList={type:"partial",data:[]};p.fetchFullIDList={type:"full",data:[]};p.fetchMasterIDList={type:"master",data:[]};p.idsList={};p.prefetchFixWeblab=0;p.prioritizeReqPrefetch=0;p.externalViews=[];p.externalViewNames=
[];p.registerExternalView=function(a,b){try{p.externalViews.push(a),p.externalViewNames.push(b)}catch(c){(new n(b)).logFatal(c,{message:"[Failed to register external view with TwisterModel]"})}};p.handleMouseOver=function(b){var c;null!==b&&(p.twisterState.updateStateOnMouseOver(b),!a.isSwatchSelected(b,p.twisterVariationsData)||p.twisterVariationsData.useMS)&&(c=p.twisterVariationsData.getDimensionValuesDisplayData(p.twisterState.hoveredAsin),p.twisterVariationsData.useMS||r("hovered",c),this.viewHandle.updateView(b,
p.twisterState,"mouseOver"),e(b,p.twisterState,"mouseOver"),m(1),B(1))};p.handleDropdownChange=function(a){p.handleClick(a)};p.handleClick=function(c,d,h){var k=h?"mouseOut":"click",q,f,l=0;q=d;f=p.twisterState.getCurrentASIN();p.twisterVariationsData.useMS&&c&&a.isSwatchSelected(c,p.twisterVariationsData)&&(l=1);h||(h=0);if(null!==q||null!==c)if(q=p.twisterState.updateStateOnClick(c,d,k)){q=p.twisterState.getCurrentASIN();if(!h&&f!==q&&!p.twisterState.partialState&&b.callbacks["sims-widget_feature_div"])b.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());
p.twisterState.partialState||h||p.pageRefresh.measurement.start(q);f=p.twisterVariationsData.getDimensionValuesDisplayData(q);r("selected",f);r("hovered",f);p.twisterState.partialState||h||p.pageRefresh.measurement.stampCustomMetrics("bb",q);p.viewHandle.updateView({},p.twisterState,k);e(c,p.twisterState,k);p.twisterState.partialState||h||p.pageRefresh.measurement.stampCustomMetrics("be",q);1!==l&&(m(h),B(h))}};p.handleMouseOut=function(b,c,d){c=p.twisterState.getCurrentASIN();!p.twisterVariationsData.useMS&&
a.isSwatchSelected(b,p.twisterVariationsData)||p.handleClick(null,c,1)};(function(){var a;p.twisterJSInitData&&(p.twisterState=p.twisterControllerHandle.initTwisterState,p.MAX_PREFETCH_COUNT=p.twisterJSInitData.prefetchCount,p.prioritizeReqPrefetch=p.twisterJSInitData.prioritizeReqPrefetch,p.prefetchFixWeblab=p.twisterJSInitData.prefetchFixWeblab,a=p.twisterState.getCurrentASIN(),a=p.twisterVariationsData.getDimensionValuesDisplayData(a),p.viewHandle||(p.viewHandle=p.twisterControllerHandle.twisterView),
r("selected",a),r("hovered",a));p.pageRefresh.init(p.twisterJSInitData.storeID,p.twisterJSInitData.productGroupID)})()}});y.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller","accessibility-helper","dp-js-logger").register("twister-model-new",function(t,g,a,b,m,n,f,c){return function(a,h,l,e){function g(a,b,k){b=0;try{for(;b<u.externalViews.length;)u.externalViews[b].updateView(a,u.twisterState,k),b++}catch(d){(new c(externalViewNames[b])).logFatal(d,
{message:"[Failed to update external view from TwisterModel]"})}}function v(a,c,k,d){function l(a){var b=[];t.each(a.variation_label_order,function(c){a.selected_variations[c]&&b.push(a.variation_display_labels[c]+" \x3d "+a.selected_variations[c])});return u.twisterJSInitData[m.STRING_ACCESSIBILITY_CURRENT_SELECTION]+b.join(" , ")}if(c&&!u.twisterVariationsData.useMS&&b.isSwatchSelected(c,u.twisterVariationsData))return!1;if(u.twisterState.updateStateOnClick(c,k,d,a)){k=u.twisterVariationsData.getDimensionValuesDisplayData(k);
r(d);p("selected",k);p("hovered",k);u.viewHandle.updateView(c,u.twisterState,d);g(c,u.twisterState,d);switch(d){case m.EVENT_TYPE_DROPDOWN_CHANGE:case m.EVENT_TYPE_CLICK:c=l(DetailPage.StateController.getState()),f.announceText(c)}Twister.disableJsInteractions?d!==m.EVENT_TYPE_CLICK&&d!==m.EVENT_TYPE_DROPDOWN_CHANGE||n.reloadPage(a):d!==m.EVENT_TYPE_CLICK&&d!==m.EVENT_TYPE_DROPDOWN_CHANGE||!h[m.PRODUCTIZATION_ENABLED]?n.updatePage(a,d):(d=u.twisterState.getProductizedTwisterSelection(a.newDimCombID),
e&&e.handleClick(d,a));return!0}}function B(a,b,k,d,e){if(a&&1<u.twisterVariationsData.dimensionsMap.length){u.viewHandle.updateViewAfterTwisterUpdate(k,u.twisterState,e);a=0;try{for(;a<u.externalViews.length;)u.externalViews[a].updateViewAfterTwisterUpdate(k,u.twisterState,e),a++}catch(h){(new c(externalViewNames[a])).logFatal(h,{message:"[Failed to update external view after twister update from TwisterModel]"})}}}function r(a){if(a==m.EVENT_TYPE_CLICK||a==m.EVENT_TYPE_DROPDOWN_CHANGE){a=u.twisterState.getCurrentDimCombID().split("_");
for(var b={},c=0,d=u.twisterState.dimensionSelectionData.length;c<d;c++)b[u.twisterState.twisterJSInitData.dimensions[c]]="1"==u.twisterState.dimensionSelectionData[c].isRequired&&"0"==u.twisterState.dimensionSelectionData[c].isSelected&&"X"===a[c]?"-1":a[c];DetailPage.StateController.setState("selected_variation_values",b)}}function p(a,b){for(var c={},d,e=0;e<b.length;e++)d=null,u.twisterState.isDimSelected(e)&&(d=b[e],"(Please Select)"===d&&(d=null)),c[u.viewHandle.dimensionsMap[e]]=d;DetailPage.StateController.setState(a+
"_variations",c)}var u=this;u.twisterControllerHandle=a;u.twisterJSInitData=h;u.twisterVariationsData=l;u.pageRefresh=n.page;u.twisterState;u.externalViews=[];u.externalViewNames=[];u.registerExternalView=function(a,b){try{u.externalViews.push(a),u.externalViewNames.push(b)}catch(d){(new c(b)).logFatal(d,{message:"[Failed to register external view with TwisterModel]"})}};u.prefetch=function(a,b){a=u.twisterState.getRequestContext(a,!0);n.prefetchPage(a,b)};u.handleMouseOver=function(a){if(!a||u.twisterVariationsData.useMS||
!b.isSwatchSelected(a,u.twisterVariationsData)){var c=u.twisterState.getHoverContext(a);u.twisterState.updateStateOnMouseOver(a,c);var d=u.twisterVariationsData.getDimensionValuesDisplayData(c.newAsin);u.twisterVariationsData.useMS&&(!a||a.dimDisplayType!==m.TWISTER_DIMENSION_VIEW_VODD&&a.dimDisplayType!==m.TWISTER_DIMENSION_VIEW_SHELF&&a.dimDisplayType!==m.TWISTER_DIMENSION_VIEW_COUNTER)||p("hovered",d);DetailPage.StateController.setState("hovered_asin",c.newAsin);this.viewHandle.updateView(a,u.twisterState,
m.EVENT_TYPE_MOUSEOVER);g(a,u.twisterState,m.EVENT_TYPE_MOUSEOVER);Twister.disableJsInteractions||n.updatePage(c,m.EVENT_TYPE_MOUSEOVER)}};u.handleClick=function(a){var b=u.twisterState.getRequestContext(a),c=v(b,a,b.childAsin,m.EVENT_TYPE_CLICK);B(c,b,a,b.childAsin,m.EVENT_TYPE_CLICK)};u.handleMouseOut=function(a){a=u.twisterState.getCurrentContext(a);v(a,null,a.currentAsin,m.EVENT_TYPE_MOUSEOUT)};u.handleDropdownChange=function(a){var b=u.twisterState.getRequestContext(a);v(b,a,b.childAsin,m.EVENT_TYPE_DROPDOWN_CHANGE);
B(b,a,b.childAsin,m.EVENT_TYPE_DROPDOWN_CHANGE)};(function(){if(u.twisterJSInitData){u.viewHandle||(u.viewHandle=u.twisterControllerHandle.twisterView);u.twisterState=u.twisterControllerHandle.initTwisterState;var a=u.twisterState.getCurrentASIN(),a=u.twisterVariationsData.getDimensionValuesDisplayData(a);p("selected",a);p("hovered",a);n.init(h);t.on("dp:twister:prefetch",function(a,b){u.prefetch(a,b)})}})()}});y.when("A","twister-utils","detail-page-state-controller","twister-string-constants").register("twister-state",
function(t,g,a,b){return function(m,n,f){function c(a){a.mType===b.MTYPE_PARENT&&a.relatedContext&&(a=a.relatedContext);return a}function d(a,c,d){var k=p.extend(!0,{},a);k.mType=b.MTYPE_MASTER;k.id="m"+d[0];k.relatedContext=a;k.doNotAbort=!0;k.url=h(k,c,[]);k.uniqueID=e(k,[]);return k}function h(a,b,c){var d=r.twisterJSInitData.twisterUpdateURLInfo,e=d.immutableURLPrefix,h=d.immutableParams,d=d.mutableParams,f=r.twisterJSInitData.contextMetaData[a.mType].mTypeSpecificURLParams;keyItr=0;f=p.extend(!0,
{},d,f);if(null!=c)for(var m=0,g=c.length;m<g;m++){var n=c[m];if(!h.hasOwnProperty(n.key)){var v=n.key,z=n.value;f[v]=z;n.isPersistent&&(d[v]=z)}}for(var B in f)null!=f[B]&&(e+="\x26"+B+"\x3d"+f[B]);e+="\x26asinList\x3d"+a.newAsin+"\x26isFlushing\x3d2\x26dpEnvironment\x3d"+Twister.dpEnvironment+"\x26id\x3d"+a.id+"\x26mType\x3d"+a.mType;b&&(e+="\x26prefetchRequest\x3d1");l()&&(e+="\x26isTryState\x3dtrue");return e}function l(){var a=!1,b=t.state("pwState");b&&(a=b.isTryState);return a}function e(a,
b){var c="",d=a.mType,e=[],h=p.extend(!0,{},r.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(null!=b)for(var f=0,m=b.length;f<m;f++){var n=b[f];h[n.key]=n.value}for(var g in h)h.hasOwnProperty(g)&&e.push(g);e.sort();f=0;for(b=e.length;f<b;f++)m=e[f],null!=m&&null!=h&&(c+=m+"\x3d"+h[m]+"\x26");c+="mType\x3d"+d+"\x26id\x3d"+a.id;l()&&(c+="\x26isTryState\x3dtrue");return c}function z(a){var c=a[b.STRING_DIM_INDEX],d=a[b.STRING_DIM_VALUE_INDEX];a=r.getCurrentDimCombID().split("_");a[c]=-1===
d?"X":d;a=a.join("_");return r.twisterAvailabilityCache.gAsinToRender(a,c)}function v(a,c){var d=r.getCurrentDimCombID().split("_"),k=d.length,e=r.twisterVariationsData.asinToDimIndexMapData[a];a=-1;var h;if(e)e=e.slice(0);else for(e=[],h=0;h<k;h++)e[h]="X";null!==c&&void 0!==c&&(a=c[b.STRING_DIM_INDEX]);for(var f=0;f<k;f++)(h=r.dimensionSelectionData[f][b.STRING_IS_REQUIRED])&&f!==parseInt(a)&&e[f]!=d[f]&&(e[f]="X",r.sizeSwatch&&0!=r.partialState&&(r.dimensionSelectionData[f][b.STRING_IS_SELECTED]=
0)),-1!==parseInt(a)&&-1===parseInt(c[b.STRING_DIM_VALUE_INDEX])&&(e[a]="X");return e.join("_")}function B(a,c){a=a.split("_");for(var d=0;d<r.dimensionSelectionData.length;d++)1===r.dimensionSelectionData[d][b.STRING_IS_REQUIRED]&&0!==c&&(a[d]="X");return a.join("_")}var r=this,p=t.$;r.twisterJSInitData=m;r.twisterVariationsData=n;r.twisterAvailabilityCache=f;r.parentASIN="";r.currentASIN="";r.dimensionSelectionData={};r.unselectedDimCount=-1;r.master="";r.currentDimCombID="";r.preHoverClass="";
r.hoveredReactId="";r.hoveredAsin="";r.hoveredDimCombID="";r.partialState="";r.previousPartialState="";r.previousReactId="";r.previousAsin="";r.sizeSwatch=!1;r.setMaster=function(a){r.master=a};r.getMaster=function(){return r.master};r.getCurrentASIN=function(){return r.currentASIN};r.setCurrentASIN=function(a){a&&(r.currentASIN=a)};r.getCurrentDimCombID=function(){return r.currentDimCombID};r.setCurrentDimCombID=function(a){a&&(r.currentDimCombID=a)};r.isDimSelected=function(a){return 1===r.dimensionSelectionData[a][b.STRING_IS_SELECTED]};
r.setPreHoverData=function(a){r.useMS||(r.preHoverClass=g.getAttachedClass(a,r.twisterVariationsData.dimensionsMap[a[b.STRING_DIM_INDEX]]))};r.updateStateOnMouseOver=function(a,c){var d,e;a&&"0"===a[b.STRING_DIM_INDEX]&&r.setMaster(a[b.STRING_DIM_VALUE_INDEX]);d=c&&c.childAsin||z(a);e=r.unselectedDimCount;if(""===d){if(0>=e)return;d=r.getCurrentASIN()}r.hoveredAsin=d;d=c&&c.newDimCombID||v(r.hoveredAsin,a);r.hoveredDimCombID=d;e=0<=d.search(/X/)?1:0;c=c&&c.reactID||B(d,e);r.hoveredReactId=c;r.setPreHoverData(a)};
r.updateStateOnClick=function(a,c,d,e){var h;r.previousAsin=r.getCurrentASIN();c=c||e&&e.childAsin||z(a);a&&a[b.STRING_DIM_INDEX]&&"0"===a[b.STRING_DIM_INDEX]&&r.setMaster(a[b.STRING_DIM_VALUE_INDEX]);h=r.unselectedDimCount;r.previousPartialState=h;if(""===c){if(0>=h)return!1;c=r.getCurrentASIN()}h=e&&e.newDimCombID||v(c,a);if(b.EVENT_TYPE_CLICK===d||b.EVENT_TYPE_DROPDOWN_CHANGE===d){var f=a[b.STRING_DIM_INDEX];d="undefined"!==typeof r.preHoverClass&&(-1!==r.preHoverClass.indexOf(b.CLASS_FOR_SWATCH_UNAVAILABLE)||
-1!==r.preHoverClass.indexOf(b.CLASS_FOR_DROPDOWN_UNAVAILABLE));var l=h.split("_"),p=r.currentDimCombID.split("_");l[f]="*";p[f]="*";f=l.join("_");p=p.join("_");f!=p&&(d=!0);if(d||-1===a[b.STRING_DIM_VALUE_INDEX])for(var p=h.split("_"),l=0,m=r.dimensionSelectionData.length;l<m;l++)f=r.dimensionSelectionData[l],"X"===p[l]&&1===f[b.STRING_IS_SELECTED]&&(f[b.STRING_IS_SELECTED]=0,r.unselectedDimCount++);DetailPage.StateController.setState("isUnavailableInOldDimCombId",d?"true":"false");d=a[b.STRING_DIM_INDEX];
null!==a&&void 0!==a&&(d=r.dimensionSelectionData[d],0===d[b.STRING_IS_SELECTED]&&-1!==parseInt(a[b.STRING_DIM_VALUE_INDEX])&&(d[b.STRING_IS_SELECTED]=1,r.unselectedDimCount--,0>r.unselectedDimCount&&(r.unselectedDimCount=0)));a=r.unselectedDimCount;r.previousReactId=r.reactId}else a=0<=h.search(/X/)?1:0,r.previousReactId=r.hoveredReactId;e=e&&e.reactID||B(h,a);r.partialState=a;r.setCurrentASIN(c);r.setCurrentDimCombID(h);r.reactId=e;DetailPage.StateController.setState("current_asin",r.getCurrentASIN());
DetailPage.StateController.setState("currentDimCombID",r.getCurrentDimCombID());DetailPage.StateController.setState("reactId",r.reactId);DetailPage.StateController.setState("dimensionSelectionData",r.dimensionSelectionData);return!0};r.getCurrentContext=function(){var a=r.getRequestContext();return c(a)};r.getHoverContext=function(a){a=r.getRequestContext(a);return c(a)};r.getProductizedTwisterSelection=function(a){return"string"===typeof a?g.getProductizedTwisterSelectionFromDimComb(a,r.twisterJSInitData.dimensions):
g.getProductizedTwisterSelectionFromDivMetaData(a,r.twisterJSInitData.dimensions)};r.getRequestContext=function(a,c){var f=r.getCurrentASIN(),k=r.parentASIN,l;l=a&&z(a)||f;var m=r.getCurrentDimCombID(),n=v(l,a),g=0<=m.search(/X/)?1:0,t=0<=n.search(/X/)?b.MTYPE_PARTIAL:b.MTYPE_FULL;g||t!==b.MTYPE_PARTIAL||(t=b.MTYPE_PARENT);var g=t!==b.MTYPE_FULL?1:0,x=B(n,g);a={divMetaData:a,currentAsin:f,newAsin:l,childAsin:l,currentDimCombID:m,newDimCombID:n,reactID:x,partialState:g,mType:t,id:0<=x.search(/X/)?
x:l};if(r.useMS&&l){if(k=r.twisterVariationsData.asinToDimIndexMapData[l])a.relatedContext=d(a,c,k),a.doNotAbort=!0}else t===b.MTYPE_PARENT&&(l=p.extend(!0,{},a),l.mType=b.MTYPE_PARTIAL,l.relatedContext=a,l.url=h(l,c,[]),l.doNotAbort=!0,l.uniqueID=e(l,[]),a.relatedContext=l,a.id=k,a.newAsin=k,a.doNotAbort=!0);a.url=h(a,c,[]);a.uniqueID=e(a,[]);return a};r.getRequestContextForExternalTwisterUpdates=function(a){var c=r.getCurrentASIN(),f=r.getCurrentDimCombID();f.search(/X/);var k=0<=f.search(/X/)?
b.MTYPE_PARTIAL:b.MTYPE_FULL,l=k!==b.MTYPE_FULL?1:0,p=B(f,l),f={divMetaData:{},currentAsin:c,newAsin:c,childAsin:c,currentDimCombID:f,newDimCombID:f,reactID:p,partialState:l,mType:k,id:0<=p.search(/X/)?p:c};r.useMS&&c&&(c=r.twisterVariationsData.asinToDimIndexMapData[c])&&(f.relatedContext=d(f,0,c),f.doNotAbort=!0);f.url=h(f,0,a);f.uniqueID=e(f,a);return f};(function(){var c=r.twisterJSInitData,d=c.keysToPopulateDetailPageStateController,e;if(c){DetailPage.StateController=new a;for(var k=0,f=d.length;k<
f;k++)e=d[k],DetailPage.StateController.setState(e,c[e]);DetailPage.StateController.setState("variation_display_labels",c[b.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",c[b.INIT_DATA_DIMENSIONS_MAP]);r.currentASIN=c.current_asin;r.parentASIN=c.parent_asin;r.dimensionSelectionData=c.dimensionSelectionData;r.unselectedDimCount=c.unselectedDimCount;r.currentDimCombID=c.currentDimCombID;r.reactId=c.reactId;r.storeID=c.storeId;r.productGroupID=c.productGroupId;
r.useMS=c[b.STRING_USE_MS];r.useMS&&r.currentASIN&&r.twisterVariationsData.asinToDimIndexMapData[r.currentASIN]&&r.setMaster(r.twisterVariationsData.asinToDimIndexMapData[r.currentASIN][0]);p("#sizeSwatch").length&&(r.sizeSwatch=!0)}})()}});y.when("A","twister-string-constants","view-util").register("twister-variations-data",function(t,g,a){return function(b,m){var n=this;n.dimensionValuesDisplay={};n.deletedLandingAsinInfo;n.dimToAsinMapData;n.dimensionValuesData;n.asinToDimIndexMapData;n.dimensionsDisplayType;
n.displayConfigStylesData;n.useMS;n.hoverMS;n.dimensionsMap;n.twisterCore=m;n.getDimensionValuesDisplayData=function(a){var b=n.dimensionValuesDisplay[a];b||a!=n.deletedLandingAsinInfo.asin||(b=n.deletedLandingAsinInfo.dimValues);return b};(function(){if(void 0!=n.twisterCore&&b[g.IS_PAGE_ELIGIBLE_FOR_PRODUCTIZATION]){var f=(new a(n.twisterCore)).variationData;n.asinToDimIndexMapData=f.getAsinToDimIndexMapData();n.dimToAsinMapData=f.getDimToAsinMapData();n.dimensionsMap=n.twisterCore.tvm.dimensionList;
n.dimensionValuesData=f.getDimensionValuesData();n.dimensionValuesDisplay=f.getDimensionValuesDisplay()}else n.dimToAsinMapData=b[g.INIT_DATA_DIM_TO_ASIN_MAP],n.dimensionsMap=b[g.INIT_DATA_DIMENSIONS_MAP],n.dimensionValuesData=b[g.STRING_DIMENSION_VALUES_DATA],n.asinToDimIndexMapData=b[g.INIT_DATA_ASIN_TO_DIM_INDEX_MAP],n.dimensionValuesDisplay=b[g.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];n.dimensionsDisplayType=b[g.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];n.deletedLandingAsinInfo=b[g.INIT_DATA_DELETED_LANDING_ASIN_INFO];
n.displayConfigStylesData=b[g.STRING_DISPLAY_CONFIG_STYLES_DATA];n.useMS=b[g.STRING_USE_MS];n.hoverMS=b[g.STRING_HOVER_MS]})()}});y.when("A").register("twister-string-constants",function(t){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",MTYPE_PARTIAL:"partial",MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",CHAR_COLON:":",CHAR_SEMICOLON:";",CHAR_UNDERSCORE:"_",CHAR_ASTERISK:"*",CHAR_CROSS:"X",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",
CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",AUI_CLASS_FOR_SWATCH_UNAVAILABLE:"a-button-unavailable",AUI_CLASS_FOR_SWATCH_SELECT:"a-button-selected",CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",
CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_SHOWPOPOVER:"showPopover",EVENT_TYPE_HIDEPOPOVER:"hidePopover",EVENT_TYPE_UPDATEPOPOVERPOSITION:"updatePopoverPosition",EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",EVENT_TYPE_MOUSEOVER:"mouseOver",
EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",EVENT_TYPE_TOUCHMOVE:"touchmove",EVENT_TYPE_KEYPRESS:"keypress",ID_SELECTOR:"#",CLASS_SELECTOR:".",TWISTER_POPOVER:"twisterPopover",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_PW_ENABLED_DIMENSION_MAP:"pwEnabledDimensionMap",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",
INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",INIT_DATA_DIMENSIONS_DISPLAY_SUB_TYPE_MAP:"dimensionsDisplaySubType",INIT_DATA_DIMENSIONS_MAP:"dimensions",INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",INIT_DATA_MAX_POPOVER_HEIGHT:"maxPopoverHeight",INIT_DATA_VISIBLE_ROW_COUNT:"visibleRowCount",INIT_DATA_POPOVER_POSITION:"popoverPosition",INIT_DATA_ANIMATE_BUTTON_CONTENT:"animateButtonContent",INIT_DATA_DISPLAY_TYPE_PROPERTIES:"displayTypeProperties",
NATIVE_DROPDOWN_DIV_PREFIX:"#native_",STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",CURR_DIM_COMB_ID:"currentDimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",
STRING_DIMENSIONS_MAP:"dimensionsMap",STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_IS_SLOTS_ENABLED:"isSlotsEnabled",STRING_NATIVE_CSS_CLASS:"native_css_class",
STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",STRING_TWISTER_AVAILABILITY_CACHE:"twisterAvailabilityCache",STRING_TWISTER_VARIATION_DATA:"twisterVariationData",STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",STRING_ACCESSIBILITY_CURRENT_SELECTION:"twisterAccessibilityCurrentSelection",STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",
STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_DIMENSION_VIEW_COUNTER:"counter",TWISTER_DIMENSION_VIEW_SHELF:"shelf",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",TWISTER_EVENT_DATA_DURATION:"duration",
TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",TWISTER_DIMENSION_VIEW_SWATCH_VARIATION:"variation",MODAL_SWATCH_PREFIX:"modal_",STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",
AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",IMMERSIVE_TWISTER_OVERLAY:"immersiveTwisterOverlay",CENTER_COL_DIV_ID:"centerCol",MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",IMMERSIVE_DROPDOWN_ROW_PREFIX:"twister_idd_",DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",
CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-",CLASSNAME_FOR_THIN_WIDTH_OVERRIDE:"thinWidthOverride",DIMENSION_SUB_TYPE:"dimensionDisplaySubType",AUI_EVENT_FOR_COUNTER:"twister_counter-action",EXPANDED_VIEW_ENABLED:"expandedViewEnabled",MIN_HEIGHT_EXPANDED_SECTION:"minHeightForExpandedSection",MAX_HEIGHT_EXPANDED_SECTION:"maxHeightForExpandedSection",MIN_ASINS_FOR_EXPANDED_VIEW:"minAsinForExpandedView",
MIN_ASINS_FOR_EXPANDED_VIEW_TEXT:"minAsinForExpandedViewText",MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE:"minAsinForExpandedViewImage",MIN_ASINS_FOR_EXPANDED_SCROLL:"minAsinForExpandedScroll",MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT:"minAsinForExpandedScrollText",MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE:"minAsinForExpandedScrollImage",SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER:"_placeHolderDivForDD",DIMENSION_VALUE_HAS_ICON:"isIconPresentForDimensionValue",HIDDEN_DIMENSION_DISPLAY_TYPE:"hidden",PRODUCTIZATION_ENABLED:"isProductizationEnabled",
PRODUCTIZATION_VIEW_ENABLED:"isViewProductizationEnabled",PRODUCTIZED_PARENT_VIEW:"parentView",PRODUCTIZED_VIEW_UTIL:"viewUtil",VARIATION_CHANGE:"VARIATION_CHANGE",VARIATION_PEEK:"VARIATION_PEEK",METADATA:"METADATA",PRODUCTIZED_VIEW_SUBTYPE:"PRODUCTIZED_VIEW_METADATA",DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",IS_PAGE_ELIGIBLE_FOR_PRODUCTIZATION:"isPageEligibleForProductizationMigration",TWISTER_CURRENT_ASIN:"current_asin"}});y.when("A","twisterModule","dp-js-logger").register("twister-view-registry",
function(t,g,a){var b=this;b.logger=new a("DpTwisterViewRegistry");var m=t.createClass({init:function(a,b){this.twisterControllerHandle=a;this.externalViewName=b;this.dimensions=a.twisterJSInitData.dimensions;this.dimensionToAsinMap=a.twisterJSInitData.dimToAsinMapData;this.dimensionValues=a.twisterJSInitData.dimensionValuesData;this.dimensionAsinToValuesMap=a.twisterJSInitData.dimensionValuesDisplayData;this.variationValues=a.twisterJSInitData.variation_values;this.asinVariationValues=a.twisterJSInitData.asin_variation_values;
this.parentAsin=a.twisterJSInitData.parent_asin;this.currentDimCombID=a.twisterJSInitData.currentDimCombID;this.currentAsin=a.twisterJSInitData.current_asin;this.isConsolesOrAccessories=a.twisterJSInitData.isConsolesOrAccessories;this.ajaxUrlParams=a.twisterJSInitData.ajaxUrlParams;this.getControllerInterface=function(){function b(a,c,d){return{dimIndex:a,dimValueIndex:c,dimDisplayType:d}}return{handleClick:function(c,l,e){c=b(c,l,e);a.handleExternalViewClick(c,this.externalViewName)},handleMouseOver:function(c,
l,e){c=b(c,l,e);a.handleExternalViewMouseOver(c,this.externalViewName)},handleMouseOut:function(c,l,e){c=b(l);a.handleExternalViewMouseOut(c,c.dimIndex,c.dimValueIndex,this.externalViewName)}}}},updateView:function(a,b,d){},updateViewAfterTwisterUpdate:function(a,b,d){}}),n=x.twisterController;this.createAndRegisterExternalView=function(a){var c=new m(n,a);n.registerExternalView(c,a);b.logger.logCounter("TwisterExternalView_"+a,1);return c};return this});y.when("A","jQuery","twisterModule","dp-js-logger",
"page-refresh:controller","twister-controller","twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(t,g,a,b,m,n,f,c){var d=x.twisterController.twisterModel.twisterState,h=new b("dpPageRegreshHandler"),l={},e=function(a){var b=this;b.clientId=a;b.doPageRefresh=function(e){if(!Array.isArray(e))throw"Incorrect parameters passed to doPageRefresh for clientId "+b.clientId;e=d.getRequestContextForExternalTwisterUpdates(e);try{m.updatePage(e,c.EVENT_TYPE_CLICK)}catch(f){h.logFatal(f,
{message:" Error doing page-refresh for clientId "+a})}};b.getURLParamObject=function(a,c,d){if(!a||null==d)throw"Incorrect parameters passed to getURLParams for clientId "+b.clientId;return{key:encodeURIComponent(a),value:encodeURIComponent(c),isPersistent:d}}};return{getHandlerInstance:function(a){if(null==a||""==a)throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";l[a]||(l[a]=new e(a));return l[a]}}});y.when("A","jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",
function(t,g,a,b){x.handleClickForMyButton=function(){for(var b=[],g="",f=0,c=arguments.length;f<c;f++){var d=arguments[f];0==f?(g=d,g=a.getHandlerInstance(g)):(d=g.getURLParamObject(d[0],d[1],d[2]),b.push(d))}g.doPageRefresh(b)}});y.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",function(t,g,a,b,m,n,f,c){var d={intermediateEOS:1,EOS:1},h=new m("dpTwister");return new function(){function l(a,
b){if(!(1<b.recordImpressionPending)){var c=b.impressionCallbackData&&b.impressionCallbackData.relatedRequestID,d="/gp/twister/impression.html/?relatedRequestID\x3d"+c;c?t.delay(function(){t.get(d,{success:function(a){h.logCounter("dpTwisterImpression",1)},timeout:4E4,error:function(a,b,c){h.logCounter("dpTwisterImpressionFailed",1)}})},1500):h.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");b.recordImpressionPending++;f.set(a,b)}}function e(a,
b,c){"undefined"===typeof b.forceFullPrefetch&&(b.forceFullPrefetch=c||n.NO,f.set(a,b));return b.forceFullPrefetch===n.NO&&r.metadata[a.mType]&&!r.metadata[a.mType].fullyPrefetchable}function m(a,b){v(a,function(a){c.executeClientFeatures(a,b)})}function v(a,b){var c=[a];a.relatedContext&&c.push(a.relatedContext);g.each(c,function(a,c){b.apply(r,[c])})}function B(b,d){v(b,function(b){c.fadeInFeatures(b);var k=b.uniqueID,h=b.url;md=f.get(b);r.newPrefetchWeblab&&md.prefetchSent&&e(b,md)&&(k+="_prefetch_1",
h+="\x26prefetchParam\x3d1",md.hotFeaturesPending=!0);md.requestSent=!0;f.set(b,md);var l=r.newPrefetchWeblab&&d===n.EVENT_TYPE_CLICK;a.getInstance("dpTwister",k,h,p,b,b.doNotAbort).getContent(l)})}var r=this;r.metadata={};r.newPrefetchWeblab=!1;r.page=c;r.twisterPSCParam="psc";var p={chunk:function(a,b){var e=a.ASIN,k=a.Value;a=a.FeatureName;if(!d[a]){var h=f.get(b);"twister-request-metadata"===a?(h.impressionCallbackData=t.parseJSON(k.content[a]),f.set(b,h)):c.refreshFeature(e,a,k)}},success:function(b,
c,d,e){b=f.get(e);b.hotFeaturesPending&&(b.hotFeaturesPending=!1,f.set(e,b),a.getInstance("dpTwister",e.uniqueID+"_prefetch_2",e.url+"\x26prefetchParam\x3d2",p,e,e.doNotAbort).getContent());b.recordImpressionPending&&l(e,b)},error:function(a,b,c){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());h.logFatal(b+" "+c)},abort:function(a){h.logFatal(" Ajax aborted: "+a)},timeout:4E4};r.prefetchPage=function(b,c){v(b,function(b){var d=
b.uniqueID,h=b.url,l=f.get(b);l.requestSent||(e(b,l,c)&&(d+="_prefetch_1",h+="\x26prefetchParam\x3d1"),l.prefetchSent=!0,l.recordImpressionPending=l.recordImpressionPending||1,l.requestSent=!0,f.set(b,l),a.getInstance("dpTwister",d,h,p,b,b.doNotAbort).prefetchContent())})};r.updatePage=function(a,d){if(d===n.EVENT_TYPE_CLICK||d===n.EVENT_TYPE_DROPDOWN_CHANGE){if(!a.partialState){if(b.callbacks["sims-widget_feature_div"])b.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());
c.startMeasurement(a)}B(a,d)}m(a,d)};r.reloadPage=function(a){var b;if(x.location.search){b=x.location.search;var c={};b=b.substring(b.indexOf("?")+1).split("\x26");for(var d=0;d<b.length;d++){var e=b[d].split("\x3d");e[0]&&0<=e[0].length&&(c[decodeURIComponent(e[0])]=decodeURIComponent(e[1]))}b=c}var h,c="/dp/"+a.childAsin;a.partialState?b[r.twisterPSCParam]&&delete b[r.twisterPSCParam]:b[r.twisterPSCParam]=1;(a="?"+g.param(b))&&c&&(h=c+a);x.location.href=h};r.init=function(a){r.newPrefetchWeblab=
a.newPrefetchWeblab;g.each(a.contextMetaData,function(a,b){if(b.elementList){for(var c=b.elementList.length,d=!0,e=0;e<c;e++)if(!b.elementList[e].isPrefetchable){d=!1;break}r.metadata[a]||(r.metadata[a]={});r.metadata[a].fullyPrefetchable=d}});c.init(a)}}});y.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(t,g,a,b,m){var n=new m("dpTwister");return new function(){var f=this;f.measurement=void 0;f.config={partial:{},full:{},
parent:{},master:{}};f.dimensionsDisplayType=void 0;f.initializeMeasurement=function(b){var d=b.measurement;f.dimensionsDisplayType=b.dimensionsDisplayType;f.measurement=new a(g,d.atf.marker,d.cf.marker);f.measurement.init(b.storeID,b.productGroupID)};f.init=function(a){f.initializeMeasurement(a);g.each(a.contextMetaData,function(a,c){var l=[],e={};c=c.elementList||[];var m=c.length;e[b.EVENT_TYPE_MOUSEOVER]={};e[b.EVENT_TYPE_CLICK]={};for(var n=0;n<m;n++){var t=g("#"+c[n].divToUpdate);l.push("#"+
c[n].divToUpdate);t.length&&c[n].customClientFunction&&(c[n].updateOnHover&&(e[b.EVENT_TYPE_MOUSEOVER][c[n].divToUpdate]=t.attr("customfunctionname")),e[b.EVENT_TYPE_CLICK][c[n].divToUpdate]=t.attr("customfunctionname"))}f.config[a].affectedFeatures=l.join(",");f.config[a].clientFeatures=e})};f.startMeasurement=function(a){var d,h,l=f.dimensionsDisplayType;null!=a.divMetaData&&(d=a.divMetaData.dimDisplayType);"undefined"!==typeof a.currentDimCombID&&(h=a.currentDimCombID.split(b.CHAR_UNDERSCORE).length);
this.measurement.start(a.newAsin,d,h,l)};f.fadeInFeatures=function(a){g(this.config[a.mType].affectedFeatures).css({opacity:.5})};f.executeClientFeatures=function(a,d){g.each(f.config[a.mType].clientFeatures[d===b.EVENT_TYPE_CLICK||d===b.EVENT_TYPE_DROPDOWN_CHANGE?b.EVENT_TYPE_CLICK:b.EVENT_TYPE_MOUSEOVER],function(b,d){try{eval("var twisterCustomFunction \x3d "+d+";"),twisterCustomFunction(a.reactID,DetailPage.StateController,function(){f.measurement.stampImageLoad(a.newAsin)})}catch(e){n.logFatal(e)}})};
f.refreshFeature=function(a,b,h){var f,e;try{b&&h&&h.content&&(e=h.content[b],"undefined"!==typeof e&&(f=g("#"+b),f.html(e),f.css({opacity:""})))}catch(m){b=b||"NoFeatureName",n.logFatal(m,{message:" Error in feature "+b})}this.measurement.stampFeature(b,a)}}});y.when("twister-string-constants").register("page-refresh:meta-cache",function(t){return{data:{},set:function(g,a){return(g=this.getKey(g))?this.data[g]=a:void 0},get:function(g){g=this.getKey(g);return this.data[g]||{}},getKey:function(g){var a;
g&&g.newAsin&&(a=g.mType===t.MTYPE_PARENT?g.mType+g.newAsin:g.mType===t.MTYPE_MASTER?g.mType+g.id:g.mType+g.newAsin+g.reactID);if(!a)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return a}}});y.when("A","jQuery").register("page-refresh-ajax-scope",function(t,g){return function(a,b,m){this.scopeName=b;this.url=m;ues("t0",b,x.newTwisterInteractionStartTime);ues("ctb",b,"1");this.signalMarker=function(a){!this.markers[a]||0>=this.markers[a].conditions||0===--this.markers[a].conditions&&
"function"==typeof this.markers[a].handler&&this.markers[a].handler()};this.addlongPoleTag=function(a,b){a=a.toLowerCase();this.markers[a]&&0==this.markers[a].conditions&&0==this.markers[a].conditions&&x.ue&&"function"===typeof ue.tag&&ue.tag(b)};this.postData=function(){var b=this.scopeName;a.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(a,d,h){ues("id",b,a);uex("ld",b)}})};var g=this;this.markers={image:{conditions:1,handler:function(){uet("ne",b);g.signalMarker("af")}},
af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",b);uet("cf",b);g.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",b);g.postData()}}}}});y.when("A","jQuery").register("page-refresh-cache",function(t,g){return function(){this.data={};this.getValue=function(a,b){return null==this.data[a]?null:b?this.data[a][b]:this.data[a]};this.setValue=function(a,b,m){if(null==this.data[a]||this.data[a].pending)this.data[a]=
{};this.data[a][b]=m};this.clear=function(a){this.data[a]=null}}});y.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",function(t,g,a,b,m,n){return function(f,c,d,h,l){this.$=f;this.model={};this.refresh=new a(f,h,l);this.contextMetaData=c;this.measurement=new b(f,d.atfMarker,d.cfMarker);this.init=function(a,b){for(var c in this.contextMetaData)this.model[c]=new m(f,this.contextMetaData[c].AJAXUrl,this.contextMetaData[c].elementList,
c.toString());this.measurement.init(a,b)};this.getModelCacheSize=function(a){var b=0;this.model.hasOwnProperty(a)&&f.each(this.model[a].cache.data,function(a,c){c.hasOwnProperty("cacheStatus")&&("preFetched"!==c.cacheStatus&&"completeFetched"!==c.cacheStatus||b++)});return b};this.react=function(a,b){for(var c in this.model)b||this.model[c].finishAjaxCall(this.model[c].currentRequestId,1);c=0;for(var d=a.length;c<d;c++){var h=a[c];b||this.model[h.type].finishAjaxCall(this.model[h.type].currentRequestId,
2);var l=this.model[h.type].getUpdateData(this,h);this.refresh.startRefresh(l);this.model[h.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,b,c,d){if(!d.noRefresh)for(var h in d.content)try{this.refresh.doRefresh(h,d.content[h]);if(c.isFinishRefreshReq)if(this.refresh.finishRefresh(h),"session-similarities_feature_div"==h||"purchase-similarities_feature_div"==h||"buyxgety_feature_div"==h){if(n.callbacks[h])n.callbacks[h]()}else"zeroes-buy-box_feature_div"===h&&Twister.isIEBrowser(f)&&
f("#"+h).css({opacity:"",zoom:1});this.measurement.stampFeature(b,a)}catch(l){}}}});y.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(t,g,a){return function(b,m,g){this.atfMarker=m;this.cfMarker=g;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(a,b){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s\x3d"+a+"\x26pgid\x3d"+b+"\x26deviceType\x3d"+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="\x26ptd\x3d"+Twister.productTypeName)};
this.start=function(f,c,d,h){if(x.ue){this.scopeCount[f]||(this.scopeCount[f]=0);var l=f+(this.scopeCount[f]+1);this.scopeCount[f]++;var e=this.url;c&&(e+="\x26dimensionType\x3d"+c);"undefined"!==typeof d&&(e+="\x26dimensionCount\x3d"+d);"undefined"!==typeof h&&(e+="\x26dimensionsDisplayType\x3d"+h);this.ajaxScopes[f]=new a(b,l,e)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",Twister.cfImageLongPollTag))};
this.stampFeature=function(a,b){this.ajaxScopes[b]&&(a===this.atfMarker&&this.ajaxScopes[b].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[b].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[b].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,b){this.ajaxScopes[b]&&uet(a,this.ajaxScopes[b].scopeName)}}});y.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(t,g,a){return function(b,m,g,f){this.$=b;this.pendingCallBacks=
{};this.pendingCallBacksASIN="";this.cache=new a;this.AJAXUrl=m;this.AJAXRequests={};this.requestIdHash={};this.elementList=g;this.currentRequestId=null;this.pendingCallbacksList={};this.immediateCallbacksList=[];this.elementsToRefresh=[];this.modelType=f;this.getNewRequestId=function(){for(var a=0;100>a;a++){var b=a.toString();if(!this.requestIdHash.hasOwnProperty(b))return this.requestIdHash[b]=!0,b}};this.removeRequestId=function(a){"string"!=typeof a&&(a=a.toString());this.requestIdHash.hasOwnProperty(a)&&
delete this.requestIdHash[a]};this.executeActionItems=function(a,b,h,l,e){h=h.divToUpdate;for(var f=0,m=a.length;f<m;f++){var g=a[f];if("addToImmediate"==g)g={},g.id=b,g.key=h,this.immediateCallbacksList.push(g);else if("addToElementsRefresh"==g||"addToElementsRefreshWithLoading"==g)e.push(h+("addToElementsRefreshWithLoading"==g?",loadingBar":""));else if("updateCache"==g)g={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(b,h,g);else if("customClientFunction"==g){var g={handler:this,
callbackType:"customClientFunction"},n={};n.refreshHandler=l;g.callbackParams=n;this.addToPendingCallbacksList(b,h,g)}else if("doRefreshAndFinish"==g||"doRefresh"==g)g={},g.handler=l,g.callbackType="doRefresh",n={isFinishRefreshReq:1},g.callbackParams=n,this.addToPendingCallbacksList(b,h,g)}};this.getAjaxCallContext=function(a,b,h,l,e,f){b=[];var g=e=0,m="notFetched";this.cache.getValue(a,"cacheStatus")&&(m=this.cache.getValue(a,"cacheStatus"));for(var n=0,p=this.elementList.length;n<p;n++){var u=
this.elementList[n],t=u.divToUpdate,w=[],k=1,q=0,C=0,D=0;"0"==u.isPrefetchable&&(k=0,g=1);"1"==u.customClientFunction&&(q=1,k=0);"1"==u.updateOnHover&&(C=1);"1"==u.loadingBar&&(D=1);if(!f||C){if(h)if(q||!k||this.cache.getValue(a,t))continue;else w.push("updateCache"),e||(e=1);else q?(w.push("customClientFunction"),w.push("addToImmediate")):this.cache.getValue(a,t)?(w.push("doRefresh"),w.push("addToImmediate")):(w.push("updateCache"),w.push("doRefreshAndFinish"),D?w.push("addToElementsRefreshWithLoading"):
w.push("addToElementsRefresh"),e||(e=1));(1==h&&"preFetched"==m||0==h&&"completeFetched"==m||1==h&&"completeFetched"==m)&&1==e&&(e=0);this.executeActionItems(w,a,u,l,b)}}(1==h&&"preFetched"==m||0==h&&"completeFetched"==m||1==h&&"completeFetched"==m)&&1==e&&(e=0);f&&e&&(e=0);e&&this.cache.setValue(a,"cacheStatus",h?g?"preFetching":"completeFetching":"preFetched"==m?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=e;a.elementsToRefresh=b;return a};this.getUpdateData=function(a,b){var h=
b.idList;b=[];for(var l=[],e=[],f=[],g=0,m,n,p,u,t,w=1,k=0,q=h.length;k<q;k++){n=h[k].id;p=h[k].asin;u=h[k].isPrefetch;m=h[k].requiredDivs;m=this.getAjaxCallContext(n,p,u,a,m,h[k].isHover);t=m.elementsToRefresh;for(var C=0,D=t.length;C<D;C++)f.push(t[C]);if(m.isAjaxCallReq){g=1;u=u?1:"hotFeaturesFetching"==this.cache.getValue(n,"cacheStatus")?2:0;if(0==u||2==u)w=0;l.push(n);e.push(p);b.push(u)}}if(g){h={};h.asinList=e.join(",");h.id=l.join(",");h.prefetchParam=b.join(",");h.managerHandler=a;h.modelType=
this.modelType;h.containsOnlyPrefetches=w;try{this.doAjaxCall(h)}catch(H){}}this.elementsToRefresh=f.slice();return f};this.makeCallback=function(a,b,h,l){var e=h.handler,f=h.callbackType;h=h.callbackParams;null==l&&(l=this.cache.getValue(a,b));if("function"==typeof e)e(a,b,h,l);else if("doRefresh"==f)e.pageRefreshHandler(a,b,h,l);else if("customClientFunction"==f)try{e.callCustomClientFunction(a,b,h,l)}catch(g){}else"updateCache"==f&&e.updateCache(a,b,h,l)};this.makePendingCallBacks=function(a,b,
h){var l;if(a){if("object"===typeof this.pendingCallbacksList[a])if(b){l=this.pendingCallbacksList[a][b];if(!l){l=[];var e={handler:this,callbackType:"updateCache"};l.push(e)}for(var f=0,g=l.length;f<g;f++){e=l[f];try{this.makeCallback(a,b,e,h)}catch(m){}}this.pendingCallbacksList[a][b]&&delete this.pendingCallbacksList[a][b]}else{for(e in this.pendingCallbacksList[a])for(l=this.pendingCallbacksList[a][e],f=0,g=l.length;f<g;f++)this.makeCallback(a,b,callbackargs,h);delete this.pendingCallbacksList[a]}}else{a=
0;for(g=this.immediateCallbacksList.length;a<g;a++)b=this.immediateCallbacksList[a],this.makePendingCallBacks(b.id,b.key,null);this.immediateCallbacksList=[]}};this.addToPendingCallbacksList=function(a,b,h){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]={});this.pendingCallbacksList[a].hasOwnProperty(b)||(this.pendingCallbacksList[a][b]=[]);this.pendingCallbacksList[a][b].push(h)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&0===Twister.remainingAjaxCalls&&
Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=1;var b=this.getNewRequestId();this.currentRequestId=b;var h=a.managerHandler,f=this.AJAXUrl+a.asinList+"\x26isFlushing\x3d2\x26id\x3d"+a.id+"\x26prefetchParam\x3d"+a.prefetchParam+"\x26mType\x3d"+a.modelType;Twister.isInstaTwisterEnabled&&(f+="\x26dpEnvironment\x3d"+Twister.dpEnvironment);var e={};if(Twister.useAuiAjax){var g=this,f=Twister.A.ajax(f,{method:"get",chunk:function(a){g.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},
success:function(){g.AJAXHandler(null,null,AJAXFlushUtils.ajaxReadyState.DONE);--Twister.remainingAjaxCalls;0===Twister.remainingAjaxCalls&&Twister.$("#variations-overlay").hide()},error:function(){Twister.$("#variations-overlay").hide();--Twister.remainingAjaxCalls;Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&console.logs("ajax call failed")},timeout:4E4});e.streamingXhrRef=f}e.ajaxParams=a;e.managerHandler=h;this.AJAXRequests[b]=
e};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,!0)};this.finishAjaxCall=function(a,b){if(a){var h=this.AJAXRequests[a],f=h.streamingXhrRef,e=h.ajaxParams,h=e.id.split(","),e=e.containsOnlyPrefetches;if(1!=b||!e){this.pendingCallbacksList={};this.immediateCallbacksList=[];if(b)for(f&&"function"===typeof f.abort&&f.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT),f=0,e=h.length;f<e;f++)if(this.cache.getValue(h[f])){var g=this.cache.getValue(h[f],"cacheStatus");
"preFetching"==g||"completeFetching"==g?b?this.cache.clear(h[f]):this.cache.setValue(h[f],"cacheStatus","preFetching"==g?"preFetched":"completeFetched"):"hotFeaturesFetching"==g&&this.cache.setValue(h[f],"cacheStatus",b?"preFetched":"completeFetched")}this.elementsToRefresh=[];this.removeRequestId(a);delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,b,h,f){"intermediateEOS"==b||"EOS"==b?(b=this.cache.getValue(a,"cacheStatus"),"preFetching"==b?this.cache.setValue(a,
"cacheStatus","preFetched"):"completeFetching"!=b&&"hotFeaturesFetching"!=b||this.cache.setValue(a,"cacheStatus","completeFetched")):this.cache.setValue(a,b,f)};this.callCustomClientFunction=function(a,d,h,f){var e=b("#"+d).attr("customFunctionName");if(e){var g=h.refreshHandler,m=DetailPage.StateController.getState().current_asin;f=function(){g.measurement.stampImageLoad(m)};h=Twister.useAui?f:null;if(e=Twister.useAui?eval("var customFunction \x3d "+e+"; customFunction")(a,DetailPage.StateController,
h):eval(e)(a,DetailPage.StateController,h)){h={isFinishRefreshReq:0};if(!Twister.useAui){var n;if("twister-main-image"==d&&m){n=document.getElementById("main-image");if(!n){var r=document.getElementById("main_image_0");r&&(n=(n=r.getElementsByTagName("img"))?n[0]:null)}n&&(n.onload=f)}}g.pageRefreshHandler(a,d,h,e);Twister.useAui||-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&n&&n.complete&&f()}}};this.AJAXHandler=function(a,b,f){if(f==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,
0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;1>a;a++){var l=b;f=l.ASIN;b=l.Value;l=l.FeatureName;"intermediateEOS"==l||"EOS"==l?this.updateCache(f,l,null,b):this.makePendingCallBacks(f,l,b)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,b,f){(a=a.xhrStatus)||(a=f);return a}}});y.when("A","jQuery").register("page-refresh-refresh",function(t,g){return function(a,b,g){this.$=a;this.loadingBarHtml=b;this.loadingBarHtml2=g;this.doRefresh=function(b,f){a("#"+b).html(f)};this.startRefresh=
function(b){if(b)for(var f=0,c=b.length;f<c;f++){var d=b[f].split(","),h=d[0],l=!0,e=!1;if("buy-box_feature_div"==h||"more-buying-choices_feature_div"==h||"session-similarities_feature_div"==h&&a.browser.msie)l=!1;1<d.length&&"loadingBar"==d[1]&&(e=!0);l&&!Twister.useVariationsOverlay&&a("#"+h).css("opacity","0.5");e&&this.appendLoadingBar(h)}};this.appendLoadingBar=function(b){var f=a("#"+b);"moreBuyingChoices_feature_div"==b||f.attr("loadingBarSet")||(f.attr("loadingBarSet","1"),"more-buying-choices_feature_div"==
b?(f=a("#more-buying-choice-content-div"),f.html(this.loadingBarHtml2)):(b=f.find("h2, h1, b"),0<b.length&&(b=a(b[0]),b.css({display:"inline",padding:"0px"}),b.after(a(this.loadingBarHtml)))))};this.finishRefresh=function(b){var f=!0,c=!0;"buy-box_feature_div"==b&&(c=f=!1);if("session-similarities_feature_div"==b&&a.browser.msie||"more-buying-choices_feature_div"==b)f=!1;var d="0";"more-buying-choices_feature_div"==b&&(d="1");f&&a("#"+b).css({opacity:"",zoom:d});c&&a("#"+b).removeAttr("loadingBarSet")}}});
y.when("A","twisterModule","dp-js-logger").execute(function(t,g,a){var b=t.$;g=new a(null,this,!0);x.history&&x.history.replaceState?(g.logImpression(g.eventTypes.HISTORY_API_SUPPORTED,null),t.on("a:pageUpdate",function(){var a=t.state("URL-Refresh-State");if(a&&a.isUrlRefreshEnable&&DetailPage&&DetailPage.StateController&&"function"===typeof DetailPage.StateController.getState){var g=DetailPage.StateController.getState()||{},f=Twister&&Twister.isAssemblyVariationsEnabled,c=g.current_asin;if(c){for(var d=
x.location.search,h={},d=d.substring(d.indexOf("?")+1).split("\x26"),l=0;l<d.length;l++){var e=d[l].split("\x3d");e[0]&&0<=e[0].length&&(h[decodeURIComponent(e[0])]=decodeURIComponent(e[1]))}f&&(h.customId=c);"th"in h||(h.th=1);"psc"in h&&delete h.psc;l=d=!1;for(i=0;i<g.dimensionSelectionData.length;i++)if(e=g.dimensionSelectionData[i],1==parseInt(e.isRequired,10)&&(l=!0,0==parseInt(e.isSelected,10))){d=!0;break}!d&&l&&(h.psc=1);g=(g=b.param(h))&&0<g.length?"?"+g:g;urlPath=f?x.location.pathname:x.location.pathname.replace(new RegExp(a.landingAsin,
"i"),c);x.history.replaceState({},document.title,urlPath+g);a.landingAsin=c}}})):g.logImpression(g.eventTypes.HISTORY_API_NOT_SUPPORTED,null)});y.when("A","twister-string-constants").register("twister-productization-view",function(t,g){return function(a){var b=this;b.twister=void 0;b.twisterUtil=a.util;b.handleClick=function(a,b){b.subType=g.PRODUCTIZED_VIEW_SUBTYPE;this.twister.metaData(b);this.twister.dimensionChanged(a)};(function(){b.twister=a.registerActive({viewAttribution:"DetailPage",viewName:"TwisterDesktopProductizationView"},
{updateView:function(a,b){}})})()}});y.when("A","a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants","dp-js-logger","twister-dimension-view-promise-factory").register("twister-dimension-views-dropdown",function(t,g,a,b,m,n,f){function c(c,f){function l(){var a=m.DROPDOWN_DIV_NAME+e.dimName,b;b=function(a){var b={};b[m.STRING_DIM_INDEX]=e.dimOrder;var c=a?a.value:void 0;b[m.STRING_DIM_VALUE_INDEX]=c?parseInt(c.split(",")[0]):void 0;e.logger.logImpression(e.logger.eventTypes.CLICK,
{divMetaData:b});var c=B?B.handleDropdownChange:void 0,d=e.twisterControllerHandle.handleDropdownOnChange;void 0!=c?(e.logger.logCounter("Twister.dropdown.productized.event",1),c.call(B,b,a,m.EVENT_TYPE_DROPDOWN_CHANGE)):(e.logger.logCounter("Twister.dropdown.event",1),d.call(e.twisterControllerHandle,a,b))};y.when("A").execute(function(c){c.on(m.AUI_DROPDOWN_EVENT_PREFIX+a,b)})}var e=this,z=t.$,v=f[m.STRING_TWISTER_VARIATION_DATA],B=f[m.PRODUCTIZED_PARENT_VIEW];e.dimType=m.TWISTER_DIMENSION_VIEW_DROPDOWN;
e.AuiDropdownHandle=g;e.thumbnailHandle=a;e.dimName;e.dimOrder;e.dimStyleData;e.dimensionsMap;e.dimNameDisplayString;e.dimValuesDisplayData;e.twisterControllerHandle;e.isTablet;e.logger=new n("TwisterDimensionViewsDropdown",this,!0);e.dimType=m.TWISTER_DIMENSION_VIEW_DROPDOWN;e.initialize=function(){e.twisterAvailabilityCache=f[m.STRING_TWISTER_AVAILABILITY_CACHE];e.dimOrder=f[m.STRING_DIM_ORDER];e.dimName=f[m.STRING_DIM_NAME];e.dimensionsMap=v.dimensionsMap;e.dimNameDisplayString=f[m.STRING_DIMENSION_DISPLAY_STRING];
e.dimValuesDisplayData=v.dimensionValuesData[e.dimOrder];e.twisterControllerHandle=f[m.STRING_TWISTER_CONTROLLER_HANDLE];e.displayConfigStylesData=f[m.STRING_DISPLAY_CONFIG_STYLES_DATA];e.initialTwisterState=f[m.STRING_TWISTER_INITIAL_STATE_KEY];e.isTablet=c.isTablet;var a=B?B.getCurrDimCombId():e.initialTwisterState.getCurrentDimCombID();e.dimStyleData=b.getDimStyleData(a,e.dimValuesDisplayData.length,e.dimOrder,e.twisterAvailabilityCache,e.displayConfigStylesData);l();if(e.isTablet)for(var g=0,
n=e.dimensionsMap.length;g<n;g++)a=e.dimensionsMap[g],e.thumbnailHandle.attach(a),e.thumbnailHandle.preloadAllThumbnails(a)};e.removePageLayoutUrls=function(){if("undefined"!==typeof TwisterNonJs)for(var a=TwisterNonJs.handleDropDown.length,b=0;b<a;b++)TwisterNonJs.handleDropDown[b]=function(){}};e.updateView=function(a){switch(a[m.STRING_EVENT_TYPE]){case m.EVENT_TYPE_MOUSELEAVE:case m.EVENT_TYPE_DROPDOWN_CHANGE:case m.EVENT_TYPE_CLICK:var c,d,f,h;d=m.ID_SELECTOR+e.dimName+m.CHAR_UNDERSCORE+m.INDEX_FOR_SELECT_OPTION;
var k=m.NATIVE_DROPDOWN_DIV_PREFIX+m.DROPDOWN_DIV_NAME+e.dimName,g=z(k).val().split(",")[0],l=a[m.STRING_EVENT_TYPE],n=a[m.STRING_EVENT_DATA][m.STRING_DIMENSION_SELECTION_DATA];a=b.getDimStyleData(a.dimCombID,e.dimValuesDisplayData.length,e.dimOrder,e.twisterAvailabilityCache,e.displayConfigStylesData);0===n[e.dimOrder][m.STRING_IS_SELECTED]&&g!==m.INDEX_FOR_SELECT_OPTION&&"undefined"!==typeof e.AuiDropdownHandle&&e.AuiDropdownHandle.getSelect(k).val("-1");l!==m.EVENT_TYPE_CLICK&&l!==m.EVENT_TYPE_DROPDOWN_CHANGE||
0!==n[e.dimOrder][m.STRING_IS_REQUIRED]||1!==n[e.dimOrder][m.STRING_IS_SELECTED]||z(d).remove();g=0;for(n=a.length;g<n;g++)if(c=a[g],d=m.NATIVE_DROPDOWN_DIV_PREFIX+e.dimName+m.CHAR_UNDERSCORE+g,c=c[m.STRING_STYLE],f=z(d).get(0).className,c===m.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&(h=z(d).attr("value"),z(k).val()!==h&&e.AuiDropdownHandle.getSelect(k).val(h)),f!==c)try{f={},f[m.STRING_CSS_CLASS]=c,f[m.STRING_NATIVE_CSS_CLASS]=c,e.AuiDropdownHandle.updateOption(d,f)}catch(t){}e.isTablet&&(l===m.EVENT_TYPE_CLICK||
l===m.EVENT_TYPE_DROPDOWN_CHANGE)&&e.thumbnailHandle&&e.thumbnailHandle.update(e.dimName)}}}y.when("a-dropdown-handlers").execute("mark-dropdown-interactive-time",function(){"function"===typeof x.markFeatureInteractive&&x.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"dropdown"}]})});f.registerDimensionSubView(m.TWISTER_DIMENSION_VIEW_DROPDOWN,c);return c});y.when("A","twister-string-constants","twister-dimension-view-promise-factory").register("twister-dimension-views-singleton",
function(t,g,a){function b(a,b){this.dimType=g.TWISTER_DIMENSION_VIEW_SINGLETON;this.initialize=function(){};this.updateView=function(a){}}a.registerDimensionSubView(g.TWISTER_DIMENSION_VIEW_SINGLETON,b);return b});y.when("A","twister-dimension-views-unavailablePopover","twister-utils","twister-string-constants","aui-style-override","dp-js-logger","twister-dimension-view-promise-factory").register("twister-dimension-views-swatch",function(t,g,a,b,m,n,f){function c(c,f){function l(a,b,c,d){void 0!=
c?(k.logger.logCounter("Twister.swatch.productized.event",1),c.call(D,a,b)):(k.logger.logCounter("Twister.swatch.event",1),d.call(k.twisterControllerHandle,a,a.dimIndex,a.dimValueIndex))}function e(){var a=b.AUI_EVENT_FOR_SWATCHTHUMB;"function"===typeof x.markFeatureInteractive&&x.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"swatch",events:["hover"]}]});t.declarative(a,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE,b.EVENT_TYPE_MOUSEDOWN,b.EVENT_TYPE_TOUCHSTART],
function(a){if(a.type===b.EVENT_TYPE_CLICK){var c=a.data;a=a.type;k.logger.logImpression(k.logger.eventTypes.CLICK,{divMetaData:c});l(c,a,D?D.handleClick:void 0,k.twisterControllerHandle.handleClick)}else a.type===b.EVENT_TYPE_MOUSEENTER?(c=a.data,a=a.type,k.logger.logImpression(k.logger.eventTypes.HOVER,{divMetaData:c}),l(c,a,D?D.handleMouseOver:void 0,k.twisterControllerHandle.handleMouseOver)):a.type===b.EVENT_TYPE_MOUSELEAVE?l(a.data,a.type,D?D.handleMouseOut:void 0,k.twisterControllerHandle.handleMouseOut):
!k.newPrefetchWeblab||a.type!==b.EVENT_TYPE_MOUSEDOWN&&a.type!==b.EVENT_TYPE_TOUCHSTART||(k.logger.logCounter("Twister.swatch.mouseDownEvent",1),k.twisterControllerHandle&&k.twisterControllerHandle.handleClickPrediction(a.data,"T1"===k.newPrefetchWeblab?b.YES:b.NO))})}function z(){for(var a,c,d=0,e=k.dimData.length;d<e;d++)if(a=k.dimData[d],c=u(d))a=a[b.STRING_STYLE],F(d,c,a),w(d,a)}function v(a,c){var d=DetailPage.StateController.getState().selected_variations,e=DetailPage.StateController.getState()[b.STRING_DIMENSION_SELECTION_DATA];
if(c)q("#variation_"+k.dimName+" .selection").html(a).addClass("hover");else if(c=q("#variation_"+k.dimName+" .selection"),q("#"+b.TWISTER_MODAL_ID_PREFIX+k.dimName+" .selection"),k.sizeSwatch){var f="";r(e,k.dimOrder)&&""===a||(null==d[k.dimName]?B(e,k.dimOrder)&&(f=a):f=d[k.dimName]);c.html(f).removeClass("hover")}else q("#variation_"+k.dimName+" .selection").html(a).removeClass("hover")}function B(a,c){var d=!1;1==a[c][b.STRING_IS_SELECTED]&&(d=!0);return d}function r(a,c){var d=!1;1==a[c][b.STRING_IS_REQUIRED]&&
(d=!0);return d}function p(a,c,d,e){q(b.ID_SELECTOR+k.dimName+b.CHAR_UNDERSCORE+a).each(function(c,f){c=k.dimName+b.CHAR_UNDERSCORE+a+b.CHAR_UNDERSCORE+c;k.twisterJSInitData[b.STRING_HIDE_POPOVER]?g.setAriaLabel(e,d,q(f),c,k.twisterJSInitData,k.dimOrder):g.setTooltip(e,d,q(f),c,k.twisterJSInitData,k.dimOrder)})}function u(a){a=q(b.ID_SELECTOR+k.dimName+b.CHAR_UNDERSCORE+a);var c;if(0<a.length){a=a.get(0).className.split(" ");for(var d=0,e=a.length;d<e;d++){var f=a[d];if(0===f.indexOf("swatch")){c=
f;break}}}return c}function F(a,c,d){a=q(b.ID_SELECTOR+k.dimName+b.CHAR_UNDERSCORE+a);c!==d&&q(a).removeClass(c).addClass(d);m.doOverride(d,a)}function w(a,c){a=q(b.ID_SELECTOR+k.dimName+b.CHAR_UNDERSCORE+a+"_price");var d=b.CLASS_FOR_PRICE_SECONDARY;if(c===b.CLASS_FOR_SWATCH_SELECT||c===b.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||c===b.CLASS_FOR_SWATCH_HOVER)d=b.CLASS_FOR_PRICE_SELECTED;a.length&&a.removeClass(b.CLASS_FOR_PRICE_SECONDARY+" "+b.CLASS_FOR_PRICE_SELECTED).addClass(d)}var k=this,q=t.$,C=f[b.STRING_TWISTER_VARIATION_DATA],
D=f[b.PRODUCTIZED_PARENT_VIEW];k.dimSubType="";k.dimName;k.dimOrder;k.dimData;k.dimensionsMap;k.dimNameDisplayString;k.dimValuesDisplayData;k.twisterControllerHandle;k.finalLimitForSwatches;k.twisterJSInitData=c;k.newPrefetchWeblab=!1;k.landingDimCombId;k.logger=new n("TwisterDimensionViewsSwatch",this,!0);k.sizeSwatch=!1;k.dimType=b.TWISTER_DIMENSION_VIEW_SWATCH;k.initialize=function(){k.twisterAvailabilityCache=f[b.STRING_TWISTER_AVAILABILITY_CACHE];k.isSlotsEnabled=f.isSlotsEnabled;k.newPrefetchWeblab=
c.newPrefetchWeblab;k.dimOrder=f[b.STRING_DIM_ORDER];k.dimensionsMap=C.dimensionsMap;k.dimName=f[b.STRING_DIM_NAME];k.dimNameDisplayString=f[b.STRING_DIMENSION_DISPLAY_STRING];k.dimValuesDisplayData=C.dimensionValuesData[k.dimOrder];k.displayConfigStylesData=f[b.STRING_DISPLAY_CONFIG_STYLES_DATA];k.twisterControllerHandle=f[b.STRING_TWISTER_CONTROLLER_HANDLE];k.initialTwisterState=f[b.STRING_TWISTER_INITIAL_STATE_KEY];var g=D?D.getCurrDimCombId():k.initialTwisterState.getCurrentDimCombID();k.dimData=
a.getDimStyleData(g,k.dimValuesDisplayData.length,k.dimOrder,k.twisterAvailabilityCache,k.displayConfigStylesData);k.dimSubType=f.dimensionDisplaySubType;e();z();k.swatchWrapper=".twisterSwatchWrapper_"+k.dimOrder;k.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+k.dimOrder;k.$swatches=q(k.swatchWrapper);k.twisterDimmedOpacity=.2;q("#sizeSwatch").length&&(k.sizeSwatch=!0);k.landingDimCombId=DetailPage.StateController.getState().currentDimCombID;q(".variations .swatchOuter a").each(function(){var a=
jQuery(k).contents();q(k).replaceWith(a)})};k.removePageLayoutUrls=function(){q("#twister .swatches a").remove()};k.updateView=function(c){if(c[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_MOUSEOVER||c[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_MOUSEENTER){var d,e,f,h,g=c[b.STRING_EVENT_DATA],l=g[b.STRING_EVENT_DIM_INFO],m=void 0!=l[b.STRING_DIMENSION_VALUES_DATA]?l[b.STRING_DIMENSION_VALUES_DATA][k.dimOrder]:"",n=c.dimCombID;c=g[b.STRING_EVENT_DIV_METADATA][b.STRING_DIM_INDEX];g=n.split(b.CHAR_UNDERSCORE)[c];if(k.dimOrder==
c){l=u(g);n=a.getDimStyleData(n,k.dimValuesDisplayData.length,k.dimOrder,k.twisterAvailabilityCache,k.displayConfigStylesData);v(m,!0);l===b.CLASS_FOR_SWATCH_UNAVAILABLE&&k.logger.logImpression(k.logger.eventTypes.UNAVAILABLE_SWATCH_HOVER,null);for(var m=0,q=n.length;m<q;m++)d=n[m],d=d[b.STRING_STYLE],e=u(m),f=e===b.CLASS_FOR_SWATCH_SELECT?!0:!1,h=parseInt(c)===parseInt(k.dimOrder)&&parseInt(g)===parseInt(m)?!0:!1,f||l===b.CLASS_FOR_SWATCH_UNAVAILABLE&&!h||(d===b.CLASS_FOR_SWATCH_SELECT&&(d=e===b.CLASS_FOR_SWATCH_UNAVAILABLE?
b.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:b.CLASS_FOR_SWATCH_HOVER,w(m,d)),F(m,e,d))}}else for(eventData=c[b.STRING_EVENT_DATA],eventDimInfo=eventData[b.STRING_EVENT_DIM_INFO],dimensionValueDisplay=void 0!=eventDimInfo[b.STRING_DIMENSION_VALUES_DATA]?eventDimInfo[b.STRING_DIMENSION_VALUES_DATA][k.dimOrder]:"",divMetaData=eventData[b.STRING_EVENT_DIV_METADATA],dimensionSelectionData=eventData[b.STRING_DIMENSION_SELECTION_DATA],dimCombID=c.dimCombID,dimDataForThisInteraction=a.getDimStyleData(dimCombID,
k.dimValuesDisplayData.length,k.dimOrder,k.twisterAvailabilityCache,k.displayConfigStylesData),k.sizeSwatch?(l=dimCombID.split("_")[0],g=r(dimensionSelectionData,k.dimOrder),n=B(dimensionSelectionData,k.dimOrder),"X"==l&&g&&n||v(dimensionValueDisplay,!1)):v(dimensionValueDisplay,!1),q=0,d=dimDataForThisInteraction.length;q<d;q++)if(l=dimDataForThisInteraction[q],n=l[b.STRING_STYLE],0===dimensionSelectionData[k.dimOrder][b.STRING_IS_SELECTED]&&n===b.CLASS_FOR_SWATCH_SELECT&&(n=b.CLASS_FOR_SWATCH_AVAILABLE),
m=u(q),k.sizeSwatch&&(g=r(dimensionSelectionData,k.dimOrder),e=!B(dimensionSelectionData,k.dimOrder),m==b.CLASS_FOR_SWATCH_SELECT&&l[b.STRING_STYLE]==b.CLASS_FOR_SWATCH_SELECT&&g&&e&&(n=l[b.STRING_STYLE])),m){k.sizeSwatch&&(g=r(dimensionSelectionData,k.dimOrder),m!=b.CLASS_FOR_SWATCH_SELECT&&m!=b.CLASS_FOR_SWATCH_HOVER||!g||n!=b.CLASS_FOR_SWATCH_UNAVAILABLE||v("",!1));m=u(q);F(q,m,n);switch(c[b.STRING_EVENT_TYPE]){case b.EVENT_TYPE_DROPDOWN_CHANGE:case b.EVENT_TYPE_CLICK:p(q,m,n,c)}w(q,n)}};y.when("twister-lazy-load-data").execute(function(c){if(c.context.dimKey===
k.dimName){var d=DetailPage.StateController.getState().currentDimCombID,e=k.landingDimCombId.split("_"),d=d.split("_");e[k.dimOrder]="*";d[k.dimOrder]="*";d=d.join("_");e=e.join("_");if(d==e){var f=c.context;c=c.responseData.split("\x26\x26\x26");q("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",.2);q.each(c,function(b,c){var d;if(""!==a.stringTrim(c))try{d=q.parseJSON(c)}catch(e){}else d=c;b=d;c=q(document.querySelectorAll('[data-defaultAsin\x3d"'+b.ASIN+'"]'));divToBeReplaced=c.find(" .twisterSlotDiv");
if(0<divToBeReplaced.length){divToBeReplaced.css("display","");if(Twister.multiDimensionWeblabEnabled){d="";for(var g=0;b.Value.content.twisterSlotDiv[g];)"IMAGE"===f.dimSubType&&(d+="\x3cdiv\x3e"),d+=b.Value.content.twisterSlotDiv[g],"IMAGE"===f.dimSubType&&(d+="\x3c/div\x3e"),g++;divToBeReplaced.html(d)}else divToBeReplaced.html(b.Value.content.twisterSlotDiv);c.removeAttr("data-defaultAsin")}});q("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",1)}}})}f.registerDimensionSubView(b.TWISTER_DIMENSION_VIEW_SWATCH,
c);return c});y.when("A","twister-string-constants","dp-js-logger").register("twister-vodd-override-behavior",function(t,g,a){this.VoddOverride=t.createClass({test:!1,shouldGetNextAvailableAsin:function(a,g){return!1},getSupplementString:function(a,g,n,f){return""}});this.voddOverrideBehavior=new VoddOverride;this.externalFeatureName="";this.setExternalOverrideBehavior=function(b,g){try{this.voddOverrideBehavior=b,this.externalFeatureName=g}catch(n){(new a(g)).logFatal(n,{message:"[Override behavior for VODD failed]"})}};
this.getVoddOverrideBehavior=function(){return this.voddOverrideBehavior};return this});y.when("A","twister-string-constants","a-tooltip","accessibility-helper").register("twister-dimension-views-unavailablePopover",function(t,g,a,b){function m(a,b,d,h){var l=a[g.STRING_EVENT_DATA];a=l[g.STRING_EVENT_DIV_METADATA];d=d||a[g.STRING_DIM_INDEX];a=l[g.STRING_DIMENSION_SELECTION_DATA];var l=l[g.STRING_EVENT_DIM_INFO][g.STRING_DIMENSION_DISPLAY_MAP],e=b[g.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER];b=b[g.STRING_UNAVAILABLE_POPOVER_STRING_VALUE];
for(var m="",n=0;n<a.length;n++)n!==parseInt(d,10)&&1===a[n][g.STRING_IS_SELECTED]&&(m=m?m+", "+l[n]:l[n]);h||(m="\x3cstrong\x3e"+m+"\x3c/strong\x3e");return e?b+" "+m:m+" "+b}function n(a){a=a.popover;var c="";a&&a.getContent()&&(c=a.getContent().text());c&&b.announceText(c)}return{setTooltip:function(b,c,d,h,l,e){d=d.find("button");d.length&&(b=m(b,l,e),a.remove(d),t.off("a:popover:show:TwisterDimViewUnavailableTooltip"+h,n),c===g.CLASS_FOR_SWATCH_UNAVAILABLE&&(a.create(d,{position:"triggerTop",
content:b,inlineContent:b,name:"TwisterDimViewUnavailableTooltip"+h}),t.on("a:popover:show:TwisterDimViewUnavailableTooltip"+h,n)))},setAriaLabel:function(a,b,d,h,l,e){d=d.find("button");d.length&&(d.attr("aria-label",""),b===g.CLASS_FOR_SWATCH_UNAVAILABLE&&(a=(d.text().trim()||d.find("img").attr("alt"))+". "+m(a,l,e,!0),d.attr("aria-label",a)))}}});y.when("A","twister-utils","twister-string-constants","twister-expander","dp-js-logger","twister-dimension-view-promise-factory","legacy-popover").register("twister-counter",
function(t,g,a,b,m,n){function f(c,d){function f(){I=new b({minHeightForExpandedSection:55,maxHeightForExpandedSection:155,maxHeightForExpandedSectionInView:101,scrollAnimationDuration:500,expanderSection:N,useExpanderScrollView:J>=w.minAsinsForExpandedScroll-1,minAsinsForExpandedView:w.minAsinsForExpandedView,expanderButtonReplacementIndex:w.minAsinsForExpandedView-2,dimValuePrefix:H,initSelectedID:w.currDimCombID,swatchImageSize:54,swatchImageMargin:10,expanderButton:q,collapseButton:C,dimDisplayType:"counter",
logger:O,dimOrder:w.dimOrder,synchronousPostExpanderCallback:function(){t.trigger("TwisterCounterExpanded")},synchronousPostCollapseCallback:function(){t.trigger("TwisterCounterCollapsed")}})}function l(){var b=a.AUI_EVENT_FOR_COUNTER;"function"===typeof x.markFeatureInteractive&&x.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"counter",events:["hover"]}]});if(g.isTouchDevice()){var c=!1,d="";t.declarative(b,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_TOUCHSTART,a.EVENT_TYPE_TOUCHEND,
a.EVENT_TYPE_TOUCHMOVE],function(b){b.data&&(b.data.dimDisplayType=a.TWISTER_DIMENSION_VIEW_COUNTER);b.type===a.EVENT_TYPE_CLICK?n(b):b.type===a.EVENT_TYPE_TOUCHSTART?(d=b.data.dimValueSelectedID,c=!1):b.type===a.EVENT_TYPE_TOUCHMOVE?c=!0:b.type!==a.EVENT_TYPE_TOUCHEND||c||d!==b.data.dimValueSelectedID||(d="",c=!1,b.type=a.EVENT_TYPE_CLICK,n(b));G=!1})}else t.declarative(b,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE],function(b){b.data&&(b.data.dimDisplayType=a.TWISTER_DIMENSION_VIEW_COUNTER);
if(b.type===a.EVENT_TYPE_CLICK)n(b);else if(b.type===a.EVENT_TYPE_MOUSEENTER){var c=e(b.data);y(c,b.type,w.parentView?w.parentView.handleMouseOver:void 0,w.twisterControllerHandle.handleMouseOver,null);b=b.data[a.STRING_DIM_VALUE_INDEX];k(H+b).css("cursor","pointer");b!=w.currDimCombID.split(a.CHAR_UNDERSCORE)[w.dimOrder]&&(k(H+b).css("z-index",1),B(!0,b),D.html(w.dimValuesDisplayData[b]))}else b.type===a.EVENT_TYPE_MOUSELEAVE&&(c=e(b.data),y(c,b.type,w.parentView?w.parentView.handleMouseOut:void 0,
w.twisterControllerHandle.handleMouseOut,c[a.STRING_DIM_VALUE_INDEX]),b=b.data[a.STRING_DIM_VALUE_INDEX],b!=w.currDimCombID.split(a.CHAR_UNDERSCORE)[w.dimOrder]&&(k(H+b).css("z-index",0),B(!1,b),D.html(w.dimValuesDisplayData[w.currDimCombID.split(a.CHAR_UNDERSCORE)[w.dimOrder]])));G=!1})}function e(b){return{dimIndex:w.dimOrder,dimValueIndex:b?p(b.dimValueSelectedID):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_COUNTER,dimValueSelectedID:b.dimValueSelectedID}}function n(b){L=k(a.ID_SELECTOR+b.data.dimValueSelectedID);
var c=g.reconstructCombinationWithDimValue(w.currDimCombID,b.data[a.TWISTER_EVENT_DATA_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]),d=e(b.data);w.currDimCombID!=c&&y(d,b.type,w.parentView?w.parentView.handleClick:void 0,w.twisterControllerHandle.handleClick,d[a.STRING_DIM_VALUE_INDEX])}function v(b){var c=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA][a.TWISTER_EVENT_DATA_DISPLAY_TYPE];Q=k(H+b.dimCombID.split(a.CHAR_UNDERSCORE)[w.dimOrder]);(T=k(".vodd-dim-wrapper").length)&&Q.hasClass("counter_unavailable")&&
c===a.TWISTER_DIMENSION_VIEW_COUNTER&&t.animate(k(".vodd-dim-wrapper"),{scale:1.1},150,"ease-in",function(){t.animate(k(".vodd-dim-wrapper"),{scale:1},100,"ease-out",function(){})})}function B(a,b){b=k(H+b);a?b.addClass("hoverSwatch"):b.removeClass("hoverSwatch")}function r(){"undefined"===typeof w.$variationList&&(w.$variationList=k("#"+a.TWISTER_DIMENSION_VIEW_COUNTER+"-"+w.dimName+" .counterSwatch"));for(var b=w.$variationList,c=w.parentView?w.parentView.getCurrDimCombId():w.initialTwisterState.getCurrentDimCombID(),
d=parseInt(w.dimOrder),e=[],f=0;f<b.length;f++){5===e.length&&(u(e),e=[]);var h=p(b[f].id),h=g.reconstructCombinationWithDimValue(c,d,h);(h=w.dimensionToAsinMap[h])?e.push(h):k(b[f]).addClass("counter_unavailable")}0<e.length&&u(e)}function p(b){if(!b)return-1;b=b.split(a.CHAR_UNDERSCORE);return b[b.length-1]}function u(a){var b=O.createFunctionTimer(O.eventTypes.DIM_SUM_LOAD);b.start();var c=function(){b.stop()};0<a.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:void 0,asinList:a,
dimTriggeringDimSum:w.dimName,dimSubType:w.dimSubType,dimType:w.dimType,chunk:function(a){var b=parseInt(A[a.ASIN][parseInt(w.dimOrder)]),b=k(H+b);0<a.Value.content.twisterSlotDiv.length&&b.removeClass("counter_unavailable")},success:function(a,b,d,e){c()},error:c,abort:c})}function y(a,b,c,d,e){void 0!=c&&"function"===typeof c?c.call(w.parentView,a,b):"function"===typeof d&&d.call(w.twisterControllerHandle,a,w.dimOrder,e)}var w=this,k=t.$,q=k(a.ID_SELECTOR+"expanderButton"),C=k(a.ID_SELECTOR+"collapseButton"),
D,H,N,J,G,L,K,Q,T,I,O,A,E=d[a.STRING_TWISTER_VARIATION_DATA];w.dimType=a.TWISTER_DIMENSION_VIEW_COUNTER;w.initialize=function(){w.twisterAvailabilityCache=d[a.STRING_TWISTER_AVAILABILITY_CACHE];w.parentView=d[a.PRODUCTIZED_PARENT_VIEW];w.twisterJSInitData=c;w.viewUtil=d[a.PRODUCTIZED_VIEW_UTIL];w.dimensionToAsinMap=E.dimToAsinMapData;w.dimOrder=d[a.STRING_DIM_ORDER];w.dimName=d[a.STRING_DIM_NAME];w.dimensionsMap=d[a.STRING_DIMENSIONS_MAP];w.dimNameDisplayString=d[a.STRING_DIMENSION_DISPLAY_STRING];
w.dimValuesDisplayData=d[a.STRING_DIMENSION_VALUES_DATA];w.twisterControllerHandle=d[a.STRING_TWISTER_CONTROLLER_HANDLE];w.initialTwisterState=d[a.STRING_TWISTER_INITIAL_STATE_KEY];c.useCounterConfig?(w.expandedViewEnabled=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][w.dimOrder][a.EXPANDED_VIEW_ENABLED],w.minAsinsForExpandedView=c[a.MIN_ASINS_FOR_EXPANDED_VIEW],w.minAsinsForExpandedScroll=c[a.MIN_ASINS_FOR_EXPANDED_SCROLL]):(w.displayTypeProperties=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][w.dimOrder],w.expandedViewEnabled=
w.displayTypeProperties[a.EXPANDED_VIEW_ENABLED],w.minAsinsForExpandedView=w.displayTypeProperties[a.MIN_ASINS_FOR_EXPANDED_VIEW],w.minAsinsForExpandedScroll=w.displayTypeProperties[a.MIN_ASINS_FOR_EXPANDED_SCROLL]);w.dimSubType=d.dimensionDisplaySubType;w.currDimCombID=w.parentView?w.parentView.getCurrDimCombId():w.initialTwisterState.getCurrentDimCombID();O=new m("DPTwisterCounterView");A=E.asinToDimIndexMapData;D=k(a.ID_SELECTOR+"counter-label-"+w.dimName+" .selection");H=a.ID_SELECTOR+w.dimName+
a.CHAR_UNDERSCORE;N=k(a.ID_SELECTOR+"counterSwatchSection-"+w.dimName);J=w.dimValuesDisplayData.length;K=k(H+w.currDimCombID.split(a.CHAR_UNDERSCORE)[w.dimOrder]);L=k(H+w.currDimCombID.split(a.CHAR_UNDERSCORE)[w.dimOrder]);G=!1;l();w.expandedViewEnabled&&J>=w.minAsinsForExpandedView&&f();x.CounterScenesController&&x.CounterScenesController.registerCounter(w)};w.removePageLayoutUrls=function(){k(".counterSwatch").each(function(a){a=k(this);a.parent().is("a")&&a.unwrap()})};w.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===
a.EVENT_TYPE_CLICK&&w.currDimCombID!=b[a.STRING_DIM_COMB_ID]){var c=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][w.dimOrder];K.css("z-index",0);L.css("z-index",1);D.html(c);L=k(H+b.dimCombID.split(a.CHAR_UNDERSCORE)[w.dimOrder]);L.removeClass("hoverSwatch");K.removeClass("selectedSwatch");L.addClass("selectedSwatch");v(b);r();w.currDimCombID=b[a.STRING_DIM_COMB_ID];t.trigger("counter:select",w.currDimCombID);null!=I&&(I.updateSelectedVariation(w.currDimCombID,L),
I.isCollapsed&&G&&I.handleVariationSwap(G),I.isCollapsed?I.handleVariationSwap(!0):I.scrollVariationIntoView());K=L}};w.selectCounterVariationAtIndex=function(a){G=!0;k(H+a).children().click()};w.getCurrentSelectedIndex=function(){return parseInt(w.currDimCombID,10)};w.expandCounter=function(){null!=I&&I.isCollapsed&&I.handleExpand()};w.onInitializeTwister=function(){r()}}n.registerDimensionSubView(a.TWISTER_DIMENSION_VIEW_COUNTER,f);return f});y.when("A","twister-utils","twister-string-constants",
"twister-expander","dp-js-logger","twister-dimension-view-promise-factory").register("twister-shelf",function(t,g,a,b,m,n){function f(c,d){function f(a){"undefined"!==a&&x.ue&&x.ue.tag&&x.ue.tag(a)}function l(a){var b=x.ue;if(b){var c=b.count(a)||0;b.count(a,c+1)}}function e(){return q.parentView?q.parentView.getCurrDimCombId():q.initialTwisterState.getCurrentDimCombID()}function n(){R=new b({minHeightForExpandedSection:q.minHeightForExpandedSection,maxHeightForExpandedSection:q.maxHeightForExpandedSection,
maxHeightForExpandedSectionInView:q.maxHeightForExpandedSection-74,scrollAnimationDuration:500,expanderSection:G,useExpanderScrollView:L>=q.minAsinsForExpandedScroll-1,minAsinsForExpandedView:q.minAsinsForExpandedView,expanderButtonReplacementIndex:q.expanderButtonReplacementIndex,dimValuePrefix:J,initSelectedID:q.currDimCombID,swatchImageSize:74,swatchImageMargin:17,expanderButton:D,collapseButton:H,expanderHidesVariation:q.expanderHidesVariation,dimDisplayType:"shelf",logger:I,dimOrder:q.dimOrder,
expanderButtonPostCollapse:q.expanderButtonPostCollapse,synchronousPreExpanderCallback:function(){G.removeClass("twisterShelf_isCollapsed");G.removeClass("twisterShelf_isCollapsedAnimated");G.addClass("twisterShelf_isExpanded");G.addClass("twisterShelf_isExpandedAnimated");p()},synchronousPostExpanderCallback:function(){r();G.removeClass("twisterShelf_isExpandedAnimated");t.trigger("TwisterShelfExpanded");q.dualDimension&&l("dualDimshelfExpanded")},synchronousPreCollapseCallback:function(){G.removeClass("twisterShelf_isExpanded");
G.removeClass("twisterShelf_isExpandedAnimated");G.addClass("twisterShelf_isCollapsed");G.addClass("twisterShelf_isCollapsedAnimated");p()},synchronousPostCollapseCallback:function(){r();G.removeClass("twisterShelf_isCollapsedAnimated");t.trigger("TwisterShelfCollapsed")}})}function v(b){if(!b)return-1;b=b.split(a.CHAR_UNDERSCORE);return b[b.length-1]}function B(b){return{dimIndex:q.dimOrder,dimValueIndex:b?v(b.id):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_SHELF,dimValueSelectedID:b.id}}function r(){p();
"function"===typeof x.markFeatureInteractive&&x.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"shelf",events:["hover"]}]});K.bind(a.EVENT_TYPE_CLICK,function(b){var c=B(b.currentTarget);b=b.type;E=C(a.ID_SELECTOR+c.dimValueSelectedID);var d=g.reconstructCombinationWithDimValue(q.currDimCombID,c.dimIndex,c.dimValueIndex);q.currDimCombID!=d&&k(c,b,q.parentView?q.parentView.handleClick:void 0,q.twisterControllerHandle.handleClick,null)});g.isTouchDevice()||(K.bind(a.EVENT_TYPE_MOUSEENTER,
function(b){var c=B(b.currentTarget);k(c,b.type,q.parentView?q.parentView.handleMouseOver:void 0,q.twisterControllerHandle.handleMouseOver,null);b=c[a.STRING_DIM_VALUE_INDEX];c=C(J+b);c.css("cursor","pointer");b!=q.currDimCombID.split(a.CHAR_UNDERSCORE)[q.dimOrder]&&(c.addClass("hoverSwatch"),N.html(q.dimValuesDisplayData[b]))}),K.bind(a.EVENT_TYPE_MOUSELEAVE,function(b){var c=B(b.currentTarget);k(c,b.type,q.parentView?q.parentView.handleMouseOut:void 0,q.twisterControllerHandle.handleMouseOut,c[a.STRING_DIM_VALUE_INDEX]);
b=c[a.STRING_DIM_VALUE_INDEX];c=C(J+b);b!=q.currDimCombID.split(a.CHAR_UNDERSCORE)[q.dimOrder]&&(c.removeClass("hoverSwatch"),N.html(q.dimValuesDisplayData[q.currDimCombID.split(a.CHAR_UNDERSCORE)[q.dimOrder]]))}))}function p(){K.unbind(a.EVENT_TYPE_CLICK);g.isTouchDevice()||(K.unbind(a.EVENT_TYPE_MOUSEENTER),K.unbind(a.EVENT_TYPE_MOUSELEAVE))}function u(b){var c=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA][a.TWISTER_EVENT_DATA_DISPLAY_TYPE];O=C(J+b.dimCombID.split(a.CHAR_UNDERSCORE)[q.dimOrder]);
(A=C(".vodd-dim-wrapper").length)&&O.hasClass("shelf_unavailable")&&c===a.TWISTER_DIMENSION_VIEW_SHELF&&t.animate(C(".vodd-dim-wrapper"),{scale:1.1},150,"ease-in",function(){t.animate(C(".vodd-dim-wrapper"),{scale:1},100,"ease-out",function(){})})}function y(b){"undefined"===typeof q.$variationList&&(q.$variationList=C("#"+a.TWISTER_DIMENSION_VIEW_SHELF+"-"+q.dimName+" .twisterShelf_swatch"));for(var c=q.$variationList,d=e(),f=parseInt(q.dimOrder),k=[],h=0;h<c.length;h++){5===k.length&&(w(k),k=[]);
var l=v(c[h].id),l=g.reconstructCombinationWithDimValue(d,f,l);if(l=q.dimensionToAsinMap[l])b?C(".twisterShelf_container #"+q.dimName+"_"+Q[l]+" .twisterShelf_infoSection_slots").length||(k.push(l),U+=1):(k.push(l),U+=1);else{var l=C(c[h]),m,p=c[h];m=e().split(a.CHAR_UNDERSCORE);var n=[],r=parseInt(q.dimOrder),p=parseInt(v(p.id));m[r]=p;if(q.parentView)var u=String(m[r]),t=q.parentView.twisterCore,p=q.parentView.twisterCore.util,u=t.util.predictNextState(t.util.createSelectionInfo(t.state()),t.util.createSelectionInfo(t.util.getSelectionInfoFromDimIndexAndValue(r,
u))),p=p.getAsinFromSelectionInfo(u.selectionInfo());else p=q.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(m.join(a.CHAR_UNDERSCORE),r);if(p=Q[p])for(u=0;u<m.length;u++)r!==u&&T[u]!==a.HIDDEN_DIMENSION_DISPLAY_TYPE&&n.push(q.dimensionValuesList[u][p[u]]);m=n.join(", ");l.addClass("shelf_unavailable");"undefined"!==typeof m?(n=l.find(".unavailableV2"),n.find(".variation-combination-text").html(m),l.find(".unavailable-text").removeClass("aok-hidden"),l.find(".shelf_loading_placeholder").hide(),
n.removeClass("aok-hidden"),l.find(".twisterShelf_infoSection").empty().addClass("aok-hidden")):(l.find(".shelf_loading_placeholder").hide(),l.find(".outofstock-text").removeClass("aok-hidden"),l.find(".shelf-outofstock").removeClass("aok-hidden"))}}0<k.length&&w(k)}function w(b){var c=I.createFunctionTimer(I.eventTypes.DIM_SUM_LOAD);c.start();var d=function(){c.stop();ea+=b.length;ea==U&&q.dualDimension&&f("twisterDualDimPlaceholderRemove")};0<b.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:void 0,
asinList:b,dimTriggeringDimSum:q.dimName,dimSubType:q.dimSubType,dimType:q.dimType,chunk:function(b){if(b&&"object"===typeof b){var c=parseInt(Q[b.ASIN][parseInt(q.dimOrder)]),c=C(J+c);if(b.Value&&b.Value.content&&b.Value.content.twisterSlotDiv){var d=C.trim(b.Value.content.twisterSlotDiv);if(0<d.length){c.removeClass("shelf_unavailable");c.find(".unavailableV2").addClass("aok-hidden");c.find(".outofstock-text").addClass("aok-hidden");c.find(".shelf-outofstock").addClass("aok-hidden");c.find(".unavailable-text").addClass("aok-hidden");
b=c.find(".twisterShelf_infoSection");b.empty();b.addClass("aok-hidden");b.append(d);var d=c.find(".twisterShelf_infoSection .price_slot_ppu, .twisterShelf_infoSection .deal_slot_ppu"),e=c.find(".twisterShelf_infoSection .sampling_twister_message"),f=c.find(".twisterShelf_infoSection .sampling_twister_price"),g=c.find(".twisterShelf_infoSection .twister_swatch_price");if(d.length||e.length){var k=C("\x3cp\x3e\x3c/p\x3e");e.length&&f.length?(g.length&&f.empty(),d.empty(),k.append(e)):k.append(d);b.append(k);
d=c.find(".twisterShelf_infoSection i");c=c.find(".twisterShelf_infoSection .olpWrapper");e=C(".twisterShelf_swatchSection.twisterShelf_isCollapsed");d.length&&c.length&&e.length&&b.addClass("hasAllItems")}b.removeClass("aok-hidden");d=G.find(".twisterShelf_swatch.selectedSwatch .twisterShelf_infoSection");d.length&&(c=d.find("[id*\x3d_price]"),d=d.find(".a-size-mini.[class*\x3d_slot_ppu]"),c.length&&c.hasClass(a.CLASS_FOR_PRICE_SECONDARY)&&c.removeClass(a.CLASS_FOR_PRICE_SECONDARY).addClass(a.CLASS_FOR_PRICE_SELECTED),
d.length&&d.addClass(a.CLASS_FOR_PRICE_SELECTED));q.dualDimensionShelf&&(c=b.find(".twister_swatch_price").find(".a-size-mini"),d=c.text().replace(/\s+/g,"").length,b.find("i").length&&7<d&&c.addClass("twisterShelf_dual_dim_price_long"))}}}},success:function(a,b,c,e){d()},error:d,abort:d})}function k(a,b,c,d,e){void 0!=c&&"function"===typeof c?c.call(q.parentView,a,b):"function"===typeof d&&d.call(q.twisterControllerHandle,a,q.dimOrder,e)}var q=this,C=t.$,D,H,N,J,G,L,K,Q,T,I,O,A,E,M,R,U=0,ea=0,V=
d[a.STRING_TWISTER_VARIATION_DATA];q.dimType=a.TWISTER_DIMENSION_VIEW_SHELF;q.initialize=function(){q.twisterAvailabilityCache=d[a.STRING_TWISTER_AVAILABILITY_CACHE];q.dimOrder=d[a.STRING_DIM_ORDER];q.parentView=d[a.PRODUCTIZED_PARENT_VIEW];q.twisterJSInitData=c;q.viewUtil=d[a.PRODUCTIZED_VIEW_UTIL];q.expandedViewEnabled=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][q.dimOrder][a.EXPANDED_VIEW_ENABLED];q.dimensionToAsinMap=V.dimToAsinMapData;q.dimName=d[a.STRING_DIM_NAME];q.dimensionsMap=d[a.STRING_DIMENSIONS_MAP];
q.dimNameDisplayString=d[a.STRING_DIMENSION_DISPLAY_STRING];q.dimValuesDisplayData=d[a.STRING_DIMENSION_VALUES_DATA];q.initialTwisterState=d[a.STRING_TWISTER_INITIAL_STATE_KEY];q.twisterControllerHandle=d[a.STRING_TWISTER_CONTROLLER_HANDLE];"IMAGE"===d[a.DIMENSION_SUB_TYPE]?(q.minAsinsForExpandedView=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][q.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE],q.minAsinsForExpandedScroll=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][q.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE]):
(q.minAsinsForExpandedView=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][q.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_TEXT],q.minAsinsForExpandedScroll=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][q.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT]);q.dualDimension=C(".dualDim-Swatch").length;q.dualDimension?(q.expanderButtonReplacementIndex=q.minAsinsForExpandedView-2,q.expanderHidesVariation=!0,q.expanderButtonPostCollapse=!0,q.dualDimensionShelf=!0,q.minHeightForExpandedSection=89,q.maxHeightForExpandedSection=
209,f("twisterDualDimPlaceholderShow2")):(q.expanderButtonReplacementIndex=q.minAsinsForExpandedView-1,q.expanderHidesVariation=!1,q.expanderButtonPostCollapse=!1,q.dualDimensionShelf=!1,q.minHeightForExpandedSection=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][q.dimOrder][a.MIN_HEIGHT_EXPANDED_SECTION],q.maxHeightForExpandedSection=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][q.dimOrder][a.MAX_HEIGHT_EXPANDED_SECTION]);q.dimSubType=d[a.DIMENSION_SUB_TYPE];q.currDimCombID=e();I=new m("DPTwisterShelfView");T=
V.dimensionsDisplayType;Q=V.asinToDimIndexMapData;q.dimensionValuesList=V.dimensionValuesData;K=C(a.ID_SELECTOR+"shelfSwatchSection-"+q.dimName+" .twisterShelf_swatch");N=C(a.ID_SELECTOR+"shelf-label-"+q.dimName+" .twisterShelf_dimension_label span");J=a.ID_SELECTOR+q.dimName+a.CHAR_UNDERSCORE;G=C(a.ID_SELECTOR+"shelfSwatchSection-"+q.dimName);L=q.dimValuesDisplayData.length;M=C(J+q.currDimCombID.split(a.CHAR_UNDERSCORE)[q.dimOrder]);E=C(J+q.currDimCombID.split(a.CHAR_UNDERSCORE)[q.dimOrder]);D=C(a.ID_SELECTOR+
"shelfSwatchSection-"+q.dimName+" .expanderButton");H=C(a.ID_SELECTOR+"shelfSwatchSection-"+q.dimName+" .collapseButton");r();q.expandedViewEnabled&&L>=q.minAsinsForExpandedView&&n()};q.removePageLayoutUrls=function(){C(".twisterShelf_swatch").each(function(a){a=C(this);a.parent().is("a")&&a.unwrap()})};q.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&q.currDimCombID!=b[a.STRING_DIM_COMB_ID]){for(var c=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][q.dimOrder],
d=0;d<q.$variationList.length;d++){var e=C(q.$variationList[d]);e.find("twisterShelf_infoSection").addClass("shelf_loading_placeholder");e.find("twisterShelf_infoSection").removeClass("aok-hidden");e.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_price");e.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_badge");e.find("unavailableV2").addClass("aok-hidden");e.find("twister_swatch_price").addClass("aok-hidden")}N.html(c);E=C(J+b.dimCombID.split(a.CHAR_UNDERSCORE)[q.dimOrder]);
E.removeClass("hoverSwatch");M.removeClass("selectedSwatch");E.addClass("selectedSwatch");u(b);y(!1);q.dualDimension&&l("dualDimShelfVariationDoubleClick");q.currDimCombID=b[a.STRING_DIM_COMB_ID];null!=R&&(R.updateSelectedVariation(q.currDimCombID,E),R.isCollapsed?R.handleVariationSwap(!0):R.scrollVariationIntoView());M=E}};q.onInitializeTwister=function(){t.loadDescendantImagesManually(G);y(!1)}}n.registerDimensionSubView(a.TWISTER_DIMENSION_VIEW_SHELF,f);return f});y.when("A","a-popover","twister-string-constants",
"twister-utils").register("twister-vodd-popover",function(t,g,a,b){return function(m){function n(a,b){v.eventListener&&v.eventListener.handlePopoverEvent&&v.eventListener.handlePopoverEvent(a,b)}function f(b){n(a.EVENT_TYPE_SHOWPOPOVER,b);var c="bottom"===v.displayPosition?"vodd-modified-popover":"vodd-modified-top-popover";b.popover.$container.hasClass(c)||b.popover.$container.addClass(c);h(b.popover.$container)}function c(b){n(a.EVENT_TYPE_HIDEPOPOVER,b);b.popover.$trigger.blur()}function d(b){h(b.popover.$container);
n(a.EVENT_TYPE_UPDATEPOPOVERPOSITION,b)}function h(a){var b=z.get(0).getBoundingClientRect(),c,d;x.pageYOffset?(c=x.pageYOffset,d=x.pageXOffset):"CSS1Compat"===(document.compatMode||"")?(c=document.documentElement.scrollTop,d=document.documentElement.scrollLeft):(c=document.body.scrollTop,d=document.body.scrollLeft);c="bottom"===v.displayPosition?b.bottom+c:b.top+c-a.height();var e=b.right-b.left,b=b.left+d;a&&a.css({top:c+"px",left:b+"px",width:e+"px"})}var l,e=t.$,z,v={name:null,trigger:null,eventListener:null,
displayPosition:"bottom",positionOnTwisterContainer:!0};this.getHandle=function(){return l};m&&e.extend(v,m);if(!v.name)throw"Popover name should not be null";if(!v.trigger)throw"Popover trigger should not be null";(function(){var a="triggerBottom";"top"===v.displayPosition&&(a="triggerTop");a={closeButton:!1,closeButtonLabel:"close",position:a,name:v.name,popoverLabel:v.name,padding:"none",activate:b.isTouchDevice()?"onmouseover":"onclick"};v.height&&e.extend(a,{height:v.height});l=g.create(v.trigger,
a)})();(function(){"function"===typeof x.markFeatureInteractive&&x.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"vodd"}]});t.on("a:popover:afterShow:"+v.name,f);t.on("a:popover:afterHide:"+v.name,c);t.on("a:popover:afterUpdatePosition:"+v.name,d);var a=function(){l&&l.isActive()&&h(l.$container)};t.on("a:pageUpdate",a);e(x).resize(a)})();z=v.positionOnTwisterContainer?e("#twister"):v.trigger}});y.when("A","twister-utils","twister-string-constants","scroll-event-handler","twister-vodd-popover",
"twister-vodd-override-behavior","dp-js-logger","twister-dimension-view-promise-factory").register("twister-vodd",function(t,g,a,b,m,n,f,c){function d(c,d){function e(){return A.parentView?A.parentView.getCurrDimCombId():A.initialTwisterState.getCurrentDimCombID()}function z(){var a=100*parseInt(A.dimensionOrder),b=a,c=function(a,b,c){a.addClass("animation-start");setTimeout(function(){a.animate({top:c||"0px"},{duration:300,complete:function(){E(this).removeClass("animation-start")}})},b)};aa.length&&
aa.parent("td").is(":visible")&&(c(aa.parent("td"),a,"5px"),b=a+50);c(ha.parent("td"),b,"5px")}function v(){ia=a.ID_SELECTOR+"vodd-button-"+A.dimensionName;DIMENSION_SINGLETON_ID=a.ID_SELECTOR+"vodd-singleton-"+A.dimensionName;na=a.CLASS_SELECTOR+"vodd-button-label-"+A.dimensionName;oa=a.CLASS_SELECTOR+"vodd-button-icon-"+A.dimensionName;qa=a.ID_SELECTOR+"vodd-table-"+A.dimensionName;pa=a.ID_SELECTOR+"dimension-button-img-"+A.dimensionName;la=a.ID_SELECTOR+A.dimensionName+a.CHAR_UNDERSCORE;ra="vodd-popover-"+
A.dimensionName;var b=parseInt(A.dimensionOrder),d=c[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES];d&&E.isArray(d)&&d.length>b&&(b=d[b],b[a.INIT_DATA_VISIBLE_ROW_COUNT]&&(ba=b[a.INIT_DATA_VISIBLE_ROW_COUNT]),b[a.INIT_DATA_MAX_POPOVER_HEIGHT]&&(ja=b[a.INIT_DATA_MAX_POPOVER_HEIGHT]),b[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]&&(sa=b[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]),b[a.INIT_DATA_POPOVER_POSITION]&&(ta=b[a.INIT_DATA_POPOVER_POSITION]))}function B(b){if(S){var c=S.length/A.dimensionsMap.length*100,c={divMetaData:q(null),
count:Math.ceil(A.dimensionsMap.length/ba),percentage:Math.floor(c),dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD};ca.logImpression(b,c)}}function r(){2==ea&&1===V&&(Z=!1);var b={trigger:A.dimensionButton,name:ra,eventListener:A,displayPosition:ta,positionOnTwisterContainer:Z},c=P.find("tr").not(".aok-hidden");c.length&&c.length>ba&&ja&&"undefined"!==typeof ja&&E.extend(b,{height:ja});M=new m(b);A.dimensionButton.bind(g.isTouchDevice()?a.EVENT_TYPE_TOUCHEND:a.EVENT_TYPE_CLICK,function(a){if(M&&M.getHandle()&&
M.getHandle().isActive())return M.getHandle().hide(),!1;ca.logImpression(X.CLICK,{time:Date.now()});g.isTouchDevice()&&A.dimensionButton.trigger("mouseenter")})}function p(a,b){var c=ca.createFunctionTimer(X.DIM_SUM_LOAD);c.start();Twister.dimensionalSummaryModule&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:b,asinList:a,dimTriggeringDimSum:A.dimensionName,dimSubType:A.dimSubType,dimType:A.dimType,chunk:function(a){if(a&&"object"===typeof a){var b=da[a.ASIN][parseInt(A.dimensionOrder)],
b=P.find(la+b);if(a.Value&&a.Value.content&&a.Value.content.twisterSlotDiv){var c=E.trim(a.Value.content.twisterSlotDiv);0<c.length&&(b.find(".vodd-loading-placeholder").hide(),J(b),a=b.find(".dimension-details"),a.append(c),b=a.find(".twister_swatch_price").parent(),b.is("div")&&!b.attr("class")&&(b=F(b),b.find(".a-size-mini").addClass("a-size-small").removeClass("a-size-mini"),b.addClass("a-color-price")),a=a.find(".sns-data-slot").parent(),a.is("div")&&!a.attr("class")&&F(a))}}},success:function(a,
b,d,e){c.stop()},error:function(){c.stop()},abort:function(){c.stop()}})}function u(b){var c=e(),d=parseInt(A.dimensionOrder),h=[],l=[];S||(S=[]);override=n.getVoddOverrideBehavior();A.voddOverrideEnabled=!0;try{A.shouldFetchNextAvailableAsin=override.shouldGetNextAvailableAsin(A.dimensionOrder,A.dimensionsMap)}catch(m){var q=new f(override.externalFeatureName),r={message:"[shouldFetchNextAvailableAsin failed for VODD Twister Override]"};q.logFatal(m,r)}for(var u=0;u<b.length;u++){7===h.length&&(p(h,
l),h=[],l=[]);var w=k(b[u].id),q=g.reconstructCombinationWithDimValue(c,d,w);asin=ma[q];0>t.indexOfArray(S,w)&&S.push(w);null==asin&&A.shouldFetchNextAvailableAsin&&(q=e().split(a.CHAR_UNDERSCORE),d=parseInt(A.dimensionOrder),q[d]=w,asin=K(q,d));if(asin){if(A.voddOverrideEnabled){var v="";try{v=override.getSupplementString(asin,ma,da,U)}catch(m){q=new f(override.externalFeatureName),r={message:"[getSupplementString failed for VODD Twister Override]"},q.logFatal(m,r)}E(b[u]).find(".supplementString").remove();
E(b[u]).find(".dimension-display-text").append('\x3cspan class\x3d"supplementString a-size-mini"\x3e'+v+"\x3c/span\x3e")}l.push(w);h.push(asin)}}0<h.length&&p(h,l)}function F(a){var b=a.prev(),c=a.children();a.remove();b.after(c);return c}function w(a){a=g.getVisibleTableRows(a.currentTarget,P.find("tr"));u(a)}function k(b){if(!b)return-1;b=b.split(a.CHAR_UNDERSCORE);return b[b.length-1]}function q(b){return{dimIndex:A.dimensionOrder,dimValueIndex:b?k(b.id):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD}}
function C(a){B(X.CLICK_VARIATION);ga||B(X.SCROLL);ga=!0;S=null;var b=q(a.currentTarget),c=e(),d=g.reconstructCombinationWithDimValue(c,b.dimIndex,b.dimValueIndex);d!=c&&(T(),N(b,a.type,A.parentView?A.parentView.handleClick:void 0,A.twisterControllerHandle.handleClick,null));M&&M.getHandle()&&M.getHandle().hide();b={dimensionOrder:A.dimensionOrder,dimensionValueIndex:b.dimValueIndex,isSelectedDimValueAvailable:Y.dimToAsinMapData[d]?!0:!1};E(a.currentTarget).trigger("TwisterVODD.dimensionRowClick",
b)}function D(a){E(a.currentTarget).addClass("vodd-row-hovered");var b=q(a.currentTarget);N(b,a.type,A.parentView?A.parentView.handleMouseOver:void 0,A.twisterControllerHandle.handleMouseOver,null)}function H(a){E(a.currentTarget).removeClass("vodd-row-hovered");var b=q(a.currentTarget);N(b,a.type,A.parentView?A.parentView.handleMouseOut:void 0,A.twisterControllerHandle.handleMouseOut,k(a.currentTarget.id))}function N(a,b,c,d,e){void 0!=c?c.call(A.parentView,a,b):d.call(A.twisterControllerHandle,
a,A.dimensionOrder,e)}function J(a){a.find(".dimension-slots .availability-message").nextAll().remove()}function G(b,c){if(c)b.find(".unavailable-text").hide(),b.find(".vodd-loading-placeholder").show();else{b.find(".vodd-loading-placeholder").hide();b.find(".unavailableV2").removeClass("aok-hidden");c=e().split(a.CHAR_UNDERSCORE);var d=[],f=parseInt(A.dimensionOrder),g=k(b[0].id);c[f]=g;g=K(c,f);if(g=da[g])for(var h=0;h<c.length;h++)f!==h&&ua[h]!==a.HIDDEN_DIMENSION_DISPLAY_TYPE&&d.push(U[h][g[h]]);
if(c=d.join(", "))b.find(".unavailable-text").show(),b.find(".variation-combination-text").text(c);a:{c=0;d=parseInt(A.dimensionOrder);f=parseInt(k(b[0].id));for(asin in da)if(parseInt(da[asin][d])===f&&1<++c){c=!0;break a}c=!1}c||b.find(".variation-more-text").hide()}J(b)}function L(b){W.sort(function(c,d){c=k(c.id);d=k(d.id);if(b[c][a.STRING_STYLE]!==b[d][a.STRING_STYLE]){if(b[c][a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE)return 1;if(b[d][a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE)return-1}return c-
d});W.detach().appendTo(P)}function K(b,c){if(A.parentView){var d=String(b[c]),e=A.parentView.twisterCore;b=A.parentView.twisterCore.util;c=e.util.predictNextState(e.util.createSelectionInfo(e.state()),e.util.createSelectionInfo(e.util.getSelectionInfoFromDimIndexAndValue(c,d)));c=b.getAsinFromSelectionInfo(c.selectionInfo())}else c=A.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(b.join(a.CHAR_UNDERSCORE),c);return c}function Q(a){var b=P.find("tr").not(".aok-hidden");a=b.index(a);
var c=b.length-ba;a>c?(a=c,0>a&&(a=0)):a=0==a?a:a-1;b=b.slice(a,a+ba);u(b)}function T(){W.unbind(a.EVENT_TYPE_CLICK,C);g.isTouchDevice()||W.unbind(a.EVENT_TYPE_MOUSEENTER,D).unbind(a.EVENT_TYPE_MOUSELEAVE,H)}function I(b,c,d){var e=b;if(O()){var f=b.split(a.CHAR_UNDERSCORE);b=A.dimensionOrder;for(var f=f.slice(0),k=0;k<dimensionHierarchyData.length;k++)b!=k&&dimensionHierarchyData[b]<dimensionHierarchyData[k]&&(f[k]="X",e=f.join("_"))}b=e;e=g.getDimStyleData(e,A.dimValuesDisplayData.length,A.dimensionOrder,
A.twisterAvailabilityCache,A.displayConfigStylesData);L(e);var h=null;b=e.length;for(f=0;f<e.length;f++){var k=e[f],l=P.find(la+f);if(k[a.STRING_STYLE]===a.CLASS_FOR_VODD_SELECT){if(h=l,l.addClass("vodd-row-selected"),A.dimensionValueHasIcon[f]?(ha.text(""),ka.attr("class","background-sprite "+A.dimValuesDisplayData[f].replace(/\s/g,""))):(ka.attr("class",""),ha.text(A.dimValuesDisplayData[f])),aa.length){var m=l.find("img.vodd-dimension-img");(m=0<m.length?m.attr("src"):null)&&aa.attr("src",m).show()}}else l.removeClass("vodd-row-selected");
l.removeClass("vodd-row-hovered");1<A.dimensionsMap.length&&G(l,k[a.STRING_STYLE]!==a.CLASS_FOR_VODD_UNAVAILABLE);O(d)&&(k[a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE?(l.addClass("aok-hidden"),--b):l.removeClass("aok-hidden"))}O(d)&&(1>=b?(E(ia).addClass("aok-hidden"),E(DIMENSION_SINGLETON_ID).removeClass("aok-hidden")):(E(DIMENSION_SINGLETON_ID).addClass("aok-hidden"),E(ia).removeClass("aok-hidden")));c?t.on.load(function(){Q(h)}):Q(h)}function O(){var a=!1;isHierarchicalPivoting&&topHierarchicalDimensionIndex!==
parseInt(A.dimensionOrder)&&(a=!0);return a}var A=this,E=t.$,M,R,U,ea,V,Z=!0,fa,W,P,aa,ha,ka,na,oa,pa,ia,qa,la,ra,ba=0,ta="bottom",sa=!1,ja,ga=!1,S,ma,ua,da,ca,X,Y=d[a.STRING_TWISTER_VARIATION_DATA];A.dimType=a.TWISTER_DIMENSION_VIEW_VODD;A.initialize=function(){A.twisterAvailabilityCache=d[a.STRING_TWISTER_AVAILABILITY_CACHE];A.dimensionOrder=d[a.STRING_DIM_ORDER];A.parentView=d[a.PRODUCTIZED_PARENT_VIEW];A.twisterJSInitData=c;A.viewUtil=d[a.PRODUCTIZED_VIEW_UTIL];A.displayConfigStylesData=d[a.STRING_DISPLAY_CONFIG_STYLES_DATA];
A.dimSubType=d[a.DIMENSION_SUB_TYPE];A.dimensionValueHasIcon=d[a.DIMENSION_VALUE_HAS_ICON];A.initialTwisterState=d[a.STRING_TWISTER_INITIAL_STATE_KEY];A.twisterControllerHandle=d[a.STRING_TWISTER_CONTROLLER_HANDLE];A.dimensionsMap=Y.dimensionsMap;A.dimensionName=A.dimensionsMap[A.dimensionOrder];A.dimValuesDisplayData=Y.dimensionValuesData[A.dimensionOrder];ea=A.dimensionsMap.length;U=Y.dimensionValuesData;ma=Y.dimToAsinMapData;ca=new f("DPTwisterVODDView");X=ca.eventTypes;ua=Y.dimensionsDisplayType;
da=Y.asinToDimIndexMapData;V=E(".vodd-dim-wrapper").size();dimensionHierarchyData=c.dimensionHierarchyData;isHierarchicalPivoting=c.hierarchicalPivoting;topHierarchicalDimensionIndex=c.topHierarchicalDimensionIndex;v();A.dimensionButton=E(ia);P=E(qa);W=P.find("tr");aa=E(pa);ha=E(na);ka=E(oa);ca.logImpression(X.DIM_INIT,{count:Math.ceil(A.dimensionsMap.length/ba),dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD});sa&&y.when("A","ready").execute(function(a){x.setTimeout(function(){z()},1E3)})};A.onInitializeTwister=
function(){I(e(),!0,null);t.loadDescendantImagesManually(P);r()};A.handlePopoverEvent=function(c,d){c===a.EVENT_TYPE_SHOWPOPOVER?(T(),W.bind(a.EVENT_TYPE_CLICK,C),g.isTouchDevice()||W.bind(a.EVENT_TYPE_MOUSEENTER,D).bind(a.EVENT_TYPE_MOUSELEAVE,H),ga=!1,c=d.popover.$trigger,d={popover:d},c.addClass("highlighted"),c.trigger("TwisterVODD.showPopup",d),R||(fa=P.closest(".a-popover-inner"),R=new b(200,fa,w)),d=P.find("tr.vodd-row-selected"),fa&&fa.length&&d.length&&fa.scrollTop(d.get(0).offsetTop-33)):
c===a.EVENT_TYPE_HIDEPOPOVER?(c=d.popover.$trigger,d={popover:d},ga||(B(X.SCROLL),S=null),ga=!0,E(c).removeClass("highlighted"),c.trigger("TwisterVODD.hidePopup",d)):c===a.EVENT_TYPE_UPDATEPOPOVERPOSITION&&d.popover.$trigger.trigger("TwisterVODD.updatePopupPosition",{popover:d})};A.updateView=function(b){b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&I(b[a.STRING_DIM_COMB_ID],!1,b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA])};A.showVariationSelection=function(){g.isTouchDevice()||A.dimensionButton.trigger("click")}}
c.registerDimensionSubView(a.TWISTER_DIMENSION_VIEW_VODD,d);return d});y.when("A","twister-utils","twister-string-constants").register("twister-beaconized-evdd",function(t,g,a){return function(b,m){function n(){var a=e(z).height(),a={localContent:v,location:"bottom",showOnHover:!1,showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-(8+a)],closeEventInclude:"CLICK_OUTSIDE",forceAlignment:!0,group:"DonsBoxDropDowns",width:null};"function"===typeof x.markFeatureInteractive&&
x.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"evdd"}]});p=e(z).amazonPopoverTrigger(a);e(document).bind("touchend click",function(){F=!1;p.amznPopoverHide()})}function f(a){F=!0;a=a.currentTarget.id.split("_");twisterController.handleClick({dimIndex:l.dimOrder,dimValueIndex:a[a.length-1]});F&&(p.amznPopoverHide(),F=!1);return!1}function c(a){e(a.currentTarget).addClass("evdd-row-hovered")}function d(a){e(a.currentTarget).removeClass("evdd-row-hovered");return!1}function h(a){e(a.currentTarget).removeClass("evdd-row-hovered");
f(a);return!1}var l=this,e=t.$,z,v,y,r,p,u={},F=!1;l.dimType="etdd";l.dimNameDisplayString;l.dimData;l.dimensionsMap;l.dimNameDisplayString;l.dimValuesDisplayData;l.dimName;l.dimOrder;l.isMasterDim=!1;l.initialize=function(){var b;l.dimOrder=m[a.STRING_DIM_ORDER];l.dimName=m[a.STRING_DIM_NAME];l.dimensionsMap=m[a.STRING_DIMENSIONS_MAP];l.dimNameDisplayString=m[a.STRING_DIMENSION_DISPLAY_STRING];l.dimValuesDisplayData=m[a.STRING_DIMENSION_VALUES_DATA];l.displayConfigStylesData=m[a.STRING_DISPLAY_CONFIG_STYLES_DATA];
l.twisterControllerHandle=m[a.STRING_TWISTER_CONTROLLER_HANDLE];l.initialTwisterState=m[a.STRING_TWISTER_INITIAL_STATE_KEY];b=l.initialTwisterState.getCurrentDimCombID();l.dimData=g.getDimStyleData(b,l.dimValuesDisplayData.length,l.dimOrder,l.twisterControllerHandle.twisterAvailabilityCache,l.displayConfigStylesData);l.isMasterDim=!1;"0"===l.dimOrder&&(l.isMasterDim=!0);l.dimNameDisplayString=m[a.STRING_DIMENSION_DISPLAY_STRING];z="#evdd-button-"+l.dimName;v="#evdd-table-wrapper-"+l.dimName;y="#evdd-singleton-"+
l.dimName;u.invalid=l.isMasterDim?"evdd-row-default":"evdd-row-hidden";u.available="evdd-row-default";u.selected="evdd-row-selected";r="evdd-hidden evdd-row-hovered evdd-row-hidden evdd-row-default evdd-row-selected";n();for(var k=0,p=l.dimData.length;k<p;k++)b="#"+l.dimName+"_"+k,e(b).bind("click",f).bind("touchend",h).bind("touchstart",c).bind("mouseenter",c).bind("mouseleave",d)};l.updateView=function(a){var b=g.getDimStyleData(a.dimCombID,l.dimValuesDisplayData.length,l.dimOrder,l.twisterControllerHandle.twisterAvailabilityCache,
l.displayConfigStylesData),c,d,f,h;a=0;h="";p.amznPopoverHide();F=!1;for(var m=0,n=b.length;m<n;m++)c=b[m],d=u[c.style],f="#"+l.dimName+"_"+m,"evdd-row-selected"===d&&(h=m,h=l.dimValuesDisplayData[h]),"available"!==c.style&&"selected"!==c.style||a++,$rowElement=e(f),$rowElement.removeClass(r).addClass(d),$rowElement.find(".evdd-row-snake-wrapper").show(),$rowElement.find(".evdd-row-price-info-wrapper").html(""),$rowElement.find(".evdd-row-prime-badge-wrapper").html("");b=!1;l.isMasterDim||1!==a||
(b=!0);a=b;e(z).find("button").text(h);e(y).text(h);a?(e(z).addClass("evdd-hidden"),e(y).removeClass("evdd-hidden")):(e(y).addClass("evdd-hidden"),e(z).removeClass("evdd-hidden"))};l.updateViewWithPriceInfo=function(a){var b,c,d;for(b in a)c=a[b],d="#"+l.dimName+"_"+b,d=e(d),d.find(".evdd-row-snake-wrapper").hide(),d.find(".evdd-row-price-info-wrapper").html(c[2]),d.find(".evdd-row-prime-badge-wrapper").html(c[3])}}});y.when("A","twister-utils","twister-string-constants").register("twister-native-evdd",
function(t,g,a){return function(b,m){function n(){var a=c(d).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:f.dimOrder,dimValueIndex:a})}var f=this,c=t.$,d;f.dimType="etdd";f.dimNameDisplayString;f.dimName;f.dimOrder;f.isMasterDim=!1;f.initialize=function(){f.dimOrder=m[a.STRING_DIM_ORDER];f.dimName=m[a.STRING_DIM_NAME];f.dimValuesDisplayData=m[a.STRING_DIMENSION_VALUES_DATA];f.isMasterDim=!1;"0"===f.dimOrder&&(f.isMasterDim=!0);f.dimNameDisplayString=m[a.STRING_DIMENSION_DISPLAY_STRING];
f.displayConfigStylesData=m[a.STRING_DISPLAY_CONFIG_STYLES_DATA];f.twisterControllerHandle=m[a.STRING_TWISTER_CONTROLLER_HANDLE];d="#evdd-select-"+f.dimName;"function"===typeof x.markFeatureInteractive&&x.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"etdd"}]});c(d).change(n)};f.updateView=function(a){a=g.getDimStyleData(a.dimCombID,f.dimValuesDisplayData.length,f.dimOrder,f.twisterControllerHandle.twisterAvailabilityCache,f.displayConfigStylesData);var b,e="";c(d).empty();
for(var m=0,n=a.length;m<n;m++)if(rowData=a[m],b=rowData.style,"invalid"!==b||f.isMasterDim)b="selected"===b?"selected":"",rowId="#native-"+f.dimName+"_"+m,b='\x3coption id\x3d"'+rowId+'" value\x3d"'+m+'," '+b+"\x3e"+f.dimValuesDisplayData[m]+"\x3c/option\x3e",e+=b;c(d).html(e)}}});y.when("A","twister-dimension-view-promise-factory","twister-string-constants","3p-promise","twister-dimension-subview-promise-handler").register("twister-view",function(t,g,a,b,m){return function(n,f,c,d,h){function l(a){for(var b,
c=[],d=0,e=v.dimensionsMap.length;d<e;d++)b=g.getDimensionSubViewPromise(v.twisterJSInitData,v.twisterVariationsData,d.toString(10),v.twisterControllerHandle,a),c.push(b);return c}function e(b){var c=m.getDimensionSubViewPromise("page-refresh-view");t.each(b,function(a,b){a.initialize();v.dimensionViewHandlersMap[b]=a});c.then(function(a){t.each(b,function(a,b){void 0!=a.removePageLayoutUrls&&a.removePageLayoutUrls()});x("#twisterNonJsData").html("")});x(a.CLASS_FOR_NON_JS_EVDD).hide();x(a.CLASS_FOR_NEW_TWISTER_EVDD).show();
v.updateView({},v.twisterControllerHandle.initTwisterState,a.EVENT_TYPE_CLICK);v.onInitializeTwister()}function z(b,c,d,e,f){var g={},h={};g[a.STRING_EVENT_TYPE]=b;g[a.STRING_DIM_COMB_ID]=c;h[a.STRING_EVENT_DIV_METADATA]=d;h[a.STRING_EVENT_DIM_INFO]=e;h[a.STRING_DIMENSION_SELECTION_DATA]=f;g[a.STRING_EVENT_DATA]=h;return g}var v=this,x=t.$;v.twisterControllerHandle=n;v.twisterJSInitData=c;v.twisterVariationsData=d;v.twisterAvailabilityCache=h;v.dimensionsMap={};v.dimensionDisplayMap={};v.dimensionDisplayTypeMap=
{};v.dimensionViewHandlersMap={};v.isAllViewsInitializedPromise=null;v.updateView=function(b,c,d){var e={},f,g=c.dimensionSelectionData;d===a.EVENT_TYPE_MOUSEOVER?(f=c.hoveredAsin,c=c.hoveredDimCombID):(f=c.getCurrentASIN(),c=c.getCurrentDimCombID());e[a.STRING_DIMENSION_VALUES_DATA]=v.twisterVariationsData.getDimensionValuesDisplayData(f);e[a.STRING_DIMENSION_DISPLAY_MAP]=v.dimensionDisplayMap;e[a.STRING_DIMENSIONS_MAP]=v.dimensionsMap;b=z(d,c,b,e,g);d=0;for(e=v.dimensionsMap.length;d<e;d++)v.dimensionViewHandlersMap[d].updateView(b)};
v.updateViewAfterTwisterUpdate=function(b,c,d){var e={},f=c.dimensionSelectionData;c.getCurrentASIN();c=c.getCurrentDimCombID();e[a.STRING_DIMENSION_DISPLAY_MAP]=v.dimensionDisplayMap;e[a.STRING_DIMENSIONS_MAP]=v.dimensionsMap;b=z(d,c,b,e,f);if(d===a.EVENT_TYPE_DROPDOWN_CHANGE||d===a.EVENT_TYPE_CLICK)for(d=0,e=v.dimensionsMap.length;d<e;d++)v.dimensionViewHandlersMap[d].updateViewAfterTwisterUpdate&&v.dimensionViewHandlersMap[d].updateViewAfterTwisterUpdate(b)};v.onInitializeTwister=function(){"undefined"!==
typeof v.dimensionViewHandlersMap&&v.dimensionViewHandlersMap&&x.each(v.dimensionViewHandlersMap,function(a,b){if("function"===typeof b.onInitializeTwister)b.onInitializeTwister()})};v.isAllViewsInitialized=function(){return v.isAllViewsInitializedPromise};v.isAllViewsInitializedPromise=function(c){var d=v.twisterJSInitData,f=d[a.INIT_DATA_DIMENSIONS_MAP].length,g=[],h=[],k=[],m=0;for(index=0;index<f;index++)d[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP]&&d[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][index]!==
a.HIDDEN_DIMENSION_DISPLAY_TYPE&&(g[m]=d[a.INIT_DATA_DIMENSIONS_MAP][index],h[m]=d[a.INIT_DATA_DIMENSIONS_DISPLAY][index],k[m]=d[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][index],m++);v.dimensionsMap=g;v.dimensionDisplayMap=h;v.dimensionDisplayTypeMap=k;var n=l(c);return new b(function(a){b.all(n).then(function(b){e(b);a()})})}(f)}});y.when("A","twister-string-constants").register("migrated-views",function(t,g){var a=[g.TWISTER_DIMENSION_VIEW_VODD,g.TWISTER_DIMENSION_VIEW_SWATCH,g.TWISTER_DIMENSION_VIEW_DROPDOWN,
g.TWISTER_DIMENSION_VIEW_SHELF,g.TWISTER_DIMENSION_VIEW_COUNTER];return{getMigratedViews:function(){return a}}});y.when("A","twister-dimension-view-promise-factory","twister-string-constants","view-util","twister-utils","accessibility-helper","dp-js-logger","3p-promise","twister-dimension-subview-promise-handler").register("parent-view",function(t,g,a,b,m,n,f,c,d){return function(h,l,e,z,v){function x(){for(var b,c=0,d=[],e=0,f=v.tvm.dimensionList.length;e<f;e++)k.twisterJSInitData[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP]&&
k.twisterJSInitData[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][e]!==a.HIDDEN_DIMENSION_DISPLAY_TYPE&&(k.dimensionDisplayTypeMap[e]=k.twisterJSInitData[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][e],k.dimensionsMap[e]=k.twisterJSInitData[a.INIT_DATA_DIMENSIONS_MAP][e],b=g.getDimensionSubViewPromise(k.twisterJSInitData,k.twisterVariationsData,e.toString(10),k.twisterControllerHandle,void 0,k),d.push(b),k.dimensionSubViewIndexMap[c++]=e);return d}function r(b){y.declare("twisterPhase2StartTime",+new Date);
var c=d.getDimensionSubViewPromise("page-refresh-view");t.each(b,function(a,b){a.initialize();k.dimensionViewHandlersMap[k.dimensionSubViewIndexMap[b]]=a});c.then(function(a){t.each(b,function(a,b){void 0!=a.removePageLayoutUrls&&a.removePageLayoutUrls()});q("#twisterNonJsData").html("")});q(a.CLASS_FOR_NON_JS_EVDD).hide();q(a.CLASS_FOR_NEW_TWISTER_EVDD).show();p();k.updateView(a.EVENT_TYPE_CLICK);k.onInitializeTwister();y.declare("twisterPhase2EndTime",+new Date)}function p(){var a=u();k.twister=
v.registerActive({viewAttribution:"DetailPage",viewName:"TwisterDesktopView"},a)}function u(){return{updateView:function(b,c){switch(b){case a.VARIATION_CHANGE:c=c.selected();b=k.viewUtil.getDimensionValuesData(c.selInfo,k.twisterJSInitData);k.updateView(k.eventType,k.divMetaData,b);if(k.eventType===a.EVENT_TYPE_DROPDOWN_CHANGE||k.eventType===a.EVENT_TYPE_CLICK)c=k.viewUtil.createAccessibilityText(c.selInfo,k.twisterJSInitData),n.announceText(c),updateViewAfterTwisterUpdate(k.divMetaData,k.eventType,
b);break;case a.VARIATION_PEEK:c=c.peek(),b=k.viewUtil.getDimensionValuesData(c.selInfo,k.twisterJSInitData),k.updateView(k.eventType,k.divMetaData,b,c.selInfo)}}}}function F(){return{divMetadata:k.divMetaData,eventType:k.eventType,subType:a.DP_STATE_VIEW_SUBTYPE,dimensionsMap:k.dimensionsMap,currDimCombId:k.viewUtil.getCurrDimCombId(v.state(),a.CHAR_UNDERSCORE)}}function w(b,c,d,e){var f=v.state(),g={},h={};d={dimensionDisplayMap:k.viewUtil.getDimDisplayMap(),dimensionsMap:k.dimensionsMap,dimensionValuesData:d?
d:k.viewUtil.getDimensionValuesData(f,k.twisterJSInitData)};g[a.STRING_DIM_COMB_ID]=k.viewUtil.getCurrDimCombId(b===a.EVENT_TYPE_MOUSEENTER&&e?e:f,a.CHAR_UNDERSCORE,a.CHAR_CROSS);g[a.STRING_EVENT_TYPE]=b;h[a.STRING_EVENT_DIV_METADATA]=c;h[a.STRING_EVENT_DIM_INFO]=d;h[a.STRING_DIMENSION_SELECTION_DATA]=k.viewUtil.getDimensionSelectionData(v.util.dimensionMetaData,f);g[a.STRING_EVENT_DATA]=h;return g}var k=this,q=t.$;k.twisterControllerHandle=h;k.twisterJSInitData=l;k.twisterVariationsData=e;k.twisterAvailabilityCache=
z;k.viewUtil=new b(v);k.deletedLandingAsinInfo=l[a.INIT_DATA_DELETED_LANDING_ASIN_INFO];k.dimensionsMap=[];k.dimensionDisplayTypeMap={};k.dimensionViewHandlersMap={};k.dimensionSubViewIndexMap={};k.divMetaData={};k.eventType="";k.twisterCore=v;k.enableMouseOut;k.isAllViewsInitializedPromise=null;k.logger=new f("dpTwister",this,!0);k.handleClick=function(a,b){k.viewUtil.initializeTwisterInteractionStartTime();var c=v.state();k.divMetaData=a;k.eventType=b;if(k.viewUtil.isAlreadySelected(c,a))return!1;
b=k.viewUtil.getTwisterState(a);k.twister.metaData(F());k.twister.dimensionChanged(b);k.logger.logImpression(k.logger.eventTypes.CLICK,{divMetaData:a});return b};k.getCurrDimCombId=function(){return k.viewUtil.getCurrDimCombId(v.state(),a.CHAR_UNDERSCORE)};k.handleDropdownChange=function(a,b,c){k.handleClick(a,c)};k.handleMouseOver=function(b,c){if(m.isTouchOnlyDevice())return k.handleClick(b,a.EVENT_TYPE_CLICK),!0;k.divMetaData=b;k.eventType=c;c=v.state();k.enableMouseOut=1;if(k.viewUtil.isAlreadySelected(c,
b))return!1;c=k.viewUtil.getTwisterState(b);k.twister.metaData(F());k.twister.dimensionPeek(c);k.logger.logImpression(k.logger.eventTypes.HOVER,{divMetaData:b});return c};k.handleMouseOut=function(a,b){k.divMetaData=a;k.eventType=b;a=k.viewUtil.getTwisterState(a);return 1===k.enableMouseOut?(k.enableMouseOut=0,k.twister.metaData(F()),k.twister.dimensionPeek(v.state()),a):!1};k.updateView=function(a,b,c,d){a=w(a,b,c,d);b=0;for(c=k.dimensionsMap.length;b<c;b++)k.dimensionViewHandlersMap[b].updateView(a);
return a};updateViewAfterTwisterUpdate=function(b,c,d){b=w(c,b,d);if(c===a.EVENT_TYPE_DROPDOWN_CHANGE||c===a.EVENT_TYPE_CLICK)for(c=0,d=k.dimensionsMap.length;c<d;c++)"function"===typeof k.dimensionViewHandlersMap[c].updateViewAfterTwisterUpdate&&k.dimensionViewHandlersMap[c].updateViewAfterTwisterUpdate(b);return b};k.onInitializeTwister=function(){"undefined"!==typeof k.dimensionViewHandlersMap&&k.dimensionViewHandlersMap&&q.each(k.dimensionViewHandlersMap,function(a,b){if("function"===typeof b.onInitializeTwister)b.onInitializeTwister()})};
k.isAllViewsInitialized=function(){return k.isAllViewsInitializedPromise};k.isAllViewsInitializedPromise=function(){var a=x();y.declare("twisterPhase1EndTime",+new Date);return new c(function(b){c.all(a).then(function(a){r(a);b()})})}()}});y.when("A","twister-string-constants","detail-page-state-controller","view-util","twister-utils","dp-js-logger").register("detail-page-state-controller-view",function(t,g,a,b,m,n){return function(a,c){function d(){return{updateView:function(b,d){var e=c.util,t;
switch(b){case g.METADATA:d.subType===g.DP_STATE_VIEW_SUBTYPE&&(n=d.divMetadata,v=d.dimensionsMap,y=d.currDimCombId);break;case g.VARIATION_CHANGE:d=d.selected();isFullySelected=e.isFullySelected(d);e=e.getAsinFromSelectionInfo(d.selInfo,isFullySelected);t=r.getDimensionValuesDisplayData(e,a);b=r.getCurrDimCombId(d.selInfo,g.CHAR_UNDERSCORE,g.CHAR_CROSS);var k=c.util;if(l.eventType==g.EVENT_TYPE_CLICK||l.eventType==g.EVENT_TYPE_DROPDOWN_CHANGE){for(var q=r.getCurrDimCombId(d.selInfo),C={},D=0,H=v.length;D<
H;D++)"1"==k.isRequiredDim(v[D])&&n.dimIndex==D&&"*"===q[D]?C[v[D]]="-1":C[v[D]]=q[D];DetailPage.StateController.setState("selected_variation_values",C)}h("selected",t,d.selInfo);h("hovered",t,d.selInfo);DetailPage.StateController.setState("current_asin",e);DetailPage.StateController.setState("currentDimCombID",b);DetailPage.StateController.setState("reactId",b);DetailPage.StateController.setState("dimensionSelectionData",r.getDimensionSelectionData(c.util.dimensionMetaData,d.selInfo));t=n[g.STRING_DIM_INDEX];
d=m.getAttachedClass(n,r.getDimNameByOrder(t));d="undefined"!==typeof d&&(-1!==d.indexOf(g.CLASS_FOR_SWATCH_UNAVAILABLE)||-1!==d.indexOf(g.CLASS_FOR_DROPDOWN_UNAVAILABLE));q=b.split(g.CHAR_UNDERSCORE);k=y.split(g.CHAR_UNDERSCORE);q[t]=g.CHAR_ASTERISK;k[t]=g.CHAR_ASTERISK;t=q.join(g.CHAR_UNDERSCORE);k=k.join(g.CHAR_UNDERSCORE);t!=k&&(d=!0);DetailPage.StateController.setState("isUnavailableInOldDimCombId",d?"true":"false");x.twisterController&&x.twisterController.twisterModel&&x.twisterController.twisterModel.twisterState&&
(d=x.twisterController.twisterModel.twisterState,d.currentDimCombID=b,d.currentASIN=e);break;case g.VARIATION_PEEK:d=d.peek(),isFullySelected=e.isFullySelected(d),e=e.getAsinFromSelectionInfo(d.selInfo,isFullySelected),t=r.getDimensionValuesDisplayData(e,a),a.useMS&&(!n||n.dimDisplayType!==g.TWISTER_DIMENSION_VIEW_VODD&&n.dimDisplayType!==g.TWISTER_DIMENSION_VIEW_SHELF&&n.dimDisplayType!==g.TWISTER_DIMENSION_VIEW_COUNTER)||h("hovered",t,d.selInfo),DetailPage.StateController.setState("hovered_asin",
e)}}}}function h(b,c,d){var h={};e.each(c,function(b,c){r.isDimensionSelected(b,d)&&"(Please Select)"===c&&(c=null);h[a[g.INIT_DATA_DIMENSIONS_MAP][b]]=c});DetailPage.StateController.setState(b+"_variations",h)}var l=this,e=t.$,n={},v={},y="",r=new b(c);(function(){var a=d();l.twister=c.registerActive({viewAttribution:"DetailPage",viewName:"DPStateControllerView"},a)})()}});y.when("A","twister-string-constants","twister-dimension-view-promise-factory","twister-native-evdd","twister-beaconized-evdd").register("twister-evdd",
function(t,g,a,b,m){t=t.$;if(t("html").hasClass("a-lt-ie8"))return a.registerDimensionSubView(g.TWISTER_DIMENSION_VIEW_EVDD,b),b;a.registerDimensionSubView(g.TWISTER_DIMENSION_VIEW_EVDD,m);return m})});